{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/ProjectEditor.vue?a0a5","webpack:///./src/SliceDrawer.js","webpack:///./src/views/Session.vue?2bc1","webpack:///./src/components/UserEditor.vue?117d","webpack:///./src/components/SessionClassBalance.vue?35bf","webpack:///./src/components/WSIViewerRuler.vue?a8be","webpack:///./src/components/AdminAppBar.vue?7659","webpack:///./src/App.vue?ad6f","webpack:///src/App.vue","webpack:///./src/App.vue?a37b","webpack:///./src/App.vue","webpack:///./src/store.js","webpack:///./src/views/Tasks.vue?4fda","webpack:///./src/components/TaskStatusOverview.vue?3b48","webpack:///src/components/TaskStatusOverview.vue","webpack:///./src/components/TaskStatusOverview.vue?7de8","webpack:///./src/components/TaskStatusOverview.vue","webpack:///src/views/Tasks.vue","webpack:///./src/views/Tasks.vue?4ca0","webpack:///./src/views/Tasks.vue","webpack:///./src/views/Session.vue?bb78","webpack:///./src/components/WSIViewer.vue?f6b1","webpack:///./src/components/WSIViewerRuler.vue?7369","webpack:///src/components/WSIViewerRuler.vue","webpack:///./src/components/WSIViewerRuler.vue?76c3","webpack:///./src/components/WSIViewerRuler.vue?5002","webpack:///src/components/WSIViewer.vue","webpack:///./src/components/WSIViewer.vue?d920","webpack:///./src/components/WSIViewer.vue?a3c0","webpack:///./src/components/SideWindow.vue?c3b1","webpack:///src/components/SideWindow.vue","webpack:///./src/components/SideWindow.vue?2dee","webpack:///./src/components/SideWindow.vue","webpack:///./src/components/AnnotationCard.vue?de44","webpack:///./src/components/AnnotationIdleCard.vue?1b12","webpack:///src/components/AnnotationIdleCard.vue","webpack:///./src/components/AnnotationIdleCard.vue?62de","webpack:///./src/components/AnnotationIdleCard.vue","webpack:///./src/components/AnnotationEditingCard.vue?4253","webpack:///src/components/AnnotationEditingCard.vue","webpack:///./src/components/AnnotationEditingCard.vue?946e","webpack:///./src/components/AnnotationEditingCard.vue","webpack:///./src/components/AnnotationFeedbackCard.vue?a06c","webpack:///src/components/AnnotationFeedbackCard.vue","webpack:///./src/components/AnnotationFeedbackCard.vue?3d11","webpack:///./src/components/AnnotationFeedbackCard.vue","webpack:///./src/components/AnnotationImportingCard.vue?784b","webpack:///src/components/AnnotationImportingCard.vue","webpack:///./src/components/AnnotationImportingCard.vue?9b79","webpack:///./src/components/AnnotationImportingCard.vue","webpack:///src/components/AnnotationCard.vue","webpack:///./src/components/AnnotationCard.vue?1ce6","webpack:///./src/components/AnnotationCard.vue?1547","webpack:///./src/components/SessionClassBalance.vue?c270","webpack:///src/components/SessionClassBalance.vue","webpack:///./src/components/SessionClassBalance.vue?7c7f","webpack:///./src/components/SessionClassBalance.vue?e569","webpack:///./src/components/MLPredictionsOverlapTool.vue?f715","webpack:///src/components/MLPredictionsOverlapTool.vue","webpack:///./src/components/MLPredictionsOverlapTool.vue?3787","webpack:///./src/components/MLPredictionsOverlapTool.vue?4f4b","webpack:///src/views/Session.vue","webpack:///./src/views/Session.vue?3cb1","webpack:///./src/views/Session.vue?30d4","webpack:///./src/views/Admin.vue?27a2","webpack:///./src/components/UserEditor.vue?cde6","webpack:///./src/components/VCheckChip.vue?22aa","webpack:///src/components/VCheckChip.vue","webpack:///./src/components/VCheckChip.vue?cf27","webpack:///./src/components/VCheckChip.vue","webpack:///src/components/UserEditor.vue","webpack:///./src/components/UserEditor.vue?a574","webpack:///./src/components/UserEditor.vue?20fd","webpack:///./src/components/ProjectEditor.vue?c08f","webpack:///src/components/ProjectEditor.vue","webpack:///./src/components/ProjectEditor.vue?5bdc","webpack:///./src/components/ProjectEditor.vue?f808","webpack:///./src/components/TaskBatch.vue?405f","webpack:///src/components/TaskBatch.vue","webpack:///./src/components/TaskBatch.vue?cc9c","webpack:///./src/components/TaskBatch.vue","webpack:///src/views/Admin.vue","webpack:///./src/views/Admin.vue?8388","webpack:///./src/views/Admin.vue","webpack:///./src/components/AppBar.vue?f006","webpack:///src/components/AppBar.vue","webpack:///./src/components/AppBar.vue?743d","webpack:///./src/components/AppBar.vue","webpack:///./src/components/AdminAppBar.vue?90ee","webpack:///./src/components/ChangePassword.vue?33c5","webpack:///src/components/ChangePassword.vue","webpack:///./src/components/ChangePassword.vue?8950","webpack:///./src/components/ChangePassword.vue","webpack:///src/components/AdminAppBar.vue","webpack:///./src/components/AdminAppBar.vue?bac6","webpack:///./src/components/AdminAppBar.vue?e721","webpack:///./src/router.js","webpack:///./src/plugins/vuetify.js","webpack:///./src/plugins/axios.js","webpack:///./src/plugins/split.js","webpack:///./src/plugins/toast.js","webpack:///./src/main.js","webpack:///./src/components/AnnotationCard.vue?c64e","webpack:///./src/components/TaskEditor.vue?ad15","webpack:///src/components/TaskEditor.vue","webpack:///./src/components/TaskEditor.vue?ca7c","webpack:///./src/components/TaskEditor.vue?3487","webpack:///./src/components/LoadingContent.vue?b3e8","webpack:///src/components/LoadingContent.vue","webpack:///./src/components/LoadingContent.vue?a9d9","webpack:///./src/components/LoadingContent.vue?b49b","webpack:///./src/components/LoadingContent.vue?4fae","webpack:///./src/components/MLPredictionsOverlapTool.vue?53b3","webpack:///./src/components/WSIViewer.vue?3b72","webpack:///./src/components/TaskEditor.vue?8049"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","lineFunction","point1","point2","point3","line1Slope","y","x","line2Slope","line1B","line2B","slope","b","optimizePath","points","toRemove","lineFunc","distance1","Math","hypot","filter","item","idx","includes","EventManager","this","instance","delegate","refName","events","log","entries","forEach","eventName","callback","registeredCallbacks","annotation","notify","viewport","stateRestorer","args","values","CircleAnnotationTool","drawer","newAnnotation","dragging","setPanningEnabled","func","label","currentLabel","CircleAnnotation","state","geometry","mousePointToImagePoint","position","update","imagePosition","keyCode","updateImageLocation","onFinishNewDrawing","refresh","draw","RulerTool","startingPoint","endingPoint","active","perpendicular","perpendicularLine","ctx","startPoint","imagePointToCanvasPoint","endPoint","distance","ruler","Path2D","moveTo","lineTo","lineWidth","setLineDash","strokeStyle","lineCap","stroke","font","fillStyle","text","pixelWidth","toFixed","fillText","strokeText","PolygonAnnotationTool","info","help","onInfoUpdate","cancel","PolygonAnnotation","StateRestorer","addRestorePoint","PathMeshEditor","originalAnnotation","_","cloneDeep","drawFeedback","controls","control","hasMoved","createControls","mousePosition","areaRadius","currentViewport","bottom","top","canvas","clientWidth","intersectingControl","intersectsControl","point","feedback","getIntersectingControl","intersects","newPointIndex","checkPathCreation","index","isPanningEnabled","RectAnnotation","conclude","left","min","right","max","title","description","onFinishedEditing","updateViewport","beginPath","ellipse","PI","fill","canvasPosition","map","states","currentStatePoint","onStateRestorerEvent","Annotation","id","slideId","slide_id","properties","currentlyImporting","layer","isHovering","imageLocation","Number","MAX_VALUE","hovering","userViewport","offScreen","filtering","notFilteredOut","style","color","opacity","hoverOpacity","fillOpacity","topLeft","bottomRight","imageToCanvas","point0","rect","RectAnnotationTool","temp","horizontalRadius","abs","verticalRadius","radius","radiusX","radiusY","isPointInPath","path","canvasPos","textMetrics","measureText","width","AnnotationDrawer","Viewer","height","getInstance","viewer","getContext","annotationSet","currentlyDrawing","currentTool","elementsOnScreen","isPanningMode","isCurrentlyHoveringAnnotation","isDrawingEnabled","register","editAnnotation","addHandler","throttle","clientHeight","mouseTracking","OpenSeadragon","MouseTracker","element","nonPrimaryReleaseHandler","releaseHandler","isToolUsageEnabled","mouseEvent","pressHandler","clickHandler","onClick","annotationClicked","dblClickHandler","moveHandler","updateRequired","statusUpdateRequired","onHover","onLeave","setHovering","cursor","keyDownHandler","panHorizontal","panVertical","panningMode","keyboardEvent","keyUpHandler","destroy","tools","polygon","circle","tool","annotations","instantiators","isEnabled","viewportMin","windowToImageCoordinates","Point","viewportMax","calculateViewport","onViewportChanged","viewportPoint","pointFromPixel","coordinates","viewportToImageCoordinates","imageToViewerElementCoordinates","annotationWidth","annotationHeight","horizontalCenter","verticalCenter","panTo","imageToViewportCoordinates","tiledImage","world","getItemAt","yZoom","source","dimensions","xZoom","zoom","zoomTo","clearRect","self","shouldBeVisible","showImporting","loadAnnotations","rawAnnotations","drawerInstance","slideAnnotations","_vm","_h","$createElement","_c","_self","attrs","staticRenderFns","components","component","VApp","VMain","Vue","use","Vuex","Store","session","user","token","mutations","set_session","login","login_data","logout","actions","loading","tasks","projects","staticClass","_v","model","$$v","annotationProjectFilter","expression","_l","project","_s","_e","annotation_status","on","startTask","review_status","annotationHeaders","annotationTaskFilter","annotationTaskFiltering","scopedSlots","_u","fn","showFileNames","proxy","ref","slide","staticStyle","slides","completed","$event","review","review_headers","task","revision","app","_t","status","next","taskCompleted","total","done","progress","startSession","methods","$emit","computed","props","VBtn","VCard","VCardActions","VCardText","VDivider","VIcon","VProgressLinear","Loading","TaskStatusOverview","items","$post","loadTasks","$get","search","Array","isArray","mounted","VCardTitle","VCheckbox","VChip","VChipGroup","VCol","VContainer","VDataTable","VRow","VScaleTransition","VSimpleCheckbox","VTextField","task_type","taskBelongsToUser","tile_sources","project_labels","labelsVisible","drawingStyle","draw_events","currentSlide","regionClicked","onNewRegionDraw","onEditRegionDraw","$set","selectedTab","session_id","genColor","labelAnnotationsVisibility","highlightOnTab","domProps","comment","revisingUserTask","dismissAll","importAll","importAnnotations","onClearOverlayAnnotations","onOverlayAnnotations","onOverlayStyleChanged","annotationsLister","concludeEdit","editRegion","cancelEdit","annotationFeedback","dismissAnnotation","annotationPeep","annotationUpdate","annotationsListStart","totalPages","_g","_b","selectedLabel","annotationDrawer","editing","max_undo","viewportLocation","pixel_density","pixelDensity","bar_size","watch","immediate","handler","updateRuler","getElementById","onwheel","$store","slideProperties","newValue","labels","newLabels","labelsVisibility","deep","newVisibility","no_model_action","newZoom","newStyle","restoreToPoint","tileSources","open","pixel_width","loadOverlayAnnotations","overlayAnnotations","clearOverlayAnnotations","editElement","peepAnnotation","peep","$nextTick","showNavigator","navigatorPosition","navigatorRight","navigatorBottom","navigatorHeight","navigatorWidth","showNavigationControl","gestureSettingsMouse","clickToZoom","delegateCallback","onEditingEvent","changed","Boolean","default","drawEvents","VAvatar","VList","VListItem","VListItemAvatar","VListItemContent","VListItemTitle","VMenu","VSlider","shown","setBorderWidth","setEvents","resize","body","el","drawerBorder","addEventListener","VNavigationDrawer","updateRender","saveAnnotation","importAnnotation","labelColor","cardTitle","editProperties","updating_label","VSpacer","stopPropagation","saveRegion","newLabel","projectLabels","newLabelId","feedbackLabelId","feedbackLabel","saveFeedback","undoing","feedbackCorrect","label_id","oldState","newState","updatingLabel","newFeedbackLabelId","incorrectOptions","currentFeedback","region","feedbackWrongLabel","feedbackWrongRegion","preventDefault","arguments","AnnotationFeedbackCard","AnnotationEditingCard","AnnotationImportingCard","AnnotationIdleCard","originalLabel","undo","drawing_swapped","swapDrawings","undoing_feedback","originalRegion","stats","class","stat","switchMode","keys","statPerc","slideOnly","sessionId","VSwitch","usedBefore","clearOverlay","selectFile","input","onchange","reader","readAsText","files","click","annotationImportingEnabled","annotationTabVisible","$route","params","revisions","revisionMeta","revisionData","selected","owner","page","calculatePagination","pageMax","remaining","newRevisionUserTask","confirmingImportAnnotations","onRegionHover","onRegionLeave","$refs","slice_viewer","newAnnotations","floor","totalAnnotation","scrollIntoView","behavior","block","classList","add","remove","pageChanged","attempted","short","navigateAnnotationPage","newPage","MLPredictionsOverlapTool","SessionClassBalance","AnnotationCard","SideWindow","SliceViewer","VFlex","VLayout","VListItemGroup","VListItemSubtitle","VPagination","VRadio","VRadioGroup","VTab","VTabItem","VTabs","VTabsItems","VToolbar","VToolbarTitle","tasksHeader","taskFilter","openTask","user_task","editTask","removeTask","newTask","newBatch","config","user_headers","users","editUser","removeUser","newUser","project_header","showLabelData","editProject","newProject","save","path_errors","check_path","header","gen_color","change_color","color_menu","color_picked","closeColorPicker","remove_label","add_label","new_label","editing_label","new_value","rgba","g","itemName","alert","VColorPicker","VEditDialog","VTextarea","folders","project_id","new","totalIntersection","load_folders","assigned","concurrent","only_new","group_slides","load_projects","load_users","VSelect","VTreeview","TaskBatch","TaskEditor","ProjectEditor","UserEditor","align","sortable","which","loadUsers","loadProjects","username","is_admin","manages_apps","manages_users","manages_tasks","manages_projects","can_export","access_overview","is_editing","confirm","folder","navigator","clipboard","writeText","VExpansionPanel","VExpansionPanelContent","VExpansionPanelHeader","VExpansionPanels","VTooltip","$router","go","VAppBar","VImg","user_name","changePassword","password","close","submit","VDialog","manage_apps","commit","Router","newRouter","routes","Tasks","app_bar","AdminAppBar","meta","auth","Session","AppBar","Admin","beforeEach","to","from","matched","some","record","store","nextUrl","fullPath","Vuetify","theme","icons","iconfont","themes","light","primary","colors","blueGrey","darken3","secondary","grey","darken1","accent","orange","accent4","red","accent3","dark","blue","lighten3","VueAxios","axios","baseURL","process","interceptors","beforeRequest","axiosInstance","headers","Authorization","beforeResponse","beforeResponseError","statusCode","VueSplit","options","POSITION","BOTTOM_LEFT","Toast","productionTip","router","vuetify","split","toast","render","h","App","$mount","isAppContext","taskType","selection","reviewTaskList","created","inputValue","review_task","task_id","user_tasks","taskLabel","apps","newProjectId","loadReviewTasks","loadFiles","currentUser","loadApps","projectId","VListItemAction","VListItemActionText","VScrollXTransition","VFadeTransition","VProgressCircular"],"mappings":"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","file":"static/js/app.ece62a6f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"static/js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-3ea9ad1b\":\"78d679e8\",\"chunk-47ab8f2f\":\"eb053ffe\",\"chunk-4e90b011\":\"f8e6fc67\",\"chunk-81d5d9f4\":\"fb6c8fcb\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-3ea9ad1b\":1,\"chunk-47ab8f2f\":1,\"chunk-4e90b011\":1,\"chunk-81d5d9f4\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"static/css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-3ea9ad1b\":\"69f3eaeb\",\"chunk-47ab8f2f\":\"fea34622\",\"chunk-4e90b011\":\"95d28b00\",\"chunk-81d5d9f4\":\"76a811a3\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectEditor.vue?vue&type=style&index=0&id=1aa8f24e&scoped=true&lang=css&\"","/* eslint-disable prefer-destructuring */\nimport OpenSeadragon from 'openseadragon';\nimport _ from 'lodash';\n\nfunction lineFunction(point1, point2, point3) {\n  const line1Slope = (point2.y - point1.y) / (point2.x - point1.x);\n  const line2Slope = (point3.y - point2.y) / (point3.x - point2.x);\n  const line1B = point1.x * line1Slope - point1.y;\n  const line2B = point3.x * line2Slope - point3.y;\n  return [\n    {\n      slope: line1Slope,\n      b: line1B,\n    },\n    {\n      slope: line2Slope,\n      b: line2B,\n    },\n  ];\n}\n\n/**\n * A simple algorithm to detect and remove redundant points made in free draw.\n * It returns an array of points without the points that don't contribute to the shape.\n *\n * @param points the array of points\n * @returns {*}\n */\nfunction optimizePath(points) {\n  let toRemove = [];\n  do {\n    toRemove = [];\n    for (let i = 1; i < points.length - 1; i += 1) {\n      const point1 = points[i - 1];\n      const point2 = points[i];\n      const point3 = points[i + 1];\n      const lineFunc = lineFunction(point1, point2, point3);\n      if (lineFunc[0].slope === lineFunc[1].slope && lineFunc[0].b === lineFunc[1].b) {\n        toRemove.push(i);\n      }\n    }\n\n    for (let i = 1; i < points.length; i += 1) {\n      const point1 = points[i - 1];\n      const point2 = points[i];\n      const distance1 = Math.hypot(point1.x - point2.x, point1.y - point2.y);\n      if (distance1 < 5) {\n        toRemove.push(i);\n      }\n    }\n\n    points = points.filter((item, idx) => !toRemove.includes(idx));\n  } while (toRemove.length !== 0);\n  return points;\n}\n\nclass EventManager {\n  constructor() {\n    this.instance = null;\n    this.delegate = {};\n  }\n\n  static getInstance() {\n    if (EventManager.instance == null) {\n      EventManager.instance = new EventManager();\n    }\n    return EventManager.instance;\n  }\n\n  register(refName, events) {\n    console.log(events);\n    Object.entries(events)\n      .forEach(([eventName, callback]) => {\n        console.log(eventName, callback);\n        if (!(eventName in this.delegate)) {\n          this.delegate[eventName] = {};\n        }\n        this.delegate[eventName][refName] = callback;\n      });\n  }\n\n  unregister(name) {\n    Object.entries(this.delegate)\n      .forEach((eventName, registeredCallbacks) => {\n        if (name in registeredCallbacks) {\n          delete registeredCallbacks[name];\n        }\n      });\n  }\n\n  annotationHover(annotation) {\n    this.notify('annotationHover', annotation);\n  }\n\n  annotationLeave(annotation) {\n    this.notify('annotationLeave', annotation);\n  }\n\n  annotationClicked(annotation) {\n    this.notify('annotationClicked', annotation);\n  }\n\n  viewportChanged(viewport) {\n    this.notify('viewportChanged', viewport);\n  }\n\n  createNewAnnotation(annotation) {\n    this.notify('newAnnotation', annotation);\n  }\n\n  savingNewAnnotation(annotation) {\n    this.notify('savingNewAnnotation', annotation);\n  }\n\n  savingAnnotationEdit(annotation) {\n    this.notify('savingAnnotationEdit', annotation);\n  }\n\n  stateRestorerEvent(stateRestorer) {\n    this.notify('stateRestorerEvent', stateRestorer);\n  }\n\n  peepAnnotation(annotation) {\n    this.notify('peepAnnotation', annotation);\n  }\n\n  editAnnotation(annotation) {\n    this.notify('editAnnotation', annotation);\n  }\n\n  notify(event, args) {\n    if (event in this.delegate) {\n      Object.values(this.delegate[event])\n        .forEach((callback) => {\n          callback(args);\n        });\n    }\n  }\n}\n\nclass CircleAnnotationTool {\n  constructor(drawer) {\n    this.name = 'circle';\n    this.drawer = drawer;\n    this.newAnnotation = null;\n    this.dragging = false;\n    this.drawer.setPanningEnabled(false);\n  }\n\n  mouseEvent(func, e) {\n    const drawer = this.drawer;\n    switch (func) {\n      case 'press':\n        if (this.dragging === false) {\n          const label = this.drawer.currentLabel;\n          this.newAnnotation = new CircleAnnotation(this.drawer, {\n            state: 'creating',\n            geometry: {\n              type: 'circle',\n              points: [\n                this.drawer.mousePointToImagePoint(e.position),\n                this.drawer.mousePointToImagePoint(e.position),\n              ],\n            },\n            label,\n          });\n\n          this.dragging = true;\n          this.drawer.update();\n        }\n        break;\n      case 'move':\n        if (this.newAnnotation != null && this.dragging) {\n          const imagePosition = drawer.mousePointToImagePoint(e.position);\n          this.newAnnotation.geometry.points[1].x = imagePosition.x;// -this.geometry.points[0].x\n          this.newAnnotation.geometry.points[1].y = imagePosition.y; // - this.geometry.points[0].y\n          drawer.update();\n        }\n\n        break;\n      case 'release':\n        this.dragging = false;\n        break;\n      default:\n        break;\n    }\n  }\n\n  keyboardEvent(func, e) {\n    switch (func) {\n      case 'keyUp':\n        if (e.keyCode === 13) {\n          this.newAnnotation.state = 'idle';\n          this.newAnnotation.updateImageLocation();\n          this.drawer.callback.onFinishNewDrawing(this.newAnnotation);\n          this.newAnnotation = null;\n          this.drawer.refresh();\n        } else if (e.keyCode === 27) {\n          // pressed ESC\n          this.newAnnotation = null;\n          this.drawer.refresh();\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  destroy() {\n    this.newAnnotation = null;\n    this.drawer.setPanningEnabled(true);\n  }\n\n  draw() {\n    if (this.newAnnotation != null) {\n      this.newAnnotation.draw();\n    }\n  }\n}\n\nclass RulerTool {\n  constructor(drawer) {\n    this.drawer = drawer;\n    this.name = 'ruler';\n    this.startingPoint = null;\n    this.endingPoint = null;\n    this.active = false;\n    this.perpendicular = 0;\n  }\n\n  perpendicularLine(point1, point2) {\n    const line1Slope = (point2.y - point1.y) / (point2.x - point1.x);\n    const line1B = point1.x * line1Slope - point1.y;\n    return {\n      slope: -1 / line1Slope,\n      b: -1 / line1B,\n    };\n  }\n\n  mouseEvent(func, e) {\n    const drawer = this.drawer;\n    switch (func) {\n      case 'dblClick':\n        if (!this.active && this.startingPoint != null && this.endingPoint != null) {\n          this.active = false;\n          this.startingPoint = null;\n          this.endingPoint = null;\n        } else if (this.startingPoint == null) {\n          this.startingPoint = this.drawer.mousePointToImagePoint(e.position);\n          this.active = true;\n        } else {\n          this.endingPoint = this.drawer.mousePointToImagePoint(e.position);\n          this.perpendicular = this.perpendicularLine(this.startingPoint, this.endingPoint);\n          this.active = false;\n        }\n        drawer.refresh();\n        break;\n      case 'move':\n        if (this.active) {\n          this.endingPoint = this.drawer.mousePointToImagePoint(e.position);\n          this.perpendicular = this.perpendicularLine(this.startingPoint, this.endingPoint);\n          drawer.refresh();\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  keyboardEvent(func, e) {\n    if (func === 'keyUp' && e.keyCode === 27) {\n      this.active = false;\n      this.startingPoint = null;\n      this.endingPoint = null;\n      this.drawer.refresh();\n    }\n  }\n\n  destroy() {\n  }\n\n  draw() {\n    const ctx = this.drawer.ctx;\n    if (this.startingPoint != null && this.endingPoint != null) {\n      const drawer = this.drawer;\n      const startPoint = drawer.imagePointToCanvasPoint(this.startingPoint.x, this.startingPoint.y);\n      const endPoint = drawer.imagePointToCanvasPoint(this.endingPoint.x, this.endingPoint.y);\n      const distance = Math.hypot(\n        this.startingPoint.x - this.endingPoint.x,\n        this.startingPoint.y - this.endingPoint.y,\n      );\n      // const perpendicular = this.perpendicularLine(startPoint, endPoint)\n      const ruler = new Path2D();\n      ruler.moveTo(startPoint.x, startPoint.y);\n      ruler.lineTo(endPoint.x, endPoint.y);\n\n      ctx.lineWidth = 3;\n      ctx.setLineDash([5, 5]);\n      ctx.strokeStyle = 'black';\n      ctx.lineCap = 'round';\n      ctx.stroke(ruler);\n      ctx.setLineDash([]);\n      ctx.lineWidth = 1;\n      ctx.strokeStyle = 'white';\n      ctx.font = '30px Arial';\n      ctx.fillStyle = 'black';\n      const text = `${(distance * this.drawer.pixelWidth).toFixed(2)}µm`;\n      ctx.fillText(\n        text,\n        30 + startPoint.x + ((endPoint.x - startPoint.x) / 2),\n        startPoint.y + ((endPoint.y - startPoint.y) / 2),\n      );\n      ctx.strokeText(\n        text,\n        30 + startPoint.x + ((endPoint.x - startPoint.x) / 2),\n        startPoint.y + ((endPoint.y - startPoint.y) / 2),\n      );\n    }\n  }\n}\n\nclass PolygonAnnotationTool {\n  constructor(drawer) {\n    this.name = 'polygon';\n    this.drawer = drawer;\n    this.newAnnotation = null;\n    this.dragging = false;\n\n    drawer.setPanningEnabled(false);\n    this.info('start', 'pan');\n  }\n\n  info(...help) {\n    const info = [];\n    if (help.includes('pan')) {\n      info.push('[Space] To drag the image');\n    }\n    if (help.includes('start')) {\n      info.push('[Click] To start drawing');\n    }\n    if (help.includes('save')) {\n      info.push('[Enter] To save annotation');\n    }\n    if (help.includes('continue')) {\n      info.push('[Click] To continue drawing');\n    }\n    if (help.includes('cancel')) {\n      info.push('[Esc] To cancel');\n    }\n    this.drawer.callback.onInfoUpdate(info);\n  }\n\n  destroy() {\n    this.drawer.setPanningEnabled(true);\n    this.stateRestorer.cancel();\n    this.newAnnotation = null;\n  }\n\n  mouseEvent(func, e) {\n    const imagePosition = this.drawer.mousePointToImagePoint(e.position);\n    switch (func) {\n      case 'press':\n        this.dragging = true;\n        if (this.newAnnotation == null) {\n          const label = this.drawer.currentLabel;\n          this.newAnnotation = new PolygonAnnotation(this.drawer, {\n            state: 'creating',\n            geometry: {\n              type: 'polygon',\n              points: [imagePosition, {\n                x: imagePosition.x,\n                y: imagePosition.y,\n              }],\n            },\n            label,\n          });\n          this.stateRestorer = new StateRestorer(this.drawer, this.newAnnotation);\n        } else {\n          this.newAnnotation.geometry.points.push(imagePosition);\n          this.stateRestorer.addRestorePoint('Added point');\n        }\n        this.drawer.refresh();\n        break;\n      case 'move':\n        if (this.dragging && this.newAnnotation != null) {\n          this.newAnnotation.geometry.points.push(imagePosition);\n          this.stateRestorer.addRestorePoint('Added point');\n          this.drawer.refresh();\n        }\n        break;\n      case 'release':\n        this.dragging = false;\n        this.info('continue', 'pan', 'save', 'cancel');\n        break;\n      default:\n        break;\n    }\n  }\n\n  keyboardEvent(func, e) {\n    if (func === 'keyUp') {\n      if (e.keyCode === 13) {\n        // User pressed ENTER\n        if (this.newAnnotation != null) {\n          this.newAnnotation.state = 'idle';\n          this.newAnnotation.geometry.points = optimizePath(this.newAnnotation.geometry.points);\n          this.newAnnotation.update();\n          this.drawer.callback.onFinishNewDrawing(this.newAnnotation);\n          this.newAnnotation = null;\n          this.drawer.update();\n        }\n      } else if (e.keyCode === 27) {\n        // User pressed ESC\n        this.newAnnotation = null;\n        this.drawer.refresh();\n        this.stateRestorer.cancel();\n      }\n    }\n  }\n\n  draw() {\n    if (this.newAnnotation != null) {\n      this.newAnnotation.draw();\n    }\n  }\n\n  // keyboardEvent: freeDrawingDefaultKeyboardBehavior;\n}\n\nclass PathMeshEditor {\n  constructor(annotation, drawer) {\n    this.drawer = drawer;\n    this.annotation = annotation;\n    this.originalAnnotation = _.cloneDeep(annotation);\n    if (this.annotation.state === 'feedback') {\n      this.annotation.state = 'feedback-editing';\n      this.annotation.drawFeedback = true;\n    } else {\n      this.annotation.state = 'editing';\n    }\n    this.controls = [];\n    this.control = null;\n    this.mode = null;\n    this.dragging = false;\n    this.hasMoved = false;\n    this.createControls();\n    // this.create_mode(mode);\n  }\n\n  intersectsControl(mousePosition, position) {\n    const drawer = this.drawer;\n    const areaRadius = ((drawer.currentViewport.bottom - drawer.currentViewport.top)\n      / drawer.canvas.clientWidth) * 25;\n    return mousePosition.x > position.x - areaRadius && mousePosition.x < position.x + areaRadius\n      && mousePosition.y > position.y - areaRadius && mousePosition.y < position.y + areaRadius;\n  }\n\n  getIntersectingControl(position) {\n    let intersectingControl = null;\n    this.controls.forEach((control) => {\n      if (this.intersectsControl(position, control.point)) {\n        intersectingControl = control;\n      }\n    });\n    return intersectingControl;\n  }\n\n  mouseEvent(func, e) {\n    if (this.annotation == null) return;\n    const points = this.annotation.state === 'feedback-editing'\n      ? this.annotation.feedback.geometry : this.annotation.geometry.points;\n    if (func === 'press') {\n      this.hasMoved = false;\n      this.drawer.setPanningEnabled(false);\n      this.dragging = true;\n      this.control = this.getIntersectingControl(this.drawer.mousePointToImagePoint(e.position));\n      if (this.control == null) {\n        // check if clicked on edge\n        // Intersects no control, which means that if it intersects the item,\n        // we should add a new node\n        if (this.annotation instanceof PolygonAnnotation) {\n          // it only makes sense to edit polygons; in the future we could change items to polygon\n          if (this.annotation.intersects(e.position)) {\n            const imagePosition = this.drawer.mousePointToImagePoint(e.position);\n            // We will create a new point\n            const newPointIndex = this.checkPathCreation(imagePosition);\n            if (newPointIndex != null) {\n              // We are ready to add a new point on the index of interest\n              points.splice(newPointIndex, 0, imagePosition);\n              this.createControls();\n              this.control = this.controls[newPointIndex];\n              this.drawer.refresh();\n            }\n          }\n        }\n      }\n    } else if (func === 'release') {\n      if (this.hasMoved === false) {\n        // True click, as no movement was done between press and release\n        if (this.control != null) {\n          // Clicking on a control removes it\n          points.splice(this.control.index, 1);\n          this.createControls();\n          this.annotation.update();\n          this.drawer.refresh();\n        }\n      }\n      this.dragging = false;\n      this.control = null;\n      // if the panning is disabled, we will enable on release:\n      if (!this.drawer.isPanningEnabled) {\n        this.drawer.setPanningEnabled(true);\n      }\n    } else if (func === 'move') {\n      this.hasMoved = true;\n      if (this.dragging && this.control != null) {\n        const mousePosition = this.drawer.mousePointToImagePoint(e.position);\n        this.control.point.x = mousePosition.x;\n        this.control.point.y = mousePosition.y;\n        if (this.annotation instanceof RectAnnotation) {\n          this.annotation.updateImageLocation();\n        }\n        this.drawer.update();\n      }\n    }\n  }\n\n  keyboardEvent(func, e) {\n    if (func === 'keyUp') {\n      if (e.keyCode === 27) {\n        // User pressed ESC. The edition is cancelled and the shape must be restored\n        this.cancel();\n      } else if (e.keyCode === 13) {\n        // Notify the editing has ended with changes\n        this.conclude();\n      }\n    }\n  }\n\n  checkPathCreation(position) {\n    const { points } = this.annotation.geometry;\n    for (let i = 1; i < points.length; i += 1) {\n      const point1 = points[i - 1];\n      const point2 = points[i];\n      const left = Math.min(point1.x, point2.x) - 10;\n      const right = Math.max(point1.x, point2.x) + 10;\n      const top = Math.min(point1.y, point2.y) - 10;\n      const bottom = Math.max(point1.y, point2.y) + 10;\n\n      if (left < position.x && position.x < right\n        && top < position.y && position.y < bottom) {\n        return i;\n      }\n    }\n    return null;\n  }\n\n  cancel() {\n    const drawer = this.drawer;\n    if (this.annotation.state === 'editing') {\n      this.annotation.state = 'idle';\n      this.annotation.geometry = this.originalAnnotation.geometry;\n      this.annotation.label = this.originalAnnotation.label;\n    } else {\n      this.annotation.state = 'feedback';\n      this.annotation.feedback.geometry = this.originalAnnotation.geometry.points;\n    }\n    this.annotation.title = this.originalAnnotation.title;\n    this.annotation.description = this.originalAnnotation.description;\n    // this.geometry.points = this.original_points;\n    // this.geometry.color = this.original_color;\n\n    // Notify the editing has ended without changes\n    drawer.callback.onFinishedEditing(false, this.annotation);\n    this.annotation = null;\n\n    drawer.update();\n    this.controls = [];\n  }\n\n  conclude() {\n    if (this.annotation.state === 'editing') {\n      this.annotation.state = 'idle';\n    } else {\n      this.annotation.state = 'feedback';\n    }\n    this.annotation.updateViewport();\n    this.controls = [];\n    this.drawer.callback.onFinishedEditing(true, this.annotation);\n    this.drawer.update();\n    this.annotation = null;\n  }\n\n  destroy() {\n    if (this.annotation != null && this.annotation.state !== 'idle' && this.annotation.state !== 'feedback') {\n      this.cancel();\n    }\n    this.drawer.update();\n  }\n\n  draw() {\n    this.drawer.ctx.lineWidth = 1;\n    // We will draw the controls we have:\n    this.controls.forEach((control) => {\n      this.drawer.ctx.beginPath();\n      const position = this.drawer.imagePointToCanvasPoint(control.point.x, control.point.y);\n      this.drawer.ctx.ellipse(position.x, position.y, 5, 5, 0, 2 * Math.PI, 0, false);\n\n      this.drawer.ctx.setLineDash([]);\n      this.drawer.ctx.fillStyle = 'rgb(255,255,255)';\n      this.drawer.ctx.fill();\n      this.drawer.ctx.strokeStyle = 'black';\n      this.drawer.ctx.stroke();\n      control.canvasPosition = position;\n    });\n\n    // this.annotation.draw();\n  }\n\n  createControls() {\n    // When creating controls, we will differentiate the annotation state:\n    if (this.annotation.state === 'feedback-editing') {\n      // On feedback annotations, we will edit the feedback geometry instead of the original's\n      if (this.annotation.feedback.geometry == null) {\n        // There is no feedback data currently, we will instantiate based on the original\n        this.annotation.feedback.geometry = this.annotation.geometry.points.map((point) => ({\n          x: point.x,\n          y: point.y,\n        }));\n      }\n      // Not we will create the points based on the feedback data\n      this.controls = this.annotation.feedback.geometry.map((point, index) => ({\n        canvasPosition: null,\n        index,\n        point,\n      }));\n    } else {\n      // This is a normal edit operation, we will interact with the original geometry\n      this.controls = this.annotation.geometry.points.map((point, index) => ({\n        canvasPosition: null,\n        index,\n        point,\n      }));\n    }\n  }\n}\n\nclass StateRestorer {\n  constructor(instance, annotation) {\n    this.instance = instance;\n    this.annotation = annotation;\n    this.states = [];\n    this.currentStatePoint = 0;\n    this.instance.callback.onStateRestorerEvent(this);\n  }\n\n  addRestorePoint(event) {\n    if (this.states.length > 0 && this.currentStatePoint !== this.states.length - 1) {\n      // We are overriding the past, we will clear the states\n      this.states.splice(this.currentStatePoint, this.states.length - this.currentStatePoint);\n    }\n    this.states.push({\n      type: event,\n      points: this.annotation.geometry.points.map((item) => ({\n        x: item.x,\n        y: item.y,\n      })),\n    });\n    this.currentStatePoint = this.states.length - 1;\n    this.instance.callback.onStateRestorerEvent(this);\n  }\n\n  restoreToPoint(value) {\n    this.annotation.geometry.points = this.states[value].points;\n    this.instance.update();\n    this.currentStatePoint = value;\n    this.instance.callback.onStateRestorerEvent(this);\n  }\n\n  cancel() {\n    this.instance.stateRestorer = null;\n    this.states = null;\n    this.instance.callback.onStateRestorerEvent(null);\n  }\n}\n\nclass Annotation {\n  constructor(drawer, annotation) {\n    this.drawer = drawer;\n\n    // Annotation data:\n    this.id = annotation.id;\n    this.geometry = annotation.geometry;\n    this.label = annotation.label;\n    this.slideId = annotation.slide_id;\n    this.title = annotation.title == null ? null : annotation.title;\n    this.description = annotation.description == null ? null : annotation.description;\n    this.properties = annotation.properties == null ? null : annotation.properties;\n    this.currentlyImporting = false;\n    this.layer = annotation.layer == null ? 0 : annotation.layer;\n    this.feedback = null;\n    this.drawFeedback = false;\n\n    // Feedback data:\n    if (annotation.feedback != null) {\n      this.feedback = annotation.feedback;\n      this.state = 'feedback';\n    } else {\n      this.state = annotation.state == null ? 'idle' : annotation.state;\n    }\n\n    // Annotation meta data:\n    this.isHovering = false;\n    this.currentViewport = {\n      top: 0,\n      left: 0,\n      bottom: 0,\n      right: 0,\n    };\n    this.imageLocation = {\n      top: Number.MAX_VALUE, // assuming higher value to calculate actual value\n      left: Number.MAX_VALUE, // assuming higher value to calculate actual value\n      bottom: 0,\n      right: 0,\n    };\n  }\n\n  setHovering(hovering) {\n    this.isHovering = hovering;\n  }\n\n  /**\n   * Checks if the user should be able to see this elements from its viewport AND\n   * it isn't filtered out.\n   *\n   * @param userViewport the user's viewport\n   * @returns {boolean} true if this element should be visible\n   */\n  shouldBeVisible(userViewport) {\n    const offScreen = this.imageLocation.bottom < userViewport.top\n      || this.imageLocation.right < userViewport.left\n      || this.imageLocation.left > userViewport.right\n      || this.imageLocation.top > userViewport.bottom;\n    const { filtering } = this.drawer;\n    const notFilteredOut = filtering[this.label.name] || this.state === 'importing' || this.state === 'overlay';\n    return !offScreen && notFilteredOut;\n  }\n\n  /**\n   * Checks if the current annotation intersects with the reference position\n   * @param position the position being checked\n   * @returns {boolean} true if intersects\n   */\n  // eslint-disable-next-line no-unused-vars,class-methods-use-this\n  intersects(position) {\n  }\n\n  serialize() {\n    const {\n      geometry,\n      label,\n      slideId,\n      title,\n      description,\n      properties,\n      feedback,\n      id,\n    } = this;\n    return {\n      geometry,\n      label,\n      id,\n      feedback,\n      properties,\n      slide_id: slideId,\n      title,\n      description,\n    };\n  }\n\n  // setSlideId(slideId) {\n  //   this.slideId = slideId;\n  // }\n\n  getColor() {\n    const style = this.drawer.style[this.layer];\n    const { color } = this.label;\n    return {\n      color: `${color[0]},${color[1]},${color[2]}`,\n      opacity: this.isHovering ? style.hoverOpacity : style.fillOpacity,\n    };\n  }\n\n  update() {\n  }\n\n  updateViewport() {\n    const topLeft = this.drawer\n      .imagePointToCanvasPoint(this.imageLocation.left, this.imageLocation.top);\n    const bottomRight = this.drawer\n      .imagePointToCanvasPoint(this.imageLocation.right, this.imageLocation.bottom);\n    this.currentViewport.left = topLeft.x;\n    this.currentViewport.top = topLeft.y;\n    this.currentViewport.bottom = bottomRight.y;\n    this.currentViewport.right = bottomRight.x;\n  }\n\n  draw() {\n    throw Error('Failed to implement Annotation.draw()');\n  }\n}\n\nclass RectAnnotation extends Annotation {\n  constructor(drawer, annotation) {\n    super(drawer, annotation);\n\n    this.updateImageLocation();\n  }\n\n  updateImageLocation() {\n    const { points } = this.geometry;\n    this.imageLocation.top = points[0].y;\n    this.imageLocation.left = points[0].x;\n    this.imageLocation.right = points[1].x;\n    this.imageLocation.bottom = points[1].y;\n  }\n\n  intersects(position) {\n    return position.y > this.currentViewport.top && position.y < this.currentViewport.bottom\n      && position.x > this.currentViewport.left && position.x < this.currentViewport.right;\n  }\n\n  draw() {\n    const {\n      color,\n      opacity,\n    } = super.getColor();\n    const ctx = this.drawer.ctx;\n    const style = this.drawer.style[this.layer];\n    const imageToCanvas = this.drawer.imagePointToCanvasPoint.bind(this.drawer);\n    const points = !this.drawFeedback ? this.geometry.points : this.feedback.geometry;\n    // shaping:\n    const point0 = imageToCanvas(points[0].x, points[0].y);\n    const point1 = imageToCanvas(points[1].x, points[1].y);\n    ctx.beginPath();\n    ctx.rect(\n      point0.x,\n      point0.y,\n      point1.x - point0.x,\n      point1.y - point0.y,\n    );\n\n    // stylizing:\n    if (this.drawFeedback) {\n      ctx.setLineDash([2, 2]);\n      ctx.font = '18px Arial';\n      ctx.fillStyle = 'black';\n      ctx.fillText('Feedback version', point0.x, point0.y);\n    } else if (this.state === 'editing' || this.state === 'feedback-editing') {\n      ctx.setLineDash([10, 5]);\n      ctx.lineWidth = style.lineWidth + 2;\n      ctx.font = '30px Arial';\n      if (this.state === 'creating') {\n        ctx.fillText('Preview, press ENTER to save', point0.x, point0.y);\n      }\n    } else if (this.state === 'idle') {\n      ctx.setLineDash([]);\n      ctx.lineWidth = style.lineWidth;\n    }\n    ctx.fillStyle = `rgba(${color}, ${opacity})`;\n    ctx.strokeStyle = `rgb(${color})`;\n\n    // drawing:\n    ctx.fill();\n    ctx.stroke();\n  }\n}\n\nclass RectAnnotationTool {\n  constructor(drawer) {\n    this.name = 'rect';\n    this.drawer = drawer;\n    this.newAnnotation = null;\n    this.dragging = false;\n\n    this.drawer.setPanningEnabled(false);\n\n    this.info('start');\n  }\n\n  destroy() {\n    this.newAnnotation = null;\n    this.drawer.setPanningEnabled(true);\n  }\n\n  info(...help) {\n    const info = [];\n    if (help.includes('start')) {\n      info.push('[db-Click] To start rect');\n    }\n    if (help.includes('save')) {\n      info.push('[db-Click] To finish and save');\n    }\n    if (help.includes('cancel')) {\n      info.push('[Esc] To cancel');\n    }\n    this.drawer.callback.onInfoUpdate(info);\n  }\n\n  mouseEvent(func, e) {\n    const imagePosition = this.drawer.mousePointToImagePoint(e.position);\n\n    switch (func) {\n      case 'press':\n        if (this.dragging === false) {\n          const label = this.drawer.currentLabel;\n          this.newAnnotation = new RectAnnotation(this.drawer, {\n            state: 'creating',\n            geometry: {\n              type: 'rect',\n              points: [\n                this.drawer.mousePointToImagePoint(e.position),\n                this.drawer.mousePointToImagePoint(e.position),\n              ],\n            },\n            label,\n          });\n          this.info('save', 'cancel');\n          this.dragging = true;\n        } else {\n          this.info('start');\n        }\n        this.drawer.refresh();\n        break;\n      case 'move':\n        if (this.newAnnotation != null && this.dragging) {\n          this.newAnnotation.geometry.points[1] = imagePosition;\n          this.drawer.refresh();\n        }\n        break;\n      case 'release':\n        this.dragging = false;\n        break;\n      default:\n        break;\n    }\n  }\n\n  keyboardEvent(func, e) {\n    const drawer = this.drawer;\n    switch (func) {\n      case 'keyUp':\n        if (e.keyCode === 27) {\n          // User pressed ESC, we will cancel the drawing\n          this.newAnnotation = null;\n          drawer.update();\n          this.info('start');\n          drawer.setPanningEnabled(false);\n        } else if (e.keyCode === 13) {\n          // User pressed enter, we will complete the drawing\n\n          if (this.newAnnotation != null) {\n            if (this.newAnnotation.geometry.points[0].x\n              > this.newAnnotation.geometry.points[1].x) {\n              const temp = this.newAnnotation.geometry.points[0].x;\n              this.newAnnotation.geometry.points[0].x = this.newAnnotation.geometry.points[1].x;\n              this.newAnnotation.geometry.points[1].x = temp;\n            }\n            if (this.newAnnotation.geometry.points[0].y\n              > this.newAnnotation.geometry.points[1].y) {\n              const temp = this.newAnnotation.geometry.points[0].y;\n              this.newAnnotation.geometry.points[0].y = this.newAnnotation.geometry.points[1].y;\n              this.newAnnotation.geometry.points[1].y = temp;\n            }\n          }\n\n          this.newAnnotation.state = 'idle';\n          this.newAnnotation.updateImageLocation();\n          drawer.update();\n          drawer.callback.onFinishNewDrawing(this.newAnnotation);\n          this.newAnnotation = null;\n          // todo drawer.stateRestorer.cancel();\n          this.info('start');\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  draw() {\n    if (this.newAnnotation != null) {\n      this.newAnnotation.draw();\n    }\n  }\n}\n\nclass CircleAnnotation extends Annotation {\n  constructor(drawer, annotation) {\n    super(drawer, annotation);\n    this.updateImageLocation();\n  }\n\n  updateImageLocation() {\n    const { points } = this.geometry;\n    const horizontalRadius = Math.abs(points[0].x - points[1].x);\n    const verticalRadius = Math.abs(points[0].y - points[1].y);\n    this.imageLocation.left = points[0].x - horizontalRadius;\n    this.imageLocation.right = points[0].x + horizontalRadius;\n    this.imageLocation.top = points[0].y - verticalRadius;\n    this.imageLocation.bottom = points[0].y + verticalRadius;\n  }\n\n  intersects(position) {\n    return position.y > this.currentViewport.top && position.y < this.currentViewport.bottom\n      && position.x > this.currentViewport.left && position.x < this.currentViewport.right;\n  }\n\n  draw() {\n    const {\n      color,\n      opacity,\n    } = super.getColor();\n    const style = this.drawer.style[this.layer];\n    const { points } = this.geometry;\n\n    const position = this.drawer.imagePointToCanvasPoint(points[0].x, points[0].y);\n    const radius = this.drawer.imagePointToCanvasPoint(points[1].x, points[1].y);\n    const radiusX = Math.abs(position.x - radius.x);\n    const radiusY = Math.abs(position.y - radius.y);\n\n    // Drawing:\n    this.drawer.ctx.beginPath();\n    this.drawer.ctx.ellipse(position.x, position.y, radiusX, radiusY, 0, 2 * Math.PI, 0, false);\n\n    // stylizing:\n    this.drawer.ctx.fillStyle = `rgba(${color}, ${opacity})`;\n    this.drawer.ctx.strokeStyle = `rgb(${color})`;\n    this.drawer.ctx.lineWidth = style.lineWidth;\n\n    // drawing:\n    this.drawer.ctx.fill();\n    this.drawer.ctx.stroke();\n  }\n}\n\nclass PolygonAnnotation extends Annotation {\n  constructor(drawer, annotation) {\n    super(drawer, annotation);\n    this.updateImageLocation();\n  }\n\n  updateImageLocation() {\n    this.geometry.points.forEach((point) => {\n      if (this.imageLocation.left > point.x) {\n        this.imageLocation.left = point.x;\n      }\n      if (this.imageLocation.right < point.x) {\n        this.imageLocation.right = point.x;\n      }\n      if (this.imageLocation.top > point.y) {\n        this.imageLocation.top = point.y;\n      }\n      if (this.imageLocation.bottom < point.y) {\n        this.imageLocation.bottom = point.y;\n      }\n    });\n  }\n\n  intersects(position) {\n    return this.drawer.ctx.isPointInPath(this.path, position.x, position.y, 'nonzero');\n  }\n\n  update() {\n    const points = !this.drawFeedback ? this.geometry.points : this.feedback.geometry;\n    const path = new Path2D();\n    const startPoint = this.drawer.imagePointToCanvasPoint(points[0].x, points[0].y);\n    path.moveTo(startPoint.x, startPoint.y);\n    points.forEach((point) => {\n      const canvasPos = this.drawer.imagePointToCanvasPoint(point.x, point.y);\n      path.lineTo(canvasPos.x, canvasPos.y);\n    });\n    path.lineTo(startPoint.x, startPoint.y);\n    this.path = path;\n  }\n\n  draw() {\n    const style = this.drawer.style[this.layer];\n\n    const {\n      color,\n      opacity,\n    } = super.getColor();\n\n    if (this.id == null) {\n      this.update();\n    }\n\n    // stylizing:\n    if (this.drawFeedback) {\n      const points = this.feedback.geometry;\n      const startPoint = this.drawer.imagePointToCanvasPoint(points[0].x, points[0].y);\n      this.drawer.ctx.setLineDash([2, 2]);\n      this.drawer.ctx.font = '18px Arial';\n      this.drawer.ctx.fillStyle = 'black';\n      this.drawer.ctx.fillText('Feedback version', startPoint.x, startPoint.y);\n    } else if (this.state === 'editing' || this.state === 'feedback-editing') {\n      this.drawer.ctx.setLineDash([10, 5]);\n      this.drawer.ctx.lineWidth = style.lineWidth + 2;\n    } else if (this.state === 'idle') {\n      this.drawer.ctx.setLineDash([]);\n      this.drawer.ctx.lineWidth = style.lineWidth;\n    } else if (this.state === 'overlay') {\n      if (this.isHovering) {\n        this.drawer.ctx.font = '40px Arial';\n        this.drawer.ctx.fillStyle = `rgba(${color}, 1)`;\n        const textMetrics = this.drawer.ctx.measureText(this.label.name);\n        this.drawer.ctx.fillText(\n          this.label.name,\n          this.drawer.canvas.width / 2 - textMetrics.width / 2,\n          50,\n        );\n\n        this.drawer.ctx.fillStyle = `rgba(${color}, 0)`;\n      }\n    }\n\n    this.drawer.ctx.fillStyle = `rgba(${color}, ${opacity})`;\n    this.drawer.ctx.strokeStyle = `rgb(${color})`;\n    this.drawer.ctx.lineWidth = style.lineWidth;\n\n    // drawing:\n    this.drawer.ctx.fill(this.path);\n    this.drawer.ctx.stroke(this.path);\n  }\n}\n\nclass AnnotationDrawer {\n  constructor(Viewer, callback) {\n    // Installing canvas for drawing on top of OpenSeadragon:\n    const canvas = document.createElement('canvas');\n    canvas.style.position = 'absolute';\n    canvas.style.left = 0;\n    canvas.style.top = 0;\n    canvas.style.width = '100%';\n    canvas.style.height = '100%';\n    Viewer.canvas.appendChild(canvas);\n\n    // Defining references that will be used throughout this library\n    this.events = EventManager.getInstance();\n    this.viewer = Viewer;\n    this.canvas = canvas;\n    this.callback = callback;\n    this.ctx = canvas.getContext('2d');\n    this.annotationSet = [[]];\n    this.currentlyDrawing = null;\n    // this.currentlyEditing = null;\n    this.currentLabel = null;\n    this.currentTool = null;\n    this.elementsOnScreen = [];\n    this.filtering = [];\n    this.isPanningEnabled = true;\n    this.isPanningMode = false;\n    this.isCurrentlyHoveringAnnotation = false;\n    this.pixelWidth = 0;\n    this.isDrawingEnabled = true;\n    this.style = [{ fillOpacity: 0.6 }, { fillOpacity: 0.6 }];\n    this.currentViewport = {\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0,\n    };\n\n    this.events.register('drawer', {\n      editAnnotation: (annotation) => {\n        console.log('Drawer received request for editing');\n        this.editAnnotation(annotation);\n      },\n    });\n\n    // Defining function that keeps track of screen updates:\n    this.viewer.addHandler('update-viewport', _.throttle(this.updateViewport.bind(this), 50));\n\n    // Setting resize events to handle the annotation canvas size:\n    this.viewer.addHandler('resize', () => {\n      this.canvas.width = this.viewer.canvas.clientWidth;\n      this.canvas.height = this.viewer.canvas.clientHeight;\n    });\n\n    // Setup all interaction\n    this.mouseTracking = new OpenSeadragon.MouseTracker({\n      element: this.viewer.canvas, // .container\n      nonPrimaryReleaseHandler: () => {\n      },\n      releaseHandler: (e) => {\n        // no interactions on panning mode or if tools are disabled\n        if (this.isToolUsageEnabled()) {\n          this.currentTool.mouseEvent('release', e);\n        }\n        // if (this.isPanningMode || !this.isCurrentlyHoveringAnnotation) return;\n        // if (this.currentTool != null) {\n        //\n        // }\n      },\n      pressHandler: (e) => {\n        // no interactions on panning mode\n        if (this.isToolUsageEnabled()) {\n          this.currentTool.mouseEvent('press', e);\n        }\n        // if (this.isPanningMode || !this.isCurrentlyHoveringAnnotation) return;\n        // if (this.currentTool != null) {\n        //   this.currentTool.mouseEvent('press', e);\n        // }\n      },\n      clickHandler: (e) => {\n        if (this.isToolUsageEnabled()) {\n          this.currentTool.mouseEvent('click', e);\n        } else {\n          this.elementsOnScreen.forEach((element) => {\n            if (element.state !== 'overlay' && element.isHovering) {\n              this.callback.onClick(element);\n              this.events.annotationClicked(element);\n            }\n          });\n        }\n      },\n      dblClickHandler: (e) => {\n        // no interactions on panning mode or tool\n        if (this.isToolUsageEnabled()) {\n          this.currentTool.mouseEvent('dblClick', e);\n        }\n      },\n      moveHandler: (e) => {\n        if (this.isToolUsageEnabled()) {\n          if (this.currentTool.mouseEvent('move', e)) return;\n        }\n\n        // When not drawing, we will check for collision with the mouse pointer for interactivity\n        let hovering = 0;\n        // We only check for interaction when not in editing mode.\n        let updateRequired = false;\n        this.elementsOnScreen.forEach((annotation) => {\n          const intersects = annotation.intersects(e.position);\n\n          if (annotation.state !== 'overlay') {\n            const statusUpdateRequired = annotation.isHovering !== intersects;\n            updateRequired = updateRequired\n              || (intersects && statusUpdateRequired)\n              || statusUpdateRequired;\n\n            // Handling element interaction listeners:\n            if (statusUpdateRequired) {\n              if (intersects) {\n                callback.onHover(annotation);\n                hovering += 1;\n              } else {\n                callback.onLeave(annotation);\n              }\n            }\n          }\n\n          annotation.setHovering(intersects);\n        });\n\n        if (updateRequired) {\n          if (hovering > 0) {\n            // When hovering one or more elements, the cursor is a pointer and no tool interaction\n            this.canvas.style.cursor = 'pointer';\n            this.isCurrentlyHoveringAnnotation = true;\n          } else {\n            // No elements are being hovered, return interaction\n            this.canvas.style.cursor = 'default';\n            this.isCurrentlyHoveringAnnotation = false;\n          }\n          this.refresh();\n        }\n      },\n      keyDownHandler: (e) => {\n        // On keydown we will check if user is switching to panning mode (pressing SPACE)\n        if (!this.isPanningEnabled) {\n          if (e.keyCode === 32) { // SPACE key\n            this.viewer.panHorizontal = true;\n            this.viewer.panVertical = true;\n            this.panningMode = true;\n            return;\n          }\n        }\n        if (this.currentTool != null) {\n          this.currentTool.keyboardEvent('keyDown', e);\n        }\n      },\n      keyUpHandler: (e) => {\n        // On keyup we will check if users wants to leave panning mode (releasing SPACE)\n        if (!this.isPanningEnabled) {\n          if (e.keyCode === 32) {\n            this.viewer.panHorizontal = false;\n            this.viewer.panVertical = false;\n            this.panningMode = false;\n            return;\n          }\n        }\n\n        if (this.currentTool != null) {\n          this.currentTool.keyboardEvent('keyUp', e);\n        }\n      },\n    });\n\n    this.canvas.width = this.viewer.canvas.clientWidth;\n    this.canvas.height = this.viewer.canvas.clientHeight;\n  }\n\n  /**\n   * Sets the current tool. The tool must be the class of the tool, which will be instantiated\n   * by the function.\n   * @param value The class of the AnnotationTool\n   */\n  set tool(value) {\n    if (this.currentTool != null) {\n      this.currentTool.destroy();\n    }\n    const tools = {\n      rect: RectAnnotationTool,\n      polygon: PolygonAnnotationTool,\n      circle: CircleAnnotationTool,\n      ruler: RulerTool,\n    };\n\n    // We will instantiate the tool:\n    if (value != null && value in tools) {\n      this.currentTool = new tools[value](this);\n    } else {\n      this.currentTool = null;\n    }\n  }\n\n  get tool() {\n    if (this.currentTool != null) {\n      return this.currentTool.name;\n    }\n    return 'none';\n  }\n\n  set label(value) {\n    if (this.currentTool != null) {\n      // Label was changed, we need to refresh the screen\n      this.refresh();\n    }\n    this.currentLabel = value;\n  }\n\n  set panningMode(value) {\n    if (value) {\n      this.canvas.style.cursor = 'grab';\n    } else if (!this.isCurrentlyHoveringAnnotation) {\n      // We will assume the user is currently on a blank space:\n      this.canvas.style.cursor = 'default';\n    } else {\n      // Just for continuity, we will assume the user is hovering over an annotation:\n      this.canvas.style.cursor = 'pointer';\n    }\n    this.isPanningMode = value;\n  }\n\n  /**\n   * Starts the editing process of an annotation\n   * @param annotation\n   */\n  editAnnotation(annotation) {\n    if (this.currentTool != null) {\n      this.currentTool.destroy();\n    }\n    this.currentTool = new PathMeshEditor(annotation, this);\n    this.refresh();\n    // Finally, we save the first state as a restoration point for the user\n    // this.currently_editing.addRestorePoint('editing');\n  }\n\n  cancelEdit() {\n    if (this.currentTool instanceof PathMeshEditor) {\n      this.tool = null;\n    }\n    this.update();\n  }\n\n  concludeEdit() {\n    if (this.currentTool instanceof PathMeshEditor) {\n      this.currentTool.conclude();\n      this.tool = null;\n    }\n  }\n\n  /**\n   * Load the annotations and instantiate the drawers.\n   * @param annotations the list of annotations to load\n   */\n  loadAnnotations(annotations) {\n    if (annotations == null) return [];\n    const instantiators = {\n      rect: (annotation) => new RectAnnotation(this, annotation),\n      circle: (annotation) => new CircleAnnotation(this, annotation),\n      polygon: (annotation) => new PolygonAnnotation(this, annotation),\n    };\n    this.annotationSet[0] = annotations.map((annotation) => {\n      const { type } = annotation.geometry;\n      return instantiators[type](annotation);\n    });\n    this.update();\n    return this.annotationSet[0];\n  }\n\n  /**\n   * Checks if interactions such as mouse ou keyboard events should be passed to the current tool.\n   * In some cases, such as when in panning mode or if the interaction is disabled, we don't wa\n   * @returns {boolean|*|boolean}\n   */\n  isToolUsageEnabled() {\n    if (this.isPanningMode) {\n      // No tools are allowed when in panning mode (when pressing SPACE):\n      return false;\n    }\n    if (this.currentTool != null) {\n      // Only makes sense if there is a current tool\n      if (this.currentTool instanceof PathMeshEditor) {\n        // if current tool is the PathMeshEditor (for editing), we want to bypass hovering locks\n        return true;\n      }\n      // Tool interaction is only allowed when not hovering an annotation\n      return !this.isCurrentlyHoveringAnnotation;\n    }\n\n    // There is no tool, so no:\n    return false;\n  }\n\n  setPanningEnabled(isEnabled) {\n    this.viewer.panHorizontal = isEnabled;\n    this.viewer.panVertical = isEnabled;\n    this.isPanningEnabled = isEnabled;\n    this.panningMode = false;\n  }\n\n  /**\n   * Updates the current viewport (portion of the image the user is looking)\n   * and returns whether it changed\n   * @returns {boolean} true if the viewport has changed\n   */\n  calculateViewport() {\n    const { ctx } = this;\n    const viewportMin = this.viewer.viewport.windowToImageCoordinates(\n      new OpenSeadragon.Point(0, 0),\n    );\n    const viewportMax = this.viewer.viewport.windowToImageCoordinates(\n      new OpenSeadragon.Point(ctx.canvas.width, ctx.canvas.height),\n    );\n\n    const updateRequired = (viewportMin.x !== this.currentViewport.left\n      || viewportMin.y !== this.currentViewport.bottom\n      || viewportMax.x !== this.currentViewport.right\n      || viewportMax.y !== this.currentViewport.top);\n\n    this.currentViewport.top = viewportMin.y;\n    this.currentViewport.bottom = viewportMax.y;\n    this.currentViewport.left = viewportMin.x;\n    this.currentViewport.right = viewportMax.x;\n\n    return updateRequired;\n  }\n\n  updateViewport() {\n    // The viewport has updated:\n    if (this.calculateViewport()) {\n      // Viewport has changed, we will make the required modifications\n      this.callback.onViewportChanged(this.currentViewport);\n      this.update();\n    }\n  }\n\n  mousePointToImagePoint(mouseEvent) {\n    const viewportPoint = this.viewer.viewport.pointFromPixel(mouseEvent);\n    const coordinates = this.viewer.viewport\n      .viewportToImageCoordinates(viewportPoint.x, viewportPoint.y);\n    return {\n      x: coordinates.x,\n      y: coordinates.y,\n    };\n  }\n\n  imagePointToCanvasPoint(x, y) {\n    const point = new OpenSeadragon.Point(x, y);\n    return this.viewer.viewport.imageToViewerElementCoordinates(point);\n  }\n\n  /**\n   * Navigates to the annotation position.\n   *\n   * @param annotation The annotation to navigate to.\n   */\n  peep(annotation) {\n    const viewer = this.viewer;\n    const imageLocation = annotation.imageLocation;\n    const annotationWidth = imageLocation.right - imageLocation.left;\n    const annotationHeight = imageLocation.bottom - imageLocation.top;\n    const horizontalCenter = annotationWidth / 2;\n    const verticalCenter = annotationHeight / 2;\n    const panTo = viewer.viewport.imageToViewportCoordinates(\n      imageLocation.left + horizontalCenter,\n      imageLocation.top + verticalCenter,\n    );\n    viewer.viewport.panTo(panTo, false);\n    const tiledImage = viewer.world.getItemAt(0);\n    const yZoom = tiledImage.source.dimensions.y / annotationHeight;\n    const xZoom = tiledImage.source.dimensions.x / annotationWidth;\n    const zoom = (yZoom < xZoom ? yZoom : xZoom);\n    viewer.viewport.zoomTo(zoom - (zoom * 0.5), false);\n  }\n\n  /**\n   * Updates the elements on the screen, usually when there is panning or zooming\n   */\n  update() {\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n\n    const self = this;\n    self.elementsOnScreen = [];\n    if (this.annotationSet != null) {\n      // console.log('updating');\n      this.annotationSet.forEach((annotations) => {\n        // Checking if annotation should be visible\n        annotations.forEach((annotation) => {\n          annotation.updateViewport(); // for collision checks\n          if (annotation.shouldBeVisible(self.currentViewport)) {\n            // Annotation would be visible on the screen, does the user want to see it?\n            if (self.filtering[annotation.label.name]\n              || annotation.state === 'overlay'\n              || (annotation.state === 'importing' && self.style[0].showImporting)) {\n              // This annotation must be drawn:\n              annotation.update();\n              annotation.draw();\n              self.elementsOnScreen.push(annotation);\n            }\n          }\n        });\n      });\n    }\n    if (this.currentTool != null) {\n      this.currentTool.draw();\n    }\n  }\n\n  /**\n   * Refreshes the elements on screen, when no changes to the objects are required\n   */\n  refresh() {\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n\n    this.elementsOnScreen.forEach((annotation) => {\n      if (annotation.shouldBeVisible(this.currentViewport)) {\n        annotation.draw();\n      }\n    });\n\n    if (this.currentTool != null) {\n      this.currentTool.draw();\n    }\n  }\n}\n\nfunction loadAnnotations(rawAnnotations, drawer) {\n  const instantiators = {\n    rect: RectAnnotation,\n    circle: CircleAnnotation,\n    polygon: PolygonAnnotation,\n  };\n\n  const drawerInstance = drawer;\n  const annotations = {};\n  Object.entries(rawAnnotations)\n    .forEach(([slideId, slideAnnotations]) => {\n      annotations[slideId] = slideAnnotations.map((annotation) => {\n        const { type } = annotation.geometry;\n        return new instantiators[type](drawerInstance, annotation);\n      });\n    });\n  return annotations;\n}\n\nexport {\n  AnnotationDrawer,\n  RectAnnotationTool,\n  PolygonAnnotationTool,\n  Annotation,\n  EventManager,\n  optimizePath,\n  loadAnnotations,\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Session.vue?vue&type=style&index=0&id=279921cc&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEditor.vue?vue&type=style&index=0&id=d75e2dd4&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionClassBalance.vue?vue&type=style&index=0&id=04e5cff2&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WSIViewerRuler.vue?vue&type=style&index=0&id=7b171464&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminAppBar.vue?vue&type=style&index=0&id=73d20e91&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('router-view',{attrs:{\"name\":\"app_bar\"}}),_c('v-main',[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-app>\n    <router-view name=\"app_bar\"></router-view>\n    <v-main>\n      <router-view></router-view>\n    </v-main>\n  </v-app>\n</template>\n\n<script>\n\nexport default {\n  name: 'App',\n\n  components: {},\n\n  data: () => ({\n    //\n  }),\n};\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5e1e5e92&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VMain } from 'vuetify/lib/components/VMain';\ninstallComponents(component, {VApp,VMain})\n","import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\n\r\nVue.use(Vuex);\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    session: null,\r\n    user: null,\r\n    token: null,\r\n  },\r\n  mutations: {\r\n    set_session(state, session) {\r\n      state.session = session;\r\n    },\r\n\r\n    login(state, login_data) {\r\n      state.token = login_data.token;\r\n      state.user = login_data.user;\r\n    },\r\n    logout(state) {\r\n      state.token = null;\r\n      state.user = null;\r\n    },\r\n  },\r\n  actions: {},\r\n});\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('loading',{attrs:{\"is-loading\":_vm.loading}},[(_vm.tasks != null)?_c('v-container',{attrs:{\"grid-list-sm\":\"\"}},[(_vm.projects != null)?_c('v-row',[_c('v-col',[_c('v-card',[_c('v-row',{staticClass:\"ma-0 pa-0\"},[_c('v-col',{attrs:{\"sm\":\"12\"}},[_vm._v(\"Project selection\\n            \")]),_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"md\":\"12\"}},[_c('v-chip-group',{staticClass:\"mr-2 ml-2\",model:{value:(_vm.annotationProjectFilter),callback:function ($$v) {_vm.annotationProjectFilter=$$v},expression:\"annotationProjectFilter\"}},[_c('v-chip',{attrs:{\"filter\":\"\",\"value\":null,\"color\":\"orange\"}},[_vm._v(\"All projects\\n                \")]),_vm._l((_vm.projects),function(project){return _c('v-chip',{key:project.id,attrs:{\"filter\":\"\",\"value\":project.name}},[_vm._v(\"\\n                  \"+_vm._s(project.name)+\"\\n                \")])})],2)],1)],1)],1)],1)],1):_vm._e(),_c('v-scale-transition',[(_vm.tasks.annotation_status != null)?_c('v-row',[_c('v-col',{attrs:{\"md\":\"6\"}},[_c('task-status-overview',{attrs:{\"status\":_vm.tasks.annotation_status},on:{\"start-session\":_vm.startTask}},[_vm._v(\"\\n            Slide Annotation Progress\\n          \")])],1),_c('v-col',{attrs:{\"md\":\"6\"}},[_c('task-status-overview',{attrs:{\"status\":_vm.tasks.review_status},on:{\"start-session\":_vm.startTask}},[_vm._v(\"\\n            Annotation Revision Progress\\n          \")])],1)],1):_vm._e()],1),_c('v-row',[_c('v-col',[(_vm.tasks.annotations != null && _vm.tasks.annotations.length > 0)?_c('v-card',{attrs:{\"outlined\":\"\"}},[_c('v-card-title',[_c('span',{staticClass:\"text-h4 grey--text text--darken-2\"},[_vm._v(\"\\n              Segmentation and annotation tasks\\n            \")])]),_c('v-row',[_c('v-col',[_c('v-data-table',{attrs:{\"headers\":_vm.annotationHeaders,\"items\":_vm.tasks.annotations,\"search\":_vm.annotationTaskFilter,\"custom-filter\":_vm.annotationTaskFiltering},scopedSlots:_vm._u([{key:\"top\",fn:function(){return [_c('v-row',{staticClass:\"ma-0 pa-0\"},[_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"md\":\"10\"}},[_c('v-text-field',{staticClass:\"mx-4\",attrs:{\"label\":\"Search for slide's name\"},model:{value:(_vm.annotationTaskFilter),callback:function ($$v) {_vm.annotationTaskFilter=$$v},expression:\"annotationTaskFilter\"}})],1),_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"md\":\"2\"}},[_c('v-checkbox',{attrs:{\"label\":\"Show slide's filename\"},model:{value:(_vm.showFileNames),callback:function ($$v) {_vm.showFileNames=$$v},expression:\"showFileNames\"}})],1)],1)]},proxy:true},{key:\"item.slides\",fn:function(ref){\nvar item = ref.item;\nreturn [(!_vm.showFileNames)?_c('div',[_vm._v(_vm._s(item.slides.length)+\" slide(s) task\")]):_c('v-chip-group',{attrs:{\"column\":\"\",\"show-arrows\":\"\"}},_vm._l((item.slides),function(slide){return _c('v-chip',{key:slide.id,staticStyle:{\"pointer-events\":\"none\"},attrs:{\"outlined\":\"\",\"readonly\":true}},[_vm._v(\"\\n                      \"+_vm._s(slide.name)+\"\\n                    \")])}),1)]}},{key:\"item.assigned\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip-group',{attrs:{\"active-class\":\"primary--text\",\"column\":\"\",\"show-arrows\":\"\"}},_vm._l((item.assigned),function(user){return _c('v-chip',{key:user.id,staticStyle:{\"pointer-events\":\"none\"},attrs:{\"readonly\":true,\"dark\":\"\"}},[_vm._v(\"\\n                      \"+_vm._s(user.name)+\"\\n                    \")])}),1)]}},{key:\"item.completed\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticStyle:{\"display\":\"inline\"}},[_c('v-simple-checkbox',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"ripple\":false,\"value\":item.completed}}),(!item.completed)?_c('v-chip',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"outlined\":\"\",\"color\":\"red\"}},[_vm._v(\"\\n                      Remaining!\\n                    \")]):_vm._e()],1)]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"text\":\"\",\"color\":item.completed ? 'primary' : 'orange accent-4'},on:{\"click\":function($event){return _vm.startTask(item)}}},[_vm._v(\"\\n                    Open image\\n                  \")])]}}],null,false,3241430276)})],1)],1)],1):_vm._e()],1)],1),(_vm.tasks.review != null && _vm.tasks.review.length > 0)?_c('v-row',[_c('v-col',[_c('v-card',{attrs:{\"outlined\":\"\"}},[_c('v-card-title',[_c('span',{staticClass:\"text-h4 grey--text text--darken-2\"},[_vm._v(\"\\n              Annotation revision tasks\\n            \")])]),_c('v-data-table',{attrs:{\"headers\":_vm.review_headers,\"items\":_vm.tasks.review},scopedSlots:_vm._u([{key:\"item.slides\",fn:function(ref){\nvar item = ref.item;\nreturn [(!_vm.showFileNames)?_c('div',[_vm._v(_vm._s(item.task.task.slides.length)+\" slide(s) task\")]):_c('v-chip-group',{attrs:{\"column\":\"\",\"show-arrows\":\"\"}},_vm._l((item.task.task.slides),function(slide){return _c('v-chip',{key:slide.id,staticStyle:{\"pointer-events\":\"none\"},attrs:{\"outlined\":\"\",\"readonly\":true}},[_vm._v(\"\\n                  \"+_vm._s(slide.name)+\"\\n                \")])}),1)]}},{key:\"item.revisions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip-group',{attrs:{\"column\":\"\",\"show-arrows\":\"\"}},_vm._l((item.revisions),function(revision){return _c('v-chip',{key:revision.id,staticStyle:{\"pointer-events\":\"none\"},attrs:{\"outlined\":\"\",\"readonly\":true}},[_vm._v(\"\\n                  \"+_vm._s(revision.user != null ? revision.user.name : revision.app.name)+\"\\n                \")])}),1)]}},{key:\"item.assigned\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip-group',{attrs:{\"active-class\":\"primary--text\",\"column\":\"\",\"show-arrows\":\"\"}},_vm._l((item.assigned),function(user){return _c('v-chip',{key:user.id,staticStyle:{\"pointer-events\":\"none\"},attrs:{\"readonly\":true,\"dark\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(user.name)+\"\\n                \")])}),1)]}},{key:\"item.completed\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticStyle:{\"display\":\"inline\"}},[_c('v-simple-checkbox',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"ripple\":false,\"value\":item.completed}}),(!item.completed)?_c('v-chip',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"outlined\":\"\",\"color\":\"red\"}},[_vm._v(\"\\n                  Remaining!\\n                \")]):_vm._e()],1)]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"text\":\"\",\"color\":item.completed ? 'primary' : 'orange accent-4'},on:{\"click\":function($event){return _vm.startTask(item)}}},[_vm._v(\"\\n                Open Revision\\n              \")])]}}],null,false,3707425885)})],1)],1)],1):_vm._e()],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"mx-auto\"},[_c('v-card-text',[_c('div',[_vm._t(\"default\")],2),(_vm.status.next != null && !_vm.taskCompleted)?_c('div',[_c('p',{staticClass:\"text-h5 text--primary\"},[_vm._v(\"\\n        \"+_vm._s(_vm.status.total - _vm.status.done)+\" remaining! You completed\\n        \"+_vm._s(_vm.status.done)+\" of \"+_vm._s(_vm.status.total)+\".\\n      \")]),_c('p',[_c('v-progress-linear',{attrs:{\"readonly\":\"\",\"value\":_vm.progress}})],1),(!_vm.taskCompleted)?_c('div',[_vm._v(\"\\n        \"+_vm._s(_vm.status.next.project.name)+\"\\n      \")]):_c('div',{staticClass:\"text--primary\"},[_vm._v(\"You have completed all the slides. You can continue to review them.\\n      \")])]):_c('div',[_c('p',{staticClass:\"text-h4 text--primary\"},[_c('v-icon',{staticClass:\"mr-2\",attrs:{\"color\":\"orange accent-4\",\"size\":\"42\"}},[_vm._v(\"mdi-check-all\")]),_vm._v(\"\\n        All tasks completed!\\n      \")],1),(_vm.status.total > 0)?_c('div',{staticClass:\"text--primary\"},[_vm._v(\"You completed \"+_vm._s(_vm.status.done)+\" of \"+_vm._s(_vm.status.total)+\" tasks.\")]):_c('div',{staticClass:\"text--primary\"},[_vm._v(\"No tasks available yet\")])])]),_c('v-divider'),(_vm.status.next != null)?_c('v-card-actions',[(_vm.status.next != null)?_c('v-btn',{attrs:{\"block\":\"\",\"text\":\"\",\"color\":\"orange accent-4\",\"disabled\":_vm.status.next.completed},on:{\"click\":_vm.startSession}},[_vm._v(\"\\n      Continue\\n    \")]):_vm._e()],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card class=\"mx-auto\" >\n    <v-card-text>\n      <div>\n        <slot></slot>\n      </div>\n      <div v-if=\"status.next != null && !taskCompleted\">\n        <p class=\"text-h5 text--primary\">\n          {{ status.total - status.done }} remaining! You completed\n          {{ status.done }} of {{ status.total }}.\n        </p>\n        <p>\n          <v-progress-linear readonly :value=\"progress\"/>\n        </p>\n        <div v-if=\"!taskCompleted\">\n          {{ status.next.project.name }}\n        </div>\n        <div class=\"text--primary\" v-else>You have completed all the slides. You can continue to review them.\n        </div>\n      </div>\n      <div v-else>\n        <p class=\"text-h4 text--primary\">\n          <v-icon class=\"mr-2\" color=\"orange accent-4\" size=\"42\">mdi-check-all</v-icon>\n          All tasks completed!\n        </p>\n        <div class=\"text--primary\" v-if=\"status.total > 0\">You completed {{ status.done }} of {{ status.total }} tasks.</div>\n        <div class=\"text--primary\" v-else>No tasks available yet</div>\n      </div>\n    </v-card-text>\n    <v-divider/>\n    <v-card-actions v-if=\"status.next != null\">\n      <v-btn block text color=\"orange accent-4\"\n             v-if=\"status.next != null\"\n             :disabled=\"status.next.completed\"\n             @click=\"startSession\">\n        Continue\n      </v-btn>\n    </v-card-actions>\n  </v-card>\n</template>\n\n<script>\nexport default {\n  name: 'TaskStatusOverview',\n  methods: {\n    startSession() {\n      this.$emit('start-session', this.status.next);\n    },\n  },\n  computed: {\n    progress() {\n      return (this.status.done / this.status.total) * 100;\n    },\n    taskCompleted() {\n      return this.status.done === this.status.total;\n    },\n  },\n  props: ['status'],\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskStatusOverview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskStatusOverview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaskStatusOverview.vue?vue&type=template&id=10d8655b&scoped=true&\"\nimport script from \"./TaskStatusOverview.vue?vue&type=script&lang=js&\"\nexport * from \"./TaskStatusOverview.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10d8655b\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VDivider,VIcon,VProgressLinear})\n","<template>\n  <!--  <div v-if=\"tasks != null\">-->\n  <loading :is-loading=\"loading\">\n    <v-container grid-list-sm v-if=\"tasks != null\">\n      <v-row v-if=\"projects != null\">\n        <v-col>\n          <v-card>\n            <v-row class=\"ma-0 pa-0\">\n              <v-col sm=\"12\">Project selection\n              </v-col>\n              <v-col md=\"12\" class=\"ma-0 pa-0\">\n                <v-chip-group class=\"mr-2 ml-2\" v-model=\"annotationProjectFilter\">\n                  <v-chip filter :value=\"null\" color=\"orange\">All projects\n                  </v-chip>\n                  <v-chip\n                      filter\n                      v-for=\"project in projects\"\n                      :key=\"project.id\"\n                      :value=\"project.name\">\n                    {{ project.name }}\n                  </v-chip>\n                </v-chip-group>\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-col>\n      </v-row>\n      <v-scale-transition>\n        <v-row v-if=\"tasks.annotation_status != null\">\n          <v-col md=\"6\">\n            <task-status-overview\n                :status=\"tasks.annotation_status\"\n                v-on:start-session=\"startTask\">\n              Slide Annotation Progress\n            </task-status-overview>\n          </v-col>\n          <v-col md=\"6\">\n            <task-status-overview\n                :status=\"tasks.review_status\"\n                v-on:start-session=\"startTask\">\n              Annotation Revision Progress\n            </task-status-overview>\n          </v-col>\n        </v-row>\n      </v-scale-transition>\n      <v-row>\n        <v-col>\n          <v-card v-if=\"tasks.annotations != null && tasks.annotations.length > 0\" outlined>\n            <v-card-title>\n              <span class=\"text-h4 grey--text text--darken-2\">\n                Segmentation and annotation tasks\n              </span>\n            </v-card-title>\n            <v-row>\n              <v-col>\n                <v-data-table\n                    :headers=\"annotationHeaders\"\n                    :items=\"tasks.annotations\"\n                    :search=\"annotationTaskFilter\"\n                    :custom-filter=\"annotationTaskFiltering\">\n\n                  <template v-slot:top>\n                    <v-row class=\"ma-0 pa-0\">\n                      <v-col md=\"10\" class=\"ma-0 pa-0\">\n                        <v-text-field\n                            v-model=\"annotationTaskFilter\"\n                            label=\"Search for slide's name\"\n                            class=\"mx-4\"\n                        ></v-text-field>\n                      </v-col>\n                      <v-col md=\"2\" class=\"ma-0 pa-0\">\n                        <v-checkbox label=\"Show slide's filename\" v-model=\"showFileNames\"/>\n                      </v-col>\n                    </v-row>\n\n                  </template>\n\n                  <template v-slot:item.slides=\"{ item }\">\n                    <div v-if=\"!showFileNames\">{{ item.slides.length }} slide(s) task</div>\n                    <v-chip-group v-else column show-arrows>\n                      <v-chip style=\"pointer-events: none;\"\n                              outlined :readonly=\"true\"\n                              v-for=\"slide in item.slides\"\n                              :key=\"slide.id\">\n                        {{ slide.name }}\n                      </v-chip>\n                    </v-chip-group>\n                  </template>\n                  <template v-slot:item.assigned=\"{ item }\">\n                    <v-chip-group active-class=\"primary--text\" column show-arrows>\n                      <v-chip\n                          style=\"pointer-events: none;\" :readonly=\"true\"\n                          v-for=\"user in item.assigned\" dark\n                          :key=\"user.id\">\n                        {{ user.name }}\n                      </v-chip>\n                    </v-chip-group>\n                  </template>\n                  <template v-slot:item.completed=\"{ item }\">\n                    <div style=\"display: inline;\">\n                      <v-simple-checkbox\n                          :ripple=\"false\"\n                          style=\"display: inline-block;\"\n                          :value=\"item.completed\"/>\n                      <v-chip style=\"display: inline-block;\" outlined color=\"red\" v-if=\"!item.completed\">\n                        Remaining!\n                      </v-chip>\n                    </div>\n                  </template>\n                  <template v-slot:item.actions=\"{ item }\">\n                    <v-btn text\n                           :color=\"item.completed ? 'primary' : 'orange accent-4'\"\n                           @click=\"startTask(item)\">\n                      Open image\n                    </v-btn>\n                  </template>\n                </v-data-table>\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-col>\n      </v-row>\n\n      <v-row v-if=\"tasks.review != null && tasks.review.length > 0\">\n        <v-col>\n          <v-card outlined>\n            <v-card-title>\n              <span class=\"text-h4 grey--text text--darken-2\">\n                Annotation revision tasks\n              </span>\n            </v-card-title>\n            <v-data-table\n                :headers=\"review_headers\"\n                :items=\"tasks.review\">\n              <template v-slot:item.slides=\"{ item }\">\n                <div v-if=\"!showFileNames\">{{ item.task.task.slides.length }} slide(s) task</div>\n                <v-chip-group v-else column show-arrows>\n                  <v-chip style=\"pointer-events: none;\"\n                          outlined :readonly=\"true\"\n                          :key=\"slide.id\"\n                          v-for=\"slide in item.task.task.slides\">\n                    {{ slide.name }}\n                  </v-chip>\n                </v-chip-group>\n              </template>\n              <template v-slot:item.revisions=\"{ item }\">\n                <v-chip-group column show-arrows>\n                  <v-chip style=\"pointer-events: none;\"\n                          outlined :readonly=\"true\"\n                          :key=\"revision.id\"\n                          v-for=\"revision in item.revisions\">\n                    {{ revision.user != null ? revision.user.name : revision.app.name }}\n                  </v-chip>\n                </v-chip-group>\n              </template>\n              <template v-slot:item.assigned=\"{ item }\">\n                <v-chip-group active-class=\"primary--text\" column show-arrows>\n                  <v-chip style=\"pointer-events: none;\" :readonly=\"true\" v-for=\"user in item.assigned\" dark\n                          :key=\"user.id\">\n                    {{ user.name }}\n                  </v-chip>\n                </v-chip-group>\n              </template>\n              <template v-slot:item.completed=\"{ item }\">\n                <div style=\"display: inline;\">\n                  <v-simple-checkbox\n                      :ripple=\"false\"\n                      style=\"display: inline-block;\"\n                      :value=\"item.completed\"/>\n                  <v-chip\n                      style=\"display: inline-block;\"\n                      outlined\n                      color=\"red\"\n                      v-if=\"!item.completed\">\n                    Remaining!\n                  </v-chip>\n                </div>\n              </template>\n              <template v-slot:item.actions=\"{ item }\">\n                <v-btn\n                    text\n                    :color=\"item.completed ? 'primary' : 'orange accent-4'\"\n                    @click=\"startTask(item)\">\n                  Open Revision\n                </v-btn>\n              </template>\n            </v-data-table>\n          </v-card>\n        </v-col>\n      </v-row>\n    </v-container>\n  </loading>\n  <!--  <div v-else>-->\n  <!--    <v-progress-circular class=\"loading\" size=\"52\" :indeterminate=\"true\"/>-->\n  <!--  </div>-->\n</template>\n\n<script>\nimport TaskStatusOverview from '../components/TaskStatusOverview.vue';\nimport Loading from '../components/LoadingContent.vue';\n\nexport default {\n  name: 'Tasks',\n  components: {\n    Loading,\n    TaskStatusOverview,\n  },\n  computed: {\n    projects() {\n      if (this.tasks != null) {\n        const items = {};\n        for (const annotation in Object.values(this.tasks.annotations)) {\n          const { project } = this.tasks.annotations[annotation];\n          if (!(project.id in items)) {\n            items[project.id] = {\n              name: project.name,\n              id: project.id,\n            };\n          }\n        }\n        return Object.values(items);\n      }\n      return [];\n    },\n\n    annotationHeaders() {\n      return [\n        {\n          text: 'Slides',\n          align: 'start',\n          sortable: false,\n          value: 'slides',\n        },\n        {\n          text: 'Completed?',\n          value: 'completed',\n        },\n        // {text: 'Slides', value: 'slides'},\n        {\n          text: 'Project',\n          value: 'project.name',\n          filter: (value) => {\n            if (this.annotationProjectFilter == null\n                || this.annotationProjectFilter === 0) {\n              return true;\n            }\n\n            return value === this.annotationProjectFilter;\n          },\n        },\n        // {text: 'Users', value: 'assigned'},\n        {\n          text: 'Actions',\n          value: 'actions',\n        },\n      ];\n    },\n    review_headers() {\n      return [\n        {\n          text: 'Slides associated',\n          align: 'start',\n          sortable: false,\n          value: 'slides',\n        },\n        {\n          text: 'Annotations by to review',\n          align: 'start',\n          sortable: false,\n          value: 'revisions',\n        },\n        {\n          text: 'Completed?',\n          value: 'completed',\n        },\n        {\n          text: 'Project',\n          value: 'project.name',\n          filter: (value) => {\n            if (this.annotationProjectFilter == null\n                || this.annotationProjectFilter === 0) {\n              return true;\n            }\n\n            return value === this.annotationProjectFilter;\n          },\n        },\n        {\n          text: 'Actions',\n          value: 'actions',\n        },\n      ];\n    },\n  },\n  data: () => ({\n    loading: true,\n    tasks: null,\n    showFileNames: true,\n    annotationTaskFilter: '',\n    annotationProjectFilter: 0,\n    task_types: [\n      'Annotate images',\n      'Review annotations',\n    ],\n\n  }),\n  methods: {\n    startTask(task) {\n      this.$post('session/create', task)\n        .then((resp) => {\n          this.$store.commit('set_session', resp);\n          this.$router.push(`/session/${resp.id}`);\n        })\n        .catch((err) => this.$toast.error(`Oops, something went wrong:\\n${err.response.data.msg}`));\n    },\n\n    loadTasks() {\n      this.loading = true;\n      this.$get('task/list')\n        .then((resp) => {\n          this.tasks = resp;\n          this.loading = false;\n        })\n        .catch((err) => {\n          alert(err);\n          this.loading = false;\n        });\n    },\n\n    annotationTaskFiltering(value, search) {\n      // const projectFilter =\n      return value != null && search != null && Array.isArray(value)\n          && value.some((slideName) => slideName.name.includes(search));\n    },\n  },\n  mounted() {\n    this.loadTasks();\n  },\n};\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tasks.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tasks.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tasks.vue?vue&type=template&id=e4c07452&scoped=true&\"\nimport script from \"./Tasks.vue?vue&type=script&lang=js&\"\nexport * from \"./Tasks.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e4c07452\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VChipGroup } from 'vuetify/lib/components/VChipGroup';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VScaleTransition } from 'vuetify/lib/components/transitions';\nimport { VSimpleCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardTitle,VCheckbox,VChip,VChipGroup,VCol,VContainer,VDataTable,VRow,VScaleTransition,VSimpleCheckbox,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"overflow\":\"hidden\"}},[_c('slice-viewer',{ref:\"slice_viewer\",attrs:{\"drawer\":!_vm.session.completed && _vm.task_type === 0 && _vm.taskBelongsToUser,\"tile-sources\":_vm.tile_sources,\"labels\":_vm.project_labels,\"labels-visibility\":_vm.labelsVisible,\"drawing-style\":_vm.drawingStyle,\"draw-events\":_vm.draw_events,\"slide-properties\":_vm.currentSlide.properties},on:{\"region-clicked\":_vm.regionClicked,\"new-draw\":_vm.onNewRegionDraw,\"edit-draw\":_vm.onEditRegionDraw},model:{value:(_vm.annotations[_vm.currentSlide.id]),callback:function ($$v) {_vm.$set(_vm.annotations, _vm.currentSlide.id, $$v)},expression:\"annotations[currentSlide.id]\"}}),_c('side-window',[_c('v-toolbar',{attrs:{\"dense\":\"\",\"fixed\":\"\",\"color\":\"grey lighten-4\"},scopedSlots:_vm._u([{key:\"extension\",fn:function(){return [_c('v-tabs',{model:{value:(_vm.selectedTab),callback:function ($$v) {_vm.selectedTab=$$v},expression:\"selectedTab\"}},[_c('v-tab',[_vm._v(\"View\")]),(_vm.annotationTabVisible)?_c('v-tab',[_vm._v(\"\\n            Annotations (\"+_vm._s(_vm.annotations[_vm.currentSlide.id].length)+\")\\n          \")]):_vm._e()],1)]},proxy:true}])},[_c('v-toolbar-title',[_vm._v(_vm._s(_vm.task_type === 0 ? 'Annotation task' : 'Review task'))])],1),_c('v-tabs-items',{model:{value:(_vm.selectedTab),callback:function ($$v) {_vm.selectedTab=$$v},expression:\"selectedTab\"}},[_c('v-tab-item',[_c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-md\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[(_vm.task_type === 0)?_c('v-flex',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"6\"}},[_c('session-class-balance',{ref:\"classBalance\",attrs:{\"session-id\":_vm.session_id,\"slide-id\":_vm.currentSlide.id}})],1):_vm._e(),_c('v-flex',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"6\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Annotation visibility\")]),_c('div',{staticClass:\"pl-3 pr-3 pb-3\",staticStyle:{\"max-height\":\"200px\",\"overflow-y\":\"auto\"}},[_vm._l((_vm.project_labels),function(label){return _c('v-switch',{key:label.id,staticClass:\"mt-0\",attrs:{\"hide-details\":\"\",\"dense\":\"\",\"label\":label.name,\"color\":_vm.genColor(label.color)},model:{value:(_vm.labelsVisible[label.name]),callback:function ($$v) {_vm.$set(_vm.labelsVisible, label.name, $$v)},expression:\"labelsVisible[label.name]\"}})}),_c('v-switch',{staticClass:\"mt-0\",attrs:{\"hide-details\":\"\",\"dense\":\"\",\"label\":\"Show importing\"},model:{value:(_vm.drawingStyle[0].showImporting),callback:function ($$v) {_vm.$set(_vm.drawingStyle[0], \"showImporting\", $$v)},expression:\"drawingStyle[0].showImporting\"}})],2),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('a',{staticClass:\"link-btn\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.labelAnnotationsVisibility(true)}}},[_vm._v(\"\\n                    Select all\\n                  \")]),_vm._v(\" |\\n                  \"),_c('a',{staticClass:\"link-btn\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.labelAnnotationsVisibility(false)}}},[_vm._v(\"\\n                    Unselect all\\n                  \")])]),_c('v-divider'),_c('div',{staticClass:\"flex-container\"},[_c('v-slider',{staticClass:\"pl-2 pr-2\",staticStyle:{\"width\":\"50%\"},attrs:{\"hide-details\":\"\",\"prepend-icon\":\"mdi-circle-opacity\",\"step\":\"0\",\"thumb-label\":\"\",\"min\":\"0.0\",\"max\":\"1\"},scopedSlots:_vm._u([{key:\"thumb-label\",fn:function(ref){\nvar value = ref.value;\nreturn [_vm._v(\"\\n                      \"+_vm._s(value.toFixed(2))+\"\\n                    \")]}}]),model:{value:(_vm.drawingStyle[0].fillOpacity),callback:function ($$v) {_vm.$set(_vm.drawingStyle[0], \"fillOpacity\", $$v)},expression:\"drawingStyle[0].fillOpacity\"}}),_c('v-slider',{staticClass:\"pl-2 pr-2\",staticStyle:{\"width\":\"50%\"},attrs:{\"hide-details\":\"\",\"prepend-icon\":\"mdi-gesture-tap\",\"step\":\"0\",\"thumb-label\":\"\",\"min\":\"0.0\",\"max\":\"1\"},scopedSlots:_vm._u([{key:\"thumb-label\",fn:function(ref){\nvar value = ref.value;\nreturn [_vm._v(\"\\n                      \"+_vm._s(value.toFixed(2))+\"\\n                    \")]}}]),model:{value:(_vm.drawingStyle[0].hoverOpacity),callback:function ($$v) {_vm.$set(_vm.drawingStyle[0], \"hoverOpacity\", $$v)},expression:\"drawingStyle[0].hoverOpacity\"}}),_c('div',{staticClass:\"break\"}),_c('v-slider',{staticClass:\"pl-2 pr-2\",staticStyle:{\"width\":\"50%\"},attrs:{\"hide-details\":\"\",\"prepend-icon\":\"mdi-format-line-weight\",\"step\":\"1\",\"thumb-label\":\"\",\"min\":\"1\",\"max\":\"10\"},scopedSlots:_vm._u([{key:\"thumb-label\",fn:function(ref){\nvar value = ref.value;\nreturn [_vm._v(\"\\n                      \"+_vm._s(value.toFixed(2))+\"\\n                    \")]}}]),model:{value:(_vm.drawingStyle[0].lineWidth),callback:function ($$v) {_vm.$set(_vm.drawingStyle[0], \"lineWidth\", $$v)},expression:\"drawingStyle[0].lineWidth\"}}),_c('v-switch',{staticStyle:{\"width\":\"50%\",\"margin\":\"0\"},attrs:{\"hide-details\":\"\",\"label\":\"Highlight\"},model:{value:(_vm.highlightOnTab),callback:function ($$v) {_vm.highlightOnTab=$$v},expression:\"highlightOnTab\"}})],1)],1)],1),_c('v-flex',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"6\"}},[_c('v-card',[_c('div',{staticClass:\"pa-3 pb-0 text-h6 text--primary\"},[_vm._v(\"Task slides\")]),_c('div',{staticClass:\"pl-3 pr-3 text-center font-weight-thin card-description\"},[_vm._v(\"\\n                  Select the slide you want to work with below.\\n                \")]),_c('div',{staticClass:\"pl-3 pr-3 pb-3\"},[_c('v-list',{staticClass:\"slides-list\",attrs:{\"dense\":\"\",\"shaped\":\"\"}},[_c('v-list-item-group',{attrs:{\"color\":\"orange\",\"mandatory\":\"\"},model:{value:(_vm.currentSlide),callback:function ($$v) {_vm.currentSlide=$$v},expression:\"currentSlide\"}},_vm._l((_vm.slides),function(slide){return _c('v-list-item',{key:slide.id,attrs:{\"two-line\":\"\",\"value\":slide}},[_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(slide.name)}}),_c('v-list-item-subtitle',{domProps:{\"textContent\":_vm._s(slide.properties.comment)}})],1)],1)}),1)],1)],1)])],1),_c('v-flex',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"6\"}},[_c('v-card',[_c('div',{staticClass:\"pa-3 pb-0 text-h6 text--primary\"},[_vm._v(\"Task status\")]),_c('div',{staticClass:\"pl-3 pr-3 text-center font-weight-thin card-description\"},[_vm._v(\"\\n                  Once you feel you are done with\\n                  task you may mark it as completed.\\n                \")]),_c('div',{staticClass:\"pl-3 pr-3 pb-3\"},[_c('v-switch',{attrs:{\"disabled\":!_vm.taskBelongsToUser,\"label\":\"Task completed\"},model:{value:(_vm.session.completed),callback:function ($$v) {_vm.$set(_vm.session, \"completed\", $$v)},expression:\"session.completed\"}})],1)])],1),(_vm.task_type === 1)?_c('v-flex',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"6\"}},[_c('v-card',[_c('div',{staticClass:\"pa-3 pb-0 text-h6 text--primary\"},[_vm._v(\"Annotations to review\")]),_c('div',{staticClass:\"pl-3 pr-3 text-center font-weight-thin card-description\"},[_vm._v(\"\\n                  List of user's annotations for this task that must be reviewed.\\n                  Select the user's annotations you want to review at this time.\\n                \")]),_c('div',{staticClass:\"pl-3 pr-3 pb-3\"},[_c('v-radio-group',{model:{value:(_vm.revisingUserTask),callback:function ($$v) {_vm.revisingUserTask=$$v},expression:\"revisingUserTask\"}},[_c('v-radio',{attrs:{\"value\":\"none\",\"label\":\"None\"}}),_vm._l((_vm.revisions),function(item){return _c('v-radio',{key:item.id,attrs:{\"value\":item.id,\"label\":item.user}})})],2)],1)])],1):_vm._e(),(_vm.annotationImportingEnabled)?_c('v-flex',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"6\"}},[_c('v-card',[_c('div',{staticClass:\"pa-3 pb-0 text-h6 text--primary\"},[_vm._v(\"Import annotations\")]),_c('div',{staticClass:\"pl-3 pr-3 text-center font-weight-thin card-description\"},[_vm._v(\"\\n                  Select a geojson file to import its annotations to the currently selected slide.\\n                \")]),(_vm.confirmingImportAnnotations)?_c('div',{staticClass:\"pl-3 pr-3 pb-3\"},[_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.dismissAll}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.importAll}},[_vm._v(\"Import all\")])],1):_c('div',{staticClass:\"pl-3 pr-3 pb-3\"},[_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"file-importer-input\",\"type\":\"file\"}}),_c('v-btn',{attrs:{\"block\":\"\",\"text\":\"\"},on:{\"click\":_vm.importAnnotations}},[_vm._v(\"Select file\")])],1)])],1):_vm._e(),_c('v-flex',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"6\"}},[_c('MLPredictionsOverlapTool',{attrs:{\"current-slide\":_vm.currentSlide},on:{\"clear-overlay\":_vm.onClearOverlayAnnotations,\"annotations\":_vm.onOverlayAnnotations,\"style-changed\":_vm.onOverlayStyleChanged}})],1)],1)],1)],1),(_vm.annotations[_vm.currentSlide.id] != null)?_c('v-tab-item',[_c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-md\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\",\"id\":\"annotation-tab\"}},[_vm._l((_vm.annotationsLister.pageMax),function(idx){return _c('v-flex',{key:idx,attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"6\"}},[_c('annotation-card',{on:{\"save-annotation\":_vm.concludeEdit,\"edit-annotation\":_vm.editRegion,\"cancel-edit\":_vm.cancelEdit,\"annotation-feedback\":_vm.annotationFeedback,\"import-annotation\":_vm.onNewRegionDraw,\"dismiss-annotation\":_vm.dismissAnnotation,\"annotation-peep\":_vm.annotationPeep,\"annotation-update\":_vm.annotationUpdate},model:{value:(_vm.annotations[_vm.currentSlide.id][_vm.annotationsListStart + idx]),callback:function ($$v) {_vm.$set(_vm.annotations[_vm.currentSlide.id], _vm.annotationsListStart + idx, $$v)},expression:\"annotations[currentSlide.id][annotationsListStart + idx]\"}})],1)}),_c('v-flex',[_c('v-pagination',{attrs:{\"length\":_vm.annotationsLister.totalPages+1,\"circle\":\"\",\"total-visible\":4},model:{value:(_vm.annotationsLister.page),callback:function ($$v) {_vm.$set(_vm.annotationsLister, \"page\", $$v)},expression:\"annotationsLister.page\"}})],1)],2)],1)],1):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"seadragon-viewer\"}}),_c('div',{staticClass:\"drawing-tool-container\"},[_c('div',{staticClass:\"tool-item\"},[(_vm.task_type === 0)?_c('div',{staticClass:\"zoom-shortcuts\"},[_c('v-menu',{attrs:{\"top\":\"\",\"close-on-click\":true,\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"text\":\"\"}},'v-btn',attrs,false),on),[_c('v-avatar',{staticClass:\"mr-2\",attrs:{\"color\":(\"rgb(\" + (_vm.selectedLabel.color[0]) + \",\" + (_vm.selectedLabel.color[1]) + \",\" + (_vm.selectedLabel.color[2]) + \")\"),\"size\":\"26\"}}),_vm._v(\"\\n              \"+_vm._s(_vm.selectedLabel.name)+\"\\n            \")],1)]}}],null,false,1061530642)},[_c('v-list',{staticStyle:{\"overflow\":\"auto\",\"max-height\":\"600px\"}},_vm._l((_vm.labels),function(item,index){return _c('v-list-item',{key:index,on:{\"click\":function($event){_vm.selectedLabel = item}}},[_c('v-list-item-avatar',[_c('v-avatar',{attrs:{\"color\":(\"rgb(\" + (item.color[0]) + \",\" + (item.color[1]) + \",\" + (item.color[2]) + \")\"),\"size\":\"26\"}})],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(item.name))])],1)],1)}),1)],1)],1):_vm._e(),(_vm.drawer)?_c('v-divider'):_vm._e(),(_vm.annotationDrawer != null && _vm.annotationDrawer.isDrawingEnabled && _vm.editing.element == null)?_c('div',{staticClass:\"zoom-shortcuts\"},[_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":'none' === _vm.annotationDrawer.tool ? 'primary' : 'grey'},on:{\"click\":function($event){_vm.annotationDrawer.tool = 'none'}}},[_c('v-icon',[_vm._v(\"mdi-cursor-default\")])],1),(_vm.drawer)?_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":'polygon' === _vm.annotationDrawer.tool ? 'primary' : 'grey'},on:{\"click\":function($event){_vm.annotationDrawer.tool = 'polygon'}}},[_c('v-icon',[_vm._v(\"mdi-vector-polygon\")])],1):_vm._e(),(_vm.drawer)?_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":'rect' === _vm.annotationDrawer.tool ? 'primary' : 'grey'},on:{\"click\":function($event){_vm.annotationDrawer.tool = 'rect'}}},[_c('v-icon',[_vm._v(\"mdi-vector-rectangle\")])],1):_vm._e(),(_vm.drawer)?_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":'circle' === _vm.annotationDrawer.tool ? 'primary' : 'grey'},on:{\"click\":function($event){_vm.annotationDrawer.tool = 'circle'}}},[_c('v-icon',[_vm._v(\"mdi-circle-outline\")])],1):_vm._e(),_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":'ruler' === _vm.annotationDrawer.tool ? 'primary' : 'grey'},on:{\"click\":function($event){_vm.annotationDrawer.tool = 'ruler'}}},[_c('v-icon',[_vm._v(\"mdi-ruler\")])],1)],1):_vm._e()],1),(_vm.stateRestorer.showing)?_c('div',{staticClass:\"tool-item\"},[_c('v-slider',{attrs:{\"step\":\"1\",\"dense\":\"\",\"hide-details\":\"\",\"max\":_vm.stateRestorer.max_undo,\"label\":\"Undo\"},model:{value:(_vm.stateRestorer.undo),callback:function ($$v) {_vm.$set(_vm.stateRestorer, \"undo\", $$v)},expression:\"stateRestorer.undo\"}})],1):_vm._e()]),_c('div',{staticClass:\"toolbox navigation-toolbox\"},[_c('v-slider',{attrs:{\"hide-details\":\"\",\"thumb-label\":\"\",\"dense\":\"\",\"max\":40,\"min\":\"0.5\",\"step\":\"0\"},scopedSlots:_vm._u([{key:\"thumb-label\",fn:function(ref){\nvar value = ref.value;\nreturn [_vm._v(\"\\n        \"+_vm._s(value.toFixed(2))+\"\\n      \")]}}]),model:{value:(_vm.zoom),callback:function ($$v) {_vm.zoom=$$v},expression:\"zoom\"}}),_c('div',{staticClass:\"zoom-shortcuts\"},[_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":function($event){_vm.zoom = 1}}},[_vm._v(\"1x\")]),_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":function($event){_vm.zoom = 2}}},[_vm._v(\"2x\")]),_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":function($event){_vm.zoom = 10}}},[_vm._v(\"10x\")]),_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":function($event){_vm.zoom = 20}}},[_vm._v(\"20x\")]),_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\"},on:{\"click\":function($event){_vm.zoom = 40}}},[_vm._v(\"40x\")])],1)],1),_c('div',{staticClass:\"toolbox ruler transparent\"},[_c('SliceViewerRuler',{attrs:{\"value\":_vm.viewportLocation,\"pixel-density\":_vm.pixel_density}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('canvas',{staticClass:\"ruler-renderer\",attrs:{\"id\":\"ruler-canvas\",\"width\":\"80\",\"height\":\"10\"}}),_c('div',{staticClass:\"ruler-text\"},[_vm._v(_vm._s((_vm.pixelDensity * this.bar_size).toFixed(2))+\"µm\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <canvas id=\"ruler-canvas\" class=\"ruler-renderer\" width=\"80\" height=\"10\"></canvas>\n    <div class=\"ruler-text\">{{ (pixelDensity * this.bar_size).toFixed(2) }}µm</div>\n  </div>\n</template>\n\n<script>\nimport _ from 'lodash';\n\nexport default {\n  name: 'WSIViewerRuler',\n  watch: {\n    pixelDensity: {\n      immediate: true,\n      handler() {\n        // const max = (new_value * 80)\n        this.updateRuler();\n        // const desiredValue = max - ((max-10)%10)\n        // console.log(\"desired:\", desiredValue)\n        // this.snapped_value = desiredValue\n        // this.bar_size = 100 - (((max-desiredValue)+desiredValue) % 100)\n        // this.bar_size = 100 - (max % 100)\n      },\n    },\n    bar_size() {\n      this.updateRuler();\n    },\n  },\n  computed: {},\n  data: () => ({\n    bar_size: 80,\n  }),\n  methods: {\n    // eslint-disable-next-line func-names\n    updateRuler: _.debounce(function () {\n      if (this.ctx == null) return;\n      this.ctx.clearRect(0, 0, this.canvas.clientWidth, this.canvas.clientHeight);\n      this.ctx.beginPath();\n      this.ctx.moveTo(80, 5);\n      this.ctx.lineTo(80 - this.bar_size, 5);\n      this.ctx.stroke();\n      // this.ctx.fillText(\"50cm\", 50, 10)\n      this.ctx.beginPath();\n      this.ctx.moveTo(80, 0);\n      this.ctx.lineTo(80, 10);\n      this.ctx.stroke();\n      this.ctx.beginPath();\n      this.ctx.moveTo(80 - this.bar_size, 0);\n      this.ctx.lineTo(80 - this.bar_size, 10);\n      this.ctx.stroke();\n    }, 0),\n  },\n  mounted() {\n    this.canvas = document.getElementById('ruler-canvas');\n    this.ctx = this.canvas.getContext('2d');\n    this.canvas.onwheel = (evt) => {\n      const delta = evt.deltaY * -0.05;\n      this.bar_size = Math.max(Math.min(this.bar_size + delta, 80), 10);\n    };\n  },\n  props: ['value', 'pixelDensity'],\n};\n</script>\n\n<style scoped>\n.ruler-renderer {\n  width: 100px;\n  height: 10px;\n  position: absolute;\n  right: 8px;\n\n}\n\n.ruler-text {\n  width: 100%;\n  text-align: center;\n  font-size: 12px;\n  position: relative;\n  right: 0;\n  top: 10px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WSIViewerRuler.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WSIViewerRuler.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WSIViewerRuler.vue?vue&type=template&id=7b171464&scoped=true&\"\nimport script from \"./WSIViewerRuler.vue?vue&type=script&lang=js&\"\nexport * from \"./WSIViewerRuler.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WSIViewerRuler.vue?vue&type=style&index=0&id=7b171464&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b171464\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <div id=\"seadragon-viewer\"/>\n\n    <div class=\"drawing-tool-container\">\n\n      <div class=\"tool-item\">\n        <div class=\"zoom-shortcuts\" v-if=\"task_type === 0\">\n          <v-menu top :close-on-click=\"true\" offset-y>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn text v-bind=\"attrs\" v-on=\"on\">\n                <v-avatar\n                    class=\"mr-2\"\n                    :color=\"`rgb(${selectedLabel.color[0]},${selectedLabel.color[1]},${selectedLabel.color[2]})`\"\n                    size=\"26\"/>\n                {{ selectedLabel.name }}\n              </v-btn>\n            </template>\n            <v-list style=\"overflow: auto; max-height: 600px\">\n              <v-list-item @click=\"selectedLabel = item\"\n                           v-for=\"(item, index) in labels\" :key=\"index\">\n                <v-list-item-avatar>\n                  <v-avatar :color=\"`rgb(${item.color[0]},${item.color[1]},${item.color[2]})`\"\n                            size=\"26\"/>\n                </v-list-item-avatar>\n                <v-list-item-content>\n                  <v-list-item-title>{{ item.name }}</v-list-item-title>\n                </v-list-item-content>\n              </v-list-item>\n            </v-list>\n          </v-menu>\n        </div>\n\n        <v-divider v-if=\"drawer\"></v-divider>\n        <div v-if=\"annotationDrawer != null && annotationDrawer.isDrawingEnabled && editing.element == null\"\n             class=\"zoom-shortcuts\">\n          <v-btn text icon\n                 @click=\"annotationDrawer.tool = 'none'\"\n                 :color=\"'none' === annotationDrawer.tool ? 'primary' : 'grey'\">\n            <v-icon>mdi-cursor-default</v-icon>\n          </v-btn>\n          <v-btn text icon @click=\"annotationDrawer.tool = 'polygon'\"\n                 :color=\"'polygon' === annotationDrawer.tool ? 'primary' : 'grey'\"\n                 v-if=\"drawer\">\n            <v-icon>mdi-vector-polygon</v-icon>\n          </v-btn>\n          <v-btn text icon @click=\"annotationDrawer.tool = 'rect'\"\n                 :color=\"'rect' === annotationDrawer.tool ? 'primary' : 'grey'\"\n                 v-if=\"drawer\">\n            <v-icon>mdi-vector-rectangle</v-icon>\n          </v-btn>\n          <v-btn text icon\n                 @click=\"annotationDrawer.tool = 'circle'\"\n                 :color=\"'circle' === annotationDrawer.tool ? 'primary' : 'grey'\"\n                 v-if=\"drawer\">\n            <v-icon>mdi-circle-outline</v-icon>\n          </v-btn>\n          <v-btn text icon\n                 @click=\"annotationDrawer.tool = 'ruler'\"\n                 :color=\"'ruler' === annotationDrawer.tool ? 'primary' : 'grey'\">\n            <v-icon>mdi-ruler</v-icon>\n          </v-btn>\n        </div>\n      </div>\n      <div v-if=\"stateRestorer.showing\" class=\"tool-item\">\n        <v-slider step=\"1\" dense hide-details\n                  v-model=\"stateRestorer.undo\" :max=\"stateRestorer.max_undo\"\n                  label=\"Undo\"/>\n      </div>\n\n      <!--      <div class=\"tool-item\" v-if=\"info.length > 0\">-->\n      <!--        <p class=\"instruction-item\" v-for=\"instruction in info\" :key=\"instruction\">-->\n      <!--          {{ instruction }}-->\n      <!--        </p>-->\n      <!--      </div>-->\n    </div>\n    <div class=\"toolbox navigation-toolbox\">\n      <v-slider hide-details thumb-label dense v-model=\"zoom\" :max=\"40\" min=\"0.5\" step=\"0\">\n        <template v-slot:thumb-label=\"{ value }\">\n          {{ value.toFixed(2) }}\n        </template>\n      </v-slider>\n      <div class=\"zoom-shortcuts\">\n        <v-btn text icon @click=\"zoom = 1\">1x</v-btn>\n        <v-btn text icon @click=\"zoom = 2\">2x</v-btn>\n        <v-btn text icon @click=\"zoom = 10\">10x</v-btn>\n        <v-btn text icon @click=\"zoom = 20\">20x</v-btn>\n        <v-btn text icon @click=\"zoom = 40\">40x</v-btn>\n      </div>\n    </div>\n\n    <div class=\"toolbox ruler transparent\">\n      <SliceViewerRuler :value=\"viewportLocation\" :pixel-density=\"pixel_density\"></SliceViewerRuler>\n    </div>\n  </div>\n</template>\n\n<script>\nimport OpenSeadragon from 'openseadragon';\nimport { AnnotationDrawer, RectAnnotationTool, PolygonAnnotationTool } from '@/SliceDrawer';\nimport WSIViewerRuler from './WSIViewerRuler';\n\nexport default {\n  name: 'WSIViewer',\n  components: { SliceViewerRuler: WSIViewerRuler },\n  computed: {\n    task_type() {\n      return this.$store.state.session.type;\n    },\n    pixel_density() {\n      // console.log(\"calculating pixel_density\")\n      if (this.viewportLocation == null || this.slideProperties == null) return 0;\n      const imgPixels = this.viewportLocation.right - this.viewportLocation.left;\n      const imgPixelPerCanvasPixel = imgPixels / this.annotationDrawer.ctx.canvas.width;\n      // why are we off by this amount? this is some seriously shade stuff:\n      return (this.slideProperties.pixel_width * imgPixelPerCanvasPixel) * 1.2;\n    },\n  },\n\n  data: () => ({\n    selectedLabel: null,\n    zoom: 0,\n    viewportLocation: null,\n    annotationDrawer: null,\n    editing: {\n      element: null,\n      mode: 'mover',\n    },\n    stateRestorer: {\n      showing: false,\n      undo: 0,\n      max_undo: 0,\n    },\n    info: [],\n  }),\n  watch: {\n    drawer() {\n      // Changes on the drawer will immediately reset the current tool to none.\n      if (this.annotationDrawer != null) {\n        this.annotationDrawer.tool = null;\n      }\n    },\n    value: {\n      immediate: true,\n      handler(newValue) {\n        if (this.annotationDrawer != null) {\n          this.annotationDrawer.annotationSet[0] = newValue;\n          newValue.forEach((annotation) => {\n            annotation.drawer = this.annotationDrawer;\n          });\n        }\n      },\n    },\n    task_type: {\n      immediate: true,\n      handler(newValue) {\n        if (this.annotationDrawer != null) {\n          this.annotationDrawer.isDrawingEnabled = newValue === 0;\n        }\n      },\n    },\n    labels: {\n      immediate: true,\n      handler(newLabels) {\n        this.selectedLabel = newLabels[0];\n      },\n    },\n    labelsVisibility: {\n      immediate: true,\n      deep: true,\n      handler(newVisibility) {\n        if (this.annotationDrawer != null) {\n          this.annotationDrawer.filtering = newVisibility;\n          this.annotationDrawer.refresh();\n        }\n      },\n    },\n    selectedLabel: {\n      immediate: true,\n      handler(newValue) {\n        if (this.annotationDrawer != null) {\n          this.annotationDrawer.label = newValue;\n        }\n        // if (this.annotationDrawer != null) {\n        //   this.annotationDrawer.currentLabel = newValue;\n        // }\n        // if (this.editing.element != null) {\n        //   // this.editing.element.data.color = new_value.color\n        //   this.annotationDrawer.refresh();\n        // }\n      },\n    },\n    zoom(newZoom) {\n      const { viewer } = this;\n      if (viewer != null && !this.no_model_action) {\n        viewer.viewport.zoomTo(newZoom);\n      }\n      this.no_model_action = false;\n    },\n    drawingStyle: {\n      deep: true,\n      immediate: true,\n      handler(newStyle) {\n        if (this.annotationDrawer != null) {\n          this.annotationDrawer.style = newStyle;\n          this.annotationDrawer.refresh();\n        }\n      },\n    },\n    'stateRestorer.undo': function (value) {\n      if (!this.no_model_action) {\n        if (this.annotationDrawer.currentTool != null) {\n          this.annotationDrawer.currentTool.stateRestorer.restoreToPoint(value);\n        }\n      }\n      this.no_model_action = false;\n    },\n    tileSources(value) {\n      this.viewer.open(value);\n    },\n    slideProperties: {\n      immediate: true,\n      deep: true,\n      handler(newValue) {\n        if (this.annotationDrawer != null) {\n          this.annotationDrawer.pixelWidth = newValue.pixel_width;\n        }\n      },\n    },\n  },\n  methods: {\n    loadOverlayAnnotations(overlayAnnotations) {\n      console.log('loadOverlayAnnotations', overlayAnnotations);\n      if (this.annotationDrawer != null) {\n        if (this.annotationDrawer.annotationSet.length === 1) {\n          this.annotationDrawer.annotationSet.push({});\n        }\n        this.annotationDrawer.annotationSet[1] = overlayAnnotations;\n        overlayAnnotations.forEach((annotation) => {\n          annotation.drawer = this.annotationDrawer;\n        });\n        this.annotationDrawer.update();\n      }\n    },\n\n    clearOverlayAnnotations() {\n      console.log('clearOverlayAnnotations', 'WSIViewer');\n      this.annotationDrawer.annotationSet.splice(1, 1);\n      this.annotationDrawer.update();\n    },\n\n    editElement(annotation) {\n      // this.editing.element = element;\n      this.no_model_action = true;\n      // this.annotationDrawer.editAnnotation(annotation);\n    },\n    concludeEdit() {\n      this.annotationDrawer.concludeEdit();\n    },\n    cancelEdit() {\n      this.annotationDrawer.cancelEdit();\n    },\n    peepAnnotation(annotation) {\n      this.annotationDrawer.peep(annotation);\n    },\n    update() {\n      this.annotationDrawer.update();\n    },\n  },\n  mounted() {\n    this.$nextTick(() => {\n      const viewer = OpenSeadragon({\n        id: 'seadragon-viewer',\n        tileSources: this.tileSources,\n        showNavigator: true,\n        navigatorPosition: 'TOP_RIGHT',\n        navigatorRight: '16px',\n        navigatorBottom: '16px',\n        navigatorHeight: '120px',\n        navigatorWidth: '145px',\n        showNavigationControl: false,\n        gestureSettingsMouse: {\n          clickToZoom: false,\n        },\n      });\n\n      const delegateCallback = (callback, ...args) => {\n        if (callback != null) {\n          callback(...args);\n        }\n      };\n\n      this.viewer = viewer;\n      this.annotationDrawer = new AnnotationDrawer(viewer, {\n        onViewportChanged: (viewport) => {\n          this.viewportLocation = viewport;\n          delegateCallback(this.drawEvents.onViewportChanged, viewport);\n        },\n        onHover: (element) => {\n          delegateCallback(this.drawEvents.onHover, element);\n        },\n        onLeave: (element) => {\n          delegateCallback(this.drawEvents.onLeave, element);\n        },\n        onClick: (element) => {\n          delegateCallback(this.drawEvents.onClick, element);\n        },\n        onStateRestorerEvent: (stateRestorer) => {\n          // console.log('onStateRestorerEvent', stateRestorer);\n          this.no_model_action = true;\n          if (stateRestorer != null) {\n            this.stateRestorer.showing = true;\n            this.stateRestorer.max_undo = stateRestorer.states.length - 1;\n            this.stateRestorer.undo = stateRestorer.currentStatePoint;\n          } else {\n            this.stateRestorer.showing = false;\n          }\n          delegateCallback(this.drawEvents.onStateRestorerEvent, stateRestorer);\n        },\n        onEditingEvent: () => {\n          this.no_model_action = true;\n          const lastStateIndex = this.annotationDrawer.currently_editing.history.length - 1;\n          this.editing.max_undo = lastStateIndex;\n          this.editing.undo = lastStateIndex;\n          delegateCallback(this.drawEvents.onEditingEvent);\n        },\n        onFinishNewDrawing: (annotation) => {\n          // Creating a new label object:\n          this.$emit('new-draw', annotation);\n        },\n        onInfoUpdate: (messages) => {\n          this.info = messages;\n        },\n        onFinishedEditing: (changed, annotation) => {\n          this.annotationDrawer.tool = null;\n          if (changed) {\n            this.$emit('edit-draw', annotation);\n          }\n          this.editing.element = null;\n          delegateCallback(this.drawEvents.onFinishedEditing, changed, annotation);\n        },\n      });\n      const self = this.annotationDrawer;\n      if (this.value != null) {\n        this.value.forEach((annotation) => {\n          annotation.drawer = self;\n        });\n      }\n      this.annotationDrawer.annotationSet[0] = this.value;\n      this.annotationDrawer.tool = 'pointer';\n      this.annotationDrawer.filtering = this.labelsVisibility;\n      this.annotationDrawer.label = this.selectedLabel;\n      this.annotationDrawer.pixelWidth = this.slideProperties.pixel_width;\n      this.annotationDrawer.style = this.drawingStyle;\n      this.annotationDrawer.update();\n      this.viewer.addHandler('zoom', (e) => {\n        this.no_model_action = true; // don't let the zoom listener take action\n        this.zoom = e.zoom;\n      });\n      this.no_model_action = false;\n    });\n  },\n  props: {\n    drawer: {\n      type: Boolean,\n      default: true,\n    },\n    labels: { type: Array },\n    value: { type: Array },\n    tileSources: { type: String },\n    labelsVisibility: { type: Object },\n    drawingStyle: { type: Array },\n    drawEvents: {},\n    slideProperties: { type: Object },\n  },\n};\n</script>\n\n<style scoped>\n#seadragon-viewer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.toolbox {\n  position: absolute;\n  border-radius: 8px;\n  background-color: #f1f1f1;\n  padding: 8px;\n}\n\n.transparent {\n  background-color: transparent;\n}\n\n.ruler {\n  right: 32px;\n  bottom: 16px;\n}\n\n.drawing-tool-container {\n  position: absolute;\n  left: 16px;\n  bottom: 16px;\n  height: auto;\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.tool-item {\n  flex-flow: column;\n  border-radius: 8px;\n  background-color: #f1f1f1;\n  padding: 8px;\n  margin-top: 4px;\n  margin-bottom: 4px;\n}\n\n.instruction-item {\n  font-size: small;\n  font-weight: normal;\n  width: 100%;\n  margin: 0;\n}\n\n.navigation-toolbox {\n  width: 200px;\n  bottom: 16px;\n  margin: 0 auto;\n  left: calc(50% - 100px);\n}\n\n.zoom-shortcuts {\n  display: flex;\n  justify-content: center;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WSIViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WSIViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WSIViewer.vue?vue&type=template&id=70ecfa2c&scoped=true&\"\nimport script from \"./WSIViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./WSIViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WSIViewer.vue?vue&type=style&index=0&id=70ecfa2c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70ecfa2c\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\ninstallComponents(component, {VAvatar,VBtn,VDivider,VIcon,VList,VListItem,VListItemAvatar,VListItemContent,VListItemTitle,VMenu,VSlider})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-navigation-drawer',{ref:\"side_window\",attrs:{\"app\":\"\",\"right\":\"\",\"width\":_vm.width},model:{value:(_vm.shown),callback:function ($$v) {_vm.shown=$$v},expression:\"shown\"}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-navigation-drawer ref=\"side_window\" app right :width=\"width\" v-model=\"shown\">\r\n    <slot></slot>\r\n  </v-navigation-drawer>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'SideWindow',\r\n  data: () => ({\r\n    width: 300,\r\n    shown: true,\r\n    borderSize: 3,\r\n  }),\r\n  methods: {\r\n    setBorderWidth() {\r\n      const i = this.$refs.side_window.$el.querySelector(\r\n        '.v-navigation-drawer__border',\r\n      );\r\n      i.style.width = `${this.borderSize}px`;\r\n      i.style.cursor = 'ew-resize';\r\n    },\r\n    setEvents() {\r\n      const minSize = this.borderSize + 300;\r\n      const el = this.$refs.side_window.$el;\r\n      const drawerBorder = el.querySelector('.v-navigation-drawer__border');\r\n      const vm = this;\r\n      const direction = el.classList.contains('v-navigation-drawer--right')\r\n        ? 'right'\r\n        : 'left';\r\n\r\n      function resize(e) {\r\n        document.body.style.cursor = 'ew-resize';\r\n        const f = direction === 'right'\r\n          ? document.body.scrollWidth - e.clientX\r\n          : e.clientX;\r\n        el.style.width = `${f}px`;\r\n      }\r\n\r\n      drawerBorder.addEventListener(\r\n        'mousedown',\r\n        (e) => {\r\n          if (e.offsetX < minSize) {\r\n            // m_pos = e.x;\r\n            el.style.transition = 'initial';\r\n            document.addEventListener('mousemove', resize, false);\r\n          }\r\n        },\r\n        false,\r\n      );\r\n\r\n      document.addEventListener(\r\n        'mouseup',\r\n        () => {\r\n          el.style.transition = '';\r\n          vm.width = el.style.width;\r\n          document.body.style.cursor = '';\r\n          document.removeEventListener('mousemove', resize, false);\r\n        },\r\n        false,\r\n      );\r\n    },\r\n  },\r\n  mounted() {\r\n    this.setBorderWidth();\r\n    this.setEvents();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SideWindow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SideWindow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SideWindow.vue?vue&type=template&id=12d46b9c&scoped=true&\"\nimport script from \"./SideWindow.vue?vue&type=script&lang=js&\"\nexport * from \"./SideWindow.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12d46b9c\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\ninstallComponents(component, {VNavigationDrawer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.value != null)?_c('v-card',{attrs:{\"id\":(\"region-\" + (_vm.value.id)),\"min-width\":\"200\",\"outlined\":\"\"}},[(_vm.value.state === 'idle')?_c('AnnotationIdleCard',{on:{\"peep\":_vm.peep,\"edit-annotation\":_vm.editRegion,\"dismiss-annotation\":_vm.dismissAnnotation},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}):(_vm.value.state === 'editing')?_c('AnnotationEditingCard',{on:{\"peep\":_vm.peep,\"cancel-edit\":_vm.cancelEdit,\"annotation-update\":_vm.updateRender,\"save-annotation\":_vm.saveAnnotation},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}):(_vm.value.state === 'importing')?_c('AnnotationImportingCard',{on:{\"peep\":_vm.peep,\"dismiss-annotation\":_vm.dismissAnnotation,\"annotation-update\":_vm.updateRender,\"import-annotation\":_vm.importAnnotation},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}):(_vm.value.state === 'feedback'|| _vm.value.state === 'feedback-editing')?_c('AnnotationFeedbackCard',{on:{\"peep\":_vm.peep,\"annotation-update\":_vm.updateRender,\"annotation-feedback\":_vm.annotationFeedback},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card-title',{staticClass:\"title-nowrap\"},[_c('v-avatar',{staticClass:\"mr-2\",attrs:{\"size\":\"18\",\"color\":_vm.labelColor}}),_c('span',[_vm._v(_vm._s(_vm.cardTitle))])],1),(_vm.value.description != null)?_c('v-card-text',[_vm._v(\"\\n    \"+_vm._s(_vm.value.description)+\"\\n  \")]):_c('v-card-text',[_c('a',{attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":_vm.editProperties}},[_vm._v(\"Edit properties\")])]),_c('v-divider'),_c('v-card-actions',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.peep}},[_c('v-icon',[_vm._v(\"mdi-eye\")])],1),_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.dismissAnnotation}},[_vm._v(\"Remove\")]),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){return _vm.editRegion(_vm.value)}}},[_vm._v(\"Edit\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-card-title class=\"title-nowrap\">\n      <v-avatar size=\"18\" class=\"mr-2\" :color=\"labelColor\"/>\n      <span>{{ cardTitle }}</span>\n    </v-card-title>\n    <v-card-text v-if=\"value.description != null\">\n      {{ value.description }}\n    </v-card-text>\n    <v-card-text v-else>\n      <a href=\"javascript:void(0)\" @click=\"editProperties\">Edit properties</a>\n    </v-card-text>\n    <v-divider/>\n    <v-card-actions>\n      <v-btn icon @click=\"peep\">\n        <v-icon>mdi-eye</v-icon>\n      </v-btn>\n      <v-spacer/>\n      <v-btn text @click=\"dismissAnnotation\">Remove</v-btn>\n      <v-btn text @click=\"editRegion(value)\">Edit</v-btn>\n    </v-card-actions>\n  </div>\n</template>\n\n<script>\nimport { Annotation, EventManager } from '@/SliceDrawer';\n\nexport default {\n  name: 'AnnotationIdleCard',\n  computed: {\n    cardTitle() {\n      if (this.value.title != null && this.value.title !== '') {\n        return this.value.title;\n      }\n      return this.value.label.name;\n    },\n    labelColor() {\n      const { color } = this.value.label;\n      return `rgb(${color[0]},${color[1]},${color[2]})`;\n    },\n  },\n  methods: {\n    editRegion(annotation) {\n      this.updating_label = true;\n      // this.$emit('edit-annotation', region);\n      EventManager.getInstance()\n        .editAnnotation(annotation);\n    },\n    dismissAnnotation() {\n      this.updating_label = false;\n      this.$emit('dismiss-annotation', this.value);\n    },\n    peep() {\n      // this.$emit('peep', this.value);\n      EventManager.getInstance()\n        .peepAnnotation(this.value);\n    },\n    editProperties() {\n\n    },\n  },\n  props: { value: { type: Annotation } },\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationIdleCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationIdleCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnnotationIdleCard.vue?vue&type=template&id=75b186ef&scoped=true&\"\nimport script from \"./AnnotationIdleCard.vue?vue&type=script&lang=js&\"\nexport * from \"./AnnotationIdleCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75b186ef\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAvatar,VBtn,VCardActions,VCardText,VCardTitle,VDivider,VIcon,VSpacer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card-title',{staticClass:\"title-nowrap\"},[_c('v-avatar',{staticClass:\"mr-2\",attrs:{\"size\":\"18\",\"color\":_vm.genColor(_vm.value.label.color)}}),_c('v-text-field',{attrs:{\"label\":\"Annotation title\"},model:{value:(_vm.value.title),callback:function ($$v) {_vm.$set(_vm.value, \"title\", $$v)},expression:\"value.title\"}})],1),_c('v-card-text',{on:{\"click\":function($event){$event.stopPropagation();}}},[_c('v-text-field',{attrs:{\"label\":\"Description\"},model:{value:(_vm.value.description),callback:function ($$v) {_vm.$set(_vm.value, \"description\", $$v)},expression:\"value.description\"}}),_c('v-chip-group',{attrs:{\"mandatory\":\"\",\"column\":\"\"},model:{value:(_vm.selectedLabel),callback:function ($$v) {_vm.selectedLabel=$$v},expression:\"selectedLabel\"}},_vm._l((_vm.projectLabels),function(label){return _c('v-chip',{key:label.id,attrs:{\"color\":_vm.genColor(label.color),\"outlined\":\"\",\"filter\":\"\",\"value\":label.id}},[_vm._v(\"\\n        \"+_vm._s(label.name)+\"\\n      \")])}),1)],1),_c('v-divider'),_c('v-card-actions',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.peep}},[_c('v-icon',[_vm._v(\"mdi-eye\")])],1),_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.cancelEdit}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.saveRegion}},[_vm._v(\"Save\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-card-title class=\"title-nowrap\">\n      <v-avatar size=\"18\" class=\"mr-2\" :color=\"genColor(value.label.color)\"/>\n      <v-text-field v-model=\"value.title\" label=\"Annotation title\"/>\n    </v-card-title>\n    <v-card-text @click.stop>\n      <v-text-field v-model=\"value.description\" label=\"Description\"/>\n      <v-chip-group v-model=\"selectedLabel\" mandatory column>\n        <v-chip :color=\"genColor(label.color)\" outlined\n                v-for=\"label in projectLabels\" filter :value=\"label.id\"\n                :key=\"label.id\">\n          {{ label.name }}\n        </v-chip>\n      </v-chip-group>\n    </v-card-text>\n    <v-divider/>\n    <v-card-actions>\n      <v-btn icon @click=\"peep\"><v-icon>mdi-eye</v-icon></v-btn>\n      <v-spacer/>\n      <v-btn text @click=\"cancelEdit\">Cancel</v-btn>\n      <v-btn text @click=\"saveRegion\">Save</v-btn>\n    </v-card-actions>\n  </div>\n</template>\n\n<script>\nimport { Annotation } from '@/SliceDrawer';\n\nexport default {\n  name: 'AnnotationEditingCard',\n  watch: {\n    'value.label': {\n      immediate: true,\n      handler(newLabel) {\n        this.selectedLabel = newLabel.id;\n      },\n    },\n    selectedLabel(newLabelId) {\n      this.value.label = this.projectLabels[newLabelId];\n      this.updateRender();\n    },\n  },\n  computed: {\n    cardTitle() {\n      if (this.value.title != null && this.value.title !== '') {\n        return this.value.title;\n      }\n      return this.value.label.name;\n    },\n    projectLabels() {\n      const labels = {};\n      const data = this.$store.state.session.task.project.labels;\n      for (let i = 0; i < data.length; i += 1) {\n        labels[data[i].id] = data[i];\n      }\n      return labels;\n    },\n  },\n  data() {\n    return {\n      selectedLabel: null,\n    };\n  },\n  methods: {\n    genColor(color) {\n      return `rgb(${color[0]},${color[1]},${color[2]})`;\n    },\n    editRegion() {\n      this.$emit('edit-annotation', this.value);\n    },\n    saveRegion() {\n      this.$emit('save-annotation', this.value);\n    },\n    cancelEdit() {\n      this.$emit('cancel-edit');\n    },\n    dismissAnnotation() {\n      this.$emit('dismiss-annotation', this.value);\n    },\n\n    updateRender() {\n      this.$emit('annotation-update');\n    },\n    peep() {\n      this.$emit('peep', this.value);\n    },\n  },\n  mounted() {\n  },\n  props: { value: { type: Annotation } },\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationEditingCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationEditingCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnnotationEditingCard.vue?vue&type=template&id=7ab55195&scoped=true&\"\nimport script from \"./AnnotationEditingCard.vue?vue&type=script&lang=js&\"\nexport * from \"./AnnotationEditingCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ab55195\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VChipGroup } from 'vuetify/lib/components/VChipGroup';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VAvatar,VBtn,VCardActions,VCardText,VCardTitle,VChip,VChipGroup,VDivider,VIcon,VSpacer,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card-title',{staticClass:\"title-nowrap\"},[_c('v-avatar',{staticClass:\"mr-2\",attrs:{\"size\":\"18\",\"color\":_vm.genColor(_vm.value.label.color)}}),_c('span',[_vm._v(_vm._s(_vm.cardTitle))])],1),(_vm.updatingLabel)?_c('v-card-text',{on:{\"click\":function($event){$event.stopPropagation();}}},[_c('v-chip-group',{attrs:{\"mandatory\":\"\",\"column\":\"\"},model:{value:(_vm.feedbackLabelId),callback:function ($$v) {_vm.feedbackLabelId=$$v},expression:\"feedbackLabelId\"}},_vm._l((_vm.projectLabels),function(label){return _c('v-chip',{key:label.id,attrs:{\"color\":_vm.genColor(label.color),\"outlined\":\"\",\"filter\":\"\",\"value\":label.id}},[_vm._v(\"\\n        \"+_vm._s(label.name)+\"\\n      \")])}),1)],1):_vm._e(),(_vm.value.feedback.id != null)?_c('v-card-text',[(_vm.value.feedback.feedback === 0)?_c('div',[_c('v-icon',[_vm._v(\"mdi-check\")]),_vm._v(\"\\n      Correct annotation\\n    \")],1):_c('div',[_c('p',{staticClass:\"ma-0\"},[_vm._v(\"\\n        \"+_vm._s(_vm.feedback[_vm.value.feedback.feedback])+\"\\n      \")]),_c('p',{staticClass:\"ma-0\"},[_vm._v(\"Correct label:\\n        \"),_c('v-avatar',{staticClass:\"ml-2 mr-1\",attrs:{\"size\":\"16\",\"color\":_vm.genColor(_vm.feedbackLabel.color)}}),_vm._v(\"\\n        \"+_vm._s(_vm.feedbackLabel.name)+\"\\n      \")],1),(_vm.value.feedback.geometry != null)?_c('p',{staticClass:\"ma-0\"},[_c('v-checkbox',{staticClass:\"ma-0\",attrs:{\"label\":\"Show geometry correction\",\"hide-details\":\"\"},on:{\"change\":_vm.annotationUpdate},model:{value:(_vm.value.drawFeedback),callback:function ($$v) {_vm.$set(_vm.value, \"drawFeedback\", $$v)},expression:\"value.drawFeedback\"}})],1):_vm._e()])]):_vm._e(),_c('v-divider'),_c('v-card-actions',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.peep}},[_c('v-icon',[_vm._v(\"mdi-eye\")])],1),_c('v-spacer'),(_vm.updatingLabel)?_c('div',[_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.cancelEdit}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.saveFeedback}},[_vm._v(\"Save\")])],1):(_vm.value.feedback.id == null || _vm.undoing)?_c('div',[_c('v-menu',{scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"text\":\"\"}},'v-btn',attrs,false),on),[_vm._v(\"Incorrect\")])]}}])},[_c('v-list',_vm._l((_vm.incorrectOptions),function(item,index){return _c('v-list-item',{key:index,on:{\"click\":item.func}},[_c('v-list-item-title',[_vm._v(_vm._s(item.text))])],1)}),1)],1),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.feedbackCorrect}},[_vm._v(\"Correct\")])],1):(_vm.value.feedback.id != null)?_c('div',[_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){_vm.undoing = true}}},[_vm._v(\"Undo\")])],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-card-title class=\"title-nowrap\">\n      <v-avatar size=\"18\" class=\"mr-2\" :color=\"genColor(value.label.color)\"/>\n      <span>{{ cardTitle }}</span>\n    </v-card-title>\n    <v-card-text v-if=\"updatingLabel\" @click.stop>\n      <v-chip-group v-model=\"feedbackLabelId\" mandatory column>\n        <v-chip :color=\"genColor(label.color)\" outlined\n                v-for=\"label in projectLabels\" filter :value=\"label.id\"\n                :key=\"label.id\">\n          {{ label.name }}\n        </v-chip>\n      </v-chip-group>\n    </v-card-text>\n    <v-card-text v-if=\"value.feedback.id != null\">\n      <div v-if=\"value.feedback.feedback === 0\">\n        <v-icon>mdi-check</v-icon>\n        Correct annotation\n      </div>\n      <div v-else>\n        <p class=\"ma-0\">\n          {{ feedback[value.feedback.feedback] }}\n        </p>\n        <p class=\"ma-0\">Correct label:\n          <v-avatar size=\"16\" class=\"ml-2 mr-1\"\n                    :color=\"genColor(feedbackLabel.color)\"/>\n          {{ feedbackLabel.name }}\n        </p>\n        <p class=\"ma-0\" v-if=\"value.feedback.geometry != null\">\n          <v-checkbox v-model=\"value.drawFeedback\" class=\"ma-0\" label=\"Show geometry correction\"\n                      @change=\"annotationUpdate\" hide-details/>\n        </p>\n      </div>\n    </v-card-text>\n    <!--    <v-card-text v-if=\"value.description != null && !updatingLabel\">-->\n    <!--      {{ value.description }}-->\n    <!--    </v-card-text>-->\n    <v-divider/>\n    <v-card-actions>\n      <v-btn icon @click=\"peep\"><v-icon>mdi-eye</v-icon></v-btn>\n      <v-spacer/>\n      <div v-if=\"updatingLabel\">\n        <v-btn text @click=\"cancelEdit\">Cancel</v-btn>\n        <v-btn text @click=\"saveFeedback\">Save</v-btn>\n      </div>\n      <div v-else-if=\"value.feedback.id == null || undoing\">\n        <v-menu>\n          <template v-slot:activator=\"{ on, attrs }\">\n            <v-btn text v-bind=\"attrs\" v-on=\"on\">Incorrect</v-btn>\n          </template>\n          <v-list>\n            <v-list-item v-for=\"(item, index) in incorrectOptions\" :key=\"index\" @click=\"item.func\">\n              <v-list-item-title>{{ item.text }}</v-list-item-title>\n            </v-list-item>\n          </v-list>\n        </v-menu>\n        <v-btn text @click=\"feedbackCorrect\">Correct</v-btn>\n      </div>\n      <div v-else-if=\"value.feedback.id != null\">\n        <v-btn text @click=\"undoing = true\">Undo</v-btn>\n      </div>\n    </v-card-actions>\n  </div>\n</template>\n\n<script>\nimport { Annotation } from '@/SliceDrawer';\n\nexport default {\n  name: 'AnnotationFeedbackCard',\n  watch: {\n    value: {\n      immediate: true,\n      handler(newValue) {\n        if (newValue.feedback.label_id != null) {\n          this.feedbackLabelId = newValue.feedback.label_id;\n        } else {\n          this.feedbackLabelId = newValue.label.id;\n        }\n      },\n\n    },\n    'value.state': function (newState, oldState) {\n      if (oldState === 'feedback-editing' && newState === 'feedback') {\n        this.updatingLabel = false;\n      }\n    },\n    'value.feedback.label_id': function () {\n      this.annotationUpdate();\n    },\n    feedbackLabelId(newFeedbackLabelId) {\n      this.value.feedback.label_id = newFeedbackLabelId;\n      this.annotationUpdate();\n    },\n  },\n  computed: {\n    cardTitle() {\n      if (this.value.title != null && this.value.title !== '') {\n        return this.value.title;\n      }\n      return this.value.label.name;\n    },\n    projectLabels() {\n      const labels = {};\n      const data = this.$store.state.session.task.project.labels;\n      for (let i = 0; i < data.length; i += 1) {\n        labels[data[i].id] = data[i];\n      }\n      return labels;\n    },\n    feedbackLabel() {\n      if (this.value.feedback != null && this.value.feedback.label_id != null) {\n        return this.projectLabels[this.value.feedback.label_id];\n      }\n      return this.projectLabels[this.value.label.id];\n    },\n  },\n  data() {\n    return {\n      incorrectOptions: [\n        {\n          text: 'Wrong label',\n          func: this.feedbackWrongLabel,\n        },\n        {\n          text: 'Wrong region',\n          func: this.feedbackWrongRegion,\n        },\n      ],\n      feedbackLabelId: null,\n      updatingLabel: false,\n      currentFeedback: null,\n      undoing: false,\n      feedback: [\n        '✓ Correct',\n        '✗ Wrong label',\n        '✗ Wrong region',\n      ],\n    };\n  },\n  methods: {\n    genColor(color) {\n      return `rgb(${color[0]},${color[1]},${color[2]})`;\n    },\n    annotationUpdate() {\n      this.$nextTick(() => {\n        this.$emit('annotation-update');\n      });\n    },\n    editRegion(region) {\n      this.updatingLabel = true;\n      this.$emit('edit-region', region);\n    },\n    saveFeedback() {\n      this.updatingLabel = false;\n      if (this.currentFeedback === 'wrong-label') {\n        this.value.feedback.feedback = 1;\n      } else if (this.currentFeedback === 'wrong-region') {\n        this.value.feedback.feedback = 2;\n      }\n      this.$emit('annotation-feedback', this.currentFeedback, this.value);\n    },\n    cancelEdit() {\n      this.updatingLabel = false;\n      this.$emit('cancel-edit');\n    },\n    dismissAnnotation() {\n      this.$emit('dismiss-annotation', this.value);\n    },\n    peep() {\n      this.$emit('peep', this.value);\n    },\n\n    feedbackWrongLabel() {\n      if (this.updatingLabel === false) {\n        this.undoing = false;\n        this.currentFeedback = 'wrong-label';\n        this.updatingLabel = true;\n        this.value.feedback.feedback = 1;\n      }\n    },\n    feedbackWrongRegion() {\n      if (this.updatingLabel === false) {\n        this.undoing = false;\n        this.updatingLabel = true;\n        this.currentFeedback = 'wrong-region';\n        this.$emit('annotation-feedback', 'edit-region', this.value);\n      }\n    },\n    feedbackCorrect() {\n      this.undoing = false;\n      this.$emit('annotation-feedback', 'correct', this.value);\n    },\n  },\n  props: { value: { type: Annotation } },\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationFeedbackCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationFeedbackCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnnotationFeedbackCard.vue?vue&type=template&id=3745115c&scoped=true&\"\nimport script from \"./AnnotationFeedbackCard.vue?vue&type=script&lang=js&\"\nexport * from \"./AnnotationFeedbackCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3745115c\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VChipGroup } from 'vuetify/lib/components/VChipGroup';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAvatar,VBtn,VCardActions,VCardText,VCardTitle,VCheckbox,VChip,VChipGroup,VDivider,VIcon,VList,VListItem,VListItemTitle,VMenu,VSpacer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.value.currentlyImporting)?_c('span',{staticClass:\"importing-pending-warning\"},[_vm._v(\"\\n    Pending import\\n\\n  \")]):_vm._e(),_c('v-card-title',{staticClass:\"title-nowrap\"},[_c('v-avatar',{staticClass:\"mr-2\",attrs:{\"size\":\"18\",\"color\":_vm.genColor(_vm.value.label.color)}}),_c('v-text-field',{attrs:{\"label\":\"Annotation title\"},model:{value:(_vm.value.title),callback:function ($$v) {_vm.$set(_vm.value, \"title\", $$v)},expression:\"value.title\"}})],1),_c('v-card-text',{on:{\"click\":function($event){$event.stopPropagation();}}},[_c('v-text-field',{attrs:{\"label\":\"Description\"},model:{value:(_vm.value.description),callback:function ($$v) {_vm.$set(_vm.value, \"description\", $$v)},expression:\"value.description\"}}),_c('v-chip-group',{attrs:{\"mandatory\":\"\",\"column\":\"\"},on:{\"change\":_vm.annotationUpdate},model:{value:(_vm.selectedLabel),callback:function ($$v) {_vm.selectedLabel=$$v},expression:\"selectedLabel\"}},_vm._l((_vm.projectLabels),function(label){return _c('v-chip',{key:label.id,attrs:{\"color\":_vm.genColor(label.color),\"outlined\":\"\",\"filter\":\"\",\"value\":label.id}},[_vm._v(\"\\n        \"+_vm._s(label.name)+\"\\n      \")])}),1)],1),_c('v-divider'),_c('v-card-actions',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.peep}},[_c('v-icon',[_vm._v(\"mdi-eye\")])],1),_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){$event.preventDefault();return _vm.dismissAnnotation.apply(null, arguments)}}},[_vm._v(\"Dismiss\")]),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){$event.preventDefault();return _vm.importAnnotation.apply(null, arguments)}}},[_vm._v(\"Import\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <span v-if=\"value.currentlyImporting\" class=\"importing-pending-warning\">\n      Pending import\n\n    </span>\n    <v-card-title class=\"title-nowrap\">\n      <v-avatar size=\"18\" class=\"mr-2\" :color=\"genColor(value.label.color)\"/>\n      <v-text-field v-model=\"value.title\" label=\"Annotation title\"/>\n    </v-card-title>\n    <v-card-text @click.stop>\n      <v-text-field v-model=\"value.description\" label=\"Description\"/>\n\n      <v-chip-group v-model=\"selectedLabel\" mandatory column @change=\"annotationUpdate\">\n        <v-chip :color=\"genColor(label.color)\" outlined\n                v-for=\"label in projectLabels\" filter :value=\"label.id\"\n                :key=\"label.id\">\n          {{ label.name }}\n        </v-chip>\n      </v-chip-group>\n    </v-card-text>\n    <v-divider/>\n    <v-card-actions>\n      <v-btn icon @click=\"peep\"><v-icon>mdi-eye</v-icon></v-btn>\n      <v-spacer/>\n      <v-btn text @click.prevent=\"dismissAnnotation\">Dismiss</v-btn>\n      <v-btn text @click.prevent=\"importAnnotation\">Import</v-btn>\n    </v-card-actions>\n  </div>\n</template>\n\n<script>\nimport { Annotation } from '@/SliceDrawer';\n\nexport default {\n  name: 'AnnotationIdleCard',\n  watch: {\n    'value.label': {\n      immediate: true,\n      handler(newValue) {\n        this.selectedLabel = newValue.id;\n      },\n    },\n    selectedLabel(newLabelId) {\n      this.value.label = this.projectLabels[newLabelId];\n      this.annotationUpdate();\n    },\n  },\n  computed: {\n    cardTitle() {\n      if (this.value.title != null && this.value.title !== '') {\n        return this.value.title;\n      }\n      return this.value.label.name;\n    },\n    projectLabels() {\n      const labels = {};\n      const data = this.$store.state.session.task.project.labels;\n      for (let i = 0; i < data.length; i += 1) {\n        labels[data[i].id] = data[i];\n      }\n      return labels;\n    },\n  },\n  data() {\n    return {\n      selectedLabel: null,\n    };\n  },\n  methods: {\n    genColor(color) {\n      return `rgb(${color[0]},${color[1]},${color[2]})`;\n    },\n\n    importAnnotation() {\n      this.$emit('import-annotation', this.value);\n    },\n    dismissAnnotation() {\n      this.$emit('dismiss-annotation', this.value);\n    },\n    annotationUpdate() {\n      this.$nextTick(() => {\n        this.$emit('annotation-update');\n      });\n    },\n    peep() {\n      this.$emit('peep', this.value);\n    },\n  },\n  props: { value: { type: Annotation } },\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationImportingCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationImportingCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnnotationImportingCard.vue?vue&type=template&id=4808784e&scoped=true&\"\nimport script from \"./AnnotationImportingCard.vue?vue&type=script&lang=js&\"\nexport * from \"./AnnotationImportingCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4808784e\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VChipGroup } from 'vuetify/lib/components/VChipGroup';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VAvatar,VBtn,VCardActions,VCardText,VCardTitle,VChip,VChipGroup,VDivider,VIcon,VSpacer,VTextField})\n","<template>\n  <v-card v-if=\"value != null\" :id=\"`region-${value.id}`\" min-width=\"200\" outlined>\n    <AnnotationIdleCard\n        v-if=\"value.state === 'idle'\"\n        v-model=\"value\"\n        v-on:peep=\"peep\"\n        v-on:edit-annotation=\"editRegion\"\n        v-on:dismiss-annotation=\"dismissAnnotation\"/>\n    <AnnotationEditingCard\n        v-else-if=\"value.state === 'editing'\"\n        v-model=\"value\"\n        v-on:peep=\"peep\"\n        v-on:cancel-edit=\"cancelEdit\"\n        v-on:annotation-update=\"updateRender\"\n        v-on:save-annotation=\"saveAnnotation\"/>\n    <AnnotationImportingCard\n        v-else-if=\"value.state === 'importing'\"\n        v-model=\"value\"\n        v-on:peep=\"peep\"\n        v-on:dismiss-annotation=\"dismissAnnotation\"\n        v-on:annotation-update=\"updateRender\"\n        v-on:import-annotation=\"importAnnotation\"/>\n    <AnnotationFeedbackCard\n        v-else-if=\"value.state === 'feedback'|| value.state === 'feedback-editing'\"\n        v-model=\"value\"\n        v-on:peep=\"peep\"\n        v-on:annotation-update=\"updateRender\"\n        v-on:annotation-feedback=\"annotationFeedback\"/>\n  </v-card>\n</template>\n\n<script>\nimport _ from 'lodash';\nimport { Annotation } from '@/SliceDrawer';\nimport AnnotationIdleCard from '@/components/AnnotationIdleCard';\nimport AnnotationEditingCard from '@/components/AnnotationEditingCard';\nimport AnnotationFeedbackCard from '@/components/AnnotationFeedbackCard';\nimport AnnotationImportingCard from '@/components/AnnotationImportingCard';\n\nexport default {\n  name: 'AnnotationCard',\n  components: {\n    AnnotationFeedbackCard,\n    AnnotationEditingCard,\n    AnnotationImportingCard,\n    AnnotationIdleCard,\n  },\n  computed: {\n    task_type() {\n      return this.$store.state.session.type;\n    },\n    project_labels() {\n      const labels = {};\n      const data = this.$store.state.session.task.project.labels;\n      for (let i = 0; i < data.length; i += 1) {\n        labels[data[i].id] = data[i];\n      }\n      return labels;\n    },\n  },\n  watch: {\n    value: {\n      immediate: true,\n      handler(newValue) {\n        if (newValue == null) return;\n        this.originalLabel = _.cloneDeep(newValue.label);\n        if (newValue.currentlyImporting) {\n          // If this annotation is imported, we immediately allow to update its label\n          this.updating_label = true;\n        }\n      },\n    },\n    editing: {\n      handler(newValue) {\n        // if the editing value is null, then we know we can disable the label update\n        if (newValue == null && this.value.currentlyImporting) {\n          this.updating_label = false;\n        }\n      },\n    },\n  },\n  data() {\n    return {};\n  },\n  methods: {\n    updateRender() {\n      this.$emit('annotation-update');\n    },\n    peep() {\n      this.$emit('annotation-peep', this.value);\n    },\n    undo() {\n      if (this.drawing_swapped) {\n        this.swapDrawings();\n      }\n      this.undoing_feedback = true;\n    },\n\n    annotationFeedback(feedback, annotation) {\n      this.$emit('annotation-feedback', feedback, annotation);\n    },\n\n    swapDrawings() {\n      if (!this.drawing_swapped) {\n        this.originalRegion = this.value.geometry;\n        this.value.geometry = this.value.feedback.geometry;\n      } else {\n        this.value.geometry = this.originalRegion;\n      }\n      this.drawing_swapped = !this.drawing_swapped;\n      this.$emit('annotation-update');\n    },\n    genColor(color) {\n      return `rgb(${color[0]},${color[1]},${color[2]})`;\n    },\n    feedbackWrongLabel() {\n      this.undoing_feedback = false;\n      this.$emit('annotation-feedback', 'wrong-label', this.value);\n    },\n    feedbackWrongRegion() {\n      if (this.drawing_swapped) {\n        // If the drawing was swapped, we swap them back\n        this.value.geometry = this.originalRegion;\n        this.drawing_swapped = false;\n      }\n      this.$emit('annotation-feedback', 'wrong-region', this.value);\n      this.undoing_feedback = false;\n    },\n    feedbackCorrect() {\n      this.$emit('annotation-feedback', 'correct', this.value);\n      this.undoing_feedback = false;\n    },\n\n    editRegion(annotation) {\n      this.updating_label = true;\n      this.$emit('edit-annotation', annotation);\n    },\n    saveAnnotation(annotation) {\n      this.updating_label = false;\n      this.$emit('save-annotation', annotation);\n    },\n    cancelEdit() {\n      this.updating_label = false;\n      this.$emit('cancel-edit');\n    },\n    importAnnotation() {\n      this.$emit('import-annotation', this.value);\n    },\n    dismissAnnotation() {\n      this.updating_label = false;\n      this.$emit('dismiss-annotation', this.value);\n    },\n  },\n  props: {\n    editing: { type: Boolean },\n    value: { type: Annotation },\n  },\n};\n</script>\n\n<style scoped>\n.importing-pending-warning {\n  background-color: #ff6f00;\n  padding: 0 10px;\n  border-radius: 10px;\n  font-size: 12px;\n}\n\n.title-nowrap {\n  display: block;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  width: 100%;\n  white-space: nowrap;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnnotationCard.vue?vue&type=template&id=581f2eed&scoped=true&\"\nimport script from \"./AnnotationCard.vue?vue&type=script&lang=js&\"\nexport * from \"./AnnotationCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AnnotationCard.vue?vue&type=style&index=0&id=581f2eed&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"581f2eed\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\ninstallComponents(component, {VCard})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[_c('v-card-title',[_vm._v(\"Annotation stats\")]),(_vm.stats != null)?_c('v-card-text',[_c('div',{staticClass:\"link-container\"},[_c('a',{class:(\"link \" + (_vm.stat === 'area' ? 'selected' : '')),on:{\"click\":function($event){return _vm.switchMode('area', 'area_perc')}}},[_vm._v(\"Area (all)\")]),_c('a',{class:(\"link \" + (_vm.stat === 'count' ? 'selected' : '')),on:{\"click\":function($event){return _vm.switchMode('count', 'count_perc')}}},[_vm._v(\"Count\\n        (all)\")]),_c('a',{class:(\"link \" + (_vm.stat === 'desc' ? 'selected' : '')),on:{\"click\":function($event){return _vm.switchMode('desc', 'desc_perc')}}},[_vm._v(\"Count\\n        (comments)\")]),_c('a',{class:(\"link \" + (_vm.stat === 'certain_area' ? 'selected' : '')),on:{\"click\":function($event){return _vm.switchMode('certain_area', 'certain_area_perc')}}},[_vm._v(\"Area (not including comments)\")])]),_vm._l((Object.keys(_vm.stats)),function(item){return _c('div',[_c('span',[_vm._v(_vm._s(item)+\" (\"+_vm._s(_vm.stats[item][_vm.stat])+\")\")]),_c('v-progress-linear',{attrs:{\"value\":_vm.stats[item][_vm.statPerc]*100,\"color\":_vm.genColor(_vm.stats[item].color),\"readonly\":true}})],1)})],2):_c('v-card-text',[_vm._v(\"\\n    Stats currently unavailable.\\n  \")]),_c('v-divider'),_c('v-card-actions',[_c('v-switch',{staticClass:\"ma-0\",attrs:{\"hide-details\":\"\",\"label\":\"Slide only stats\"},model:{value:(_vm.slideOnly),callback:function ($$v) {_vm.slideOnly=$$v},expression:\"slideOnly\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card>\r\n    <v-card-title>Annotation stats</v-card-title>\r\n    <v-card-text v-if=\"stats != null\">\r\n      <div class=\"link-container\">\r\n        <a :class=\"`link ${stat === 'area' ? 'selected' : ''}`\" @click=\"switchMode('area', 'area_perc')\">Area (all)</a>\r\n        <a :class=\"`link ${stat === 'count' ? 'selected' : ''}`\" @click=\"switchMode('count', 'count_perc')\">Count\r\n          (all)</a>\r\n        <a :class=\"`link ${stat === 'desc' ? 'selected' : ''}`\" @click=\"switchMode('desc', 'desc_perc')\">Count\r\n          (comments)</a>\r\n        <a :class=\"`link ${stat === 'certain_area' ? 'selected' : ''}`\"\r\n           @click=\"switchMode('certain_area', 'certain_area_perc')\">Area (not including comments)</a>\r\n      </div>\r\n      <div v-for=\"item in Object.keys(stats)\">\r\n        <span>{{ item }} ({{ stats[item][stat] }})</span>\r\n        <v-progress-linear :value=\"stats[item][statPerc]*100\" :color=\"genColor(stats[item].color)\" :readonly=\"true\"/>\r\n      </div>\r\n    </v-card-text>\r\n    <v-card-text v-else>\r\n      Stats currently unavailable.\r\n    </v-card-text>\r\n    <v-divider/>\r\n    <v-card-actions>\r\n      <v-switch class=\"ma-0\" hide-details label=\"Slide only stats\" v-model=\"slideOnly\"/>\r\n    </v-card-actions>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'SessionClassBalance',\r\n  watch: {\r\n    sessionId() {\r\n      this.refresh();\r\n    },\r\n    slideId() {\r\n      if (this.slideOnly) {\r\n        this.refresh();\r\n      }\r\n    },\r\n    slideOnly() {\r\n      this.refresh();\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      stats: null,\r\n      stat: 'area',\r\n      statPerc: 'area_perc',\r\n      slideOnly: false\r\n    };\r\n  },\r\n  methods: {\r\n    genColor(color) {\r\n      return `rgb(${color[0]}, ${color[1]}, ${color[2]})`;\r\n    },\r\n    switchMode(stat, statPerc) {\r\n      this.stat = stat;\r\n      this.statPerc = statPerc;\r\n    },\r\n    refresh() {\r\n      this.$post(`session/${this.sessionId}/${this.slideOnly ? this.slideId : 'all'}/class_balance`)\r\n          .then(res => {\r\n            this.stats = res;\r\n          })\r\n          .catch(err => alert(err));\r\n    }\r\n  },\r\n  mounted() {\r\n    this.refresh();\r\n  },\r\n  props: ['sessionId', 'slideId']\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.link {\r\n  text-decoration: underline;\r\n}\r\n\r\n.link.selected {\r\n  text-decoration: none;\r\n  font-weight: bolder;\r\n}\r\n\r\n.link-container {\r\n  display: inline-flex;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n  column-gap: 10px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionClassBalance.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionClassBalance.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SessionClassBalance.vue?vue&type=template&id=04e5cff2&scoped=true&\"\nimport script from \"./SessionClassBalance.vue?vue&type=script&lang=js&\"\nexport * from \"./SessionClassBalance.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SessionClassBalance.vue?vue&type=style&index=0&id=04e5cff2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04e5cff2\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\ninstallComponents(component, {VCard,VCardActions,VCardText,VCardTitle,VDivider,VProgressLinear,VSwitch})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[_c('div',{staticClass:\"pa-3 pb-0 text-h6 text--primary\"},[_vm._v(\"ML annotations analysis\")]),_c('div',{staticClass:\"pl-3 pr-3 text-center font-weight-thin card-description\"},[_vm._v(\"\\n    Overlay your annotations with ML-based predictions to improve your models.\\n  \")]),(!_vm.usedBefore)?_c('div',{staticClass:\"pl-3 pr-3 pb-3\"},[_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"ml-file-importer-input\",\"type\":\"file\"}}),_c('v-btn',{attrs:{\"block\":\"\",\"text\":\"\"},on:{\"click\":_vm.selectFile}},[_vm._v(\"Select .geojson file\")])],1):_c('div',{staticClass:\"pl-3 pr-3 pb-3\"},[_c('div',{staticClass:\"flex-container\"},[_c('v-slider',{staticClass:\"pl-2 pr-2\",staticStyle:{\"width\":\"50%\"},attrs:{\"hide-details\":\"\",\"prepend-icon\":\"mdi-circle-opacity\",\"step\":\"0\",\"thumb-label\":\"\",\"min\":\"0.0\",\"max\":\"1\"},scopedSlots:_vm._u([{key:\"thumb-label\",fn:function(ref){\nvar value = ref.value;\nreturn [_vm._v(\"\\n          \"+_vm._s(value.toFixed(2))+\"\\n        \")]}}]),model:{value:(_vm.drawingStyle.fillOpacity),callback:function ($$v) {_vm.$set(_vm.drawingStyle, \"fillOpacity\", $$v)},expression:\"drawingStyle.fillOpacity\"}}),_c('v-slider',{staticClass:\"pl-2 pr-2\",staticStyle:{\"width\":\"50%\"},attrs:{\"hide-details\":\"\",\"prepend-icon\":\"mdi-format-line-weight\",\"step\":\"1\",\"thumb-label\":\"\",\"min\":\"0\",\"max\":\"5\"},scopedSlots:_vm._u([{key:\"thumb-label\",fn:function(ref){\nvar value = ref.value;\nreturn [_vm._v(\"\\n          \"+_vm._s(value.toFixed(2))+\"\\n        \")]}}]),model:{value:(_vm.drawingStyle.lineWidth),callback:function ($$v) {_vm.$set(_vm.drawingStyle, \"lineWidth\", $$v)},expression:\"drawingStyle.lineWidth\"}})],1),_c('v-divider'),_c('v-btn',{attrs:{\"block\":\"\",\"text\":\"\"},on:{\"click\":_vm.clearOverlay}},[_vm._v(\"Clear overlay\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card>\n    <div class=\"pa-3 pb-0 text-h6 text--primary\">ML annotations analysis</div>\n    <div class=\"pl-3 pr-3 text-center font-weight-thin card-description\">\n      Overlay your annotations with ML-based predictions to improve your models.\n    </div>\n    <div class=\"pl-3 pr-3 pb-3\" v-if=\"!usedBefore\">\n      <input id=\"ml-file-importer-input\" type=\"file\" style=\"display: none\">\n      <v-btn block text @click=\"selectFile\">Select .geojson file</v-btn>\n    </div>\n    <div class=\"pl-3 pr-3 pb-3\" v-else>\n      <div class=\"flex-container\">\n        <v-slider hide-details class=\"pl-2 pr-2\"\n                  style=\"width: 50%\"\n                  prepend-icon=\"mdi-circle-opacity\"\n                  v-model=\"drawingStyle.fillOpacity\"\n                  step=\"0\"\n                  thumb-label\n                  min=\"0.0\" max=\"1\">\n          <template v-slot:thumb-label=\"{ value }\">\n            {{ value.toFixed(2) }}\n          </template>\n        </v-slider>\n        <v-slider hide-details class=\"pl-2 pr-2\"\n                  style=\"width: 50%\"\n                              prepend-icon=\"mdi-format-line-weight\"\n                  v-model=\"drawingStyle.lineWidth\"\n                  step=\"1\"\n                  thumb-label\n                  min=\"0\" max=\"5\">\n          <template v-slot:thumb-label=\"{ value }\">\n            {{ value.toFixed(2) }}\n          </template>\n        </v-slider>\n      </div>\n      <v-divider/>\n      <v-btn block text @click=\"clearOverlay\">Clear overlay</v-btn>\n    </div>\n  </v-card>\n</template>\n\n<script>\n\nimport { loadAnnotations, optimizePath } from '@/SliceDrawer';\n\nexport default {\n  name: 'MLPredictionsOverlapTool',\n  watch: {\n    drawingStyle: {\n      deep: true,\n      handler() {\n        this.$emit('style-changed', this.drawingStyle);\n      },\n    },\n  },\n  data() {\n    return {\n      usedBefore: false,\n      drawingStyle: {\n        fillOpacity: 0.3,\n        lineWidth: 1,\n        hoverOpacity: 0.3,\n      },\n    };\n  },\n  methods: {\n    clearOverlay() {\n      this.$emit('clear-overlay', null);\n      this.usedBefore = false;\n    },\n\n    selectFile() {\n      const input = document.getElementById('ml-file-importer-input');\n      input.onchange = (e) => {\n        const reader = new FileReader();\n        reader.readAsText(e.target.files[0], 'UTF-8');\n        reader.onload = (readerEvent) => {\n          const json = JSON.parse(readerEvent.target.result);\n          const slideId = this.currentSlide.id;\n          const annotations = json.features.map((feature, idx) => {\n            const geo = feature.geometry;\n            const label = feature.properties.label != null\n              ? feature.properties.label\n              : {\n                color: [0, 0, 0],\n                name: 'ML Annotation',\n              };\n            const description = feature.properties.description != null\n              ? feature.properties.description : null;\n            return {\n              id: `ai-annotation-${idx}`,\n              label,\n              description,\n              geometry: {\n                type: 'polygon',\n                points: optimizePath(geo.coordinates[0].map((coord) => ({\n                  x: coord[0],\n                  y: coord[1],\n                }))),\n              },\n              slide_id: slideId,\n              layer: 1,\n              state: 'overlay',\n            };\n          });\n          this.$emit('annotations', loadAnnotations({ 0: annotations })[0]);\n          this.usedBefore = true;\n        };\n      };\n      input.click();\n    },\n  },\n  props: ['currentSlide'],\n};\n</script>\n\n<style scoped>\n\n.flex-container {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.card-description {\n  font-size: 12px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MLPredictionsOverlapTool.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MLPredictionsOverlapTool.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MLPredictionsOverlapTool.vue?vue&type=template&id=5d34e24f&scoped=true&\"\nimport script from \"./MLPredictionsOverlapTool.vue?vue&type=script&lang=js&\"\nexport * from \"./MLPredictionsOverlapTool.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MLPredictionsOverlapTool.vue?vue&type=style&index=0&id=5d34e24f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5d34e24f\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\ninstallComponents(component, {VBtn,VCard,VDivider,VSlider})\n","<template>\n  <v-container style=\"overflow: hidden\">\n    <slice-viewer\n        ref=\"slice_viewer\"\n        :drawer=\"!session.completed && task_type === 0 && taskBelongsToUser\"\n        :tile-sources=\"tile_sources\"\n        :labels=\"project_labels\"\n        :labels-visibility=\"labelsVisible\"\n        :drawing-style=\"drawingStyle\"\n        :draw-events=\"draw_events\"\n        :slide-properties=\"currentSlide.properties\"\n        v-model=\"annotations[currentSlide.id]\"\n        v-on:region-clicked=\"regionClicked\"\n        v-on:new-draw=\"onNewRegionDraw\"\n        v-on:edit-draw=\"onEditRegionDraw\"/>\n    <side-window>\n      <v-toolbar dense fixed color=\"grey lighten-4\">\n        <v-toolbar-title>{{ task_type === 0 ? 'Annotation task' : 'Review task' }}</v-toolbar-title>\n        <template v-slot:extension>\n          <v-tabs v-model=\"selectedTab\">\n            <v-tab>View</v-tab>\n            <v-tab v-if=\"annotationTabVisible\">\n              Annotations ({{ annotations[currentSlide.id].length }})\n            </v-tab>\n          </v-tabs>\n        </template>\n      </v-toolbar>\n\n      <v-tabs-items v-model=\"selectedTab\">\n        <v-tab-item>\n          <!-- Controls tab -->\n          <v-container fluid grid-list-md>\n            <v-layout row wrap>\n              <v-flex v-if=\"task_type === 0\" cols=\"12\" sm=\"12\" md=\"6\">\n                <session-class-balance\n                    ref=\"classBalance\"\n                    :session-id=\"session_id\"\n                    :slide-id=\"currentSlide.id\"/>\n              </v-flex>\n              <v-flex cols=\"12\" sm=\"12\" md=\"6\">\n                <v-card>\n                  <v-card-title>Annotation visibility</v-card-title>\n                  <div class=\"pl-3 pr-3 pb-3\" style=\"max-height: 200px; overflow-y: auto\">\n\n                    <v-switch\n                        class=\"mt-0\"\n                        hide-details dense\n                        v-for=\"label in project_labels\"\n                        :key=\"label.id\"\n                        v-model=\"labelsVisible[label.name]\"\n                        :label=\"label.name\"\n                        :color=\"genColor(label.color)\"/>\n                    <v-switch\n                        class=\"mt-0\"\n                        hide-details dense\n                        label=\"Show importing\"\n                        v-model=\"drawingStyle[0].showImporting\"\n                    />\n                  </div>\n                  <div style=\"text-align: center;\">\n                    <a href=\"javascript:void(0)\"\n                       class=\"link-btn\"\n                       @click=\"labelAnnotationsVisibility(true)\">\n                      Select all\n                    </a> |\n                    <a href=\"javascript:void(0)\"\n                       class=\"link-btn\"\n                       @click=\"labelAnnotationsVisibility(false)\">\n                      Unselect all\n                    </a>\n                  </div>\n                  <v-divider></v-divider>\n                  <div class=\"flex-container\">\n                    <v-slider hide-details class=\"pl-2 pr-2\"\n                              style=\"width: 50%\"\n                              prepend-icon=\"mdi-circle-opacity\"\n                              v-model=\"drawingStyle[0].fillOpacity\"\n                              step=\"0\"\n                              thumb-label\n                              min=\"0.0\" max=\"1\">\n                      <template v-slot:thumb-label=\"{ value }\">\n                        {{ value.toFixed(2) }}\n                      </template>\n                    </v-slider>\n                    <v-slider hide-details class=\"pl-2 pr-2\"\n                              style=\"width: 50%\"\n                              prepend-icon=\"mdi-gesture-tap\"\n                              v-model=\"drawingStyle[0].hoverOpacity\"\n                              step=\"0\"\n                              thumb-label\n                              min=\"0.0\" max=\"1\">\n                      <template v-slot:thumb-label=\"{ value }\">\n                        {{ value.toFixed(2) }}\n                      </template>\n                    </v-slider>\n                    <div class=\"break\"/>\n                    <v-slider hide-details class=\"pl-2 pr-2\"\n                              style=\"width: 50%\"\n                              prepend-icon=\"mdi-format-line-weight\"\n                              v-model=\"drawingStyle[0].lineWidth\"\n                              step=\"1\"\n                              thumb-label\n                              min=\"1\" max=\"10\">\n                      <template v-slot:thumb-label=\"{ value }\">\n                        {{ value.toFixed(2) }}\n                      </template>\n                    </v-slider>\n                    <v-switch\n                        style=\"width: 50%; margin:0;\"\n                        hide-details\n                        v-model=\"highlightOnTab\" label=\"Highlight\"/>\n                  </div>\n                </v-card>\n              </v-flex>\n              <v-flex cols=\"12\" sm=\"12\" md=\"6\">\n                <v-card>\n                  <div class=\"pa-3 pb-0 text-h6 text--primary\">Task slides</div>\n                  <div class=\"pl-3 pr-3 text-center font-weight-thin card-description\">\n                    Select the slide you want to work with below.\n                  </div>\n                  <div class=\"pl-3 pr-3 pb-3\">\n\n                    <v-list dense shaped class=\"slides-list\">\n                      <v-list-item-group v-model=\"currentSlide\" color=\"orange\" mandatory>\n                        <v-list-item\n                            two-line\n                            v-for=\"slide in slides\" :key=\"slide.id\"\n                            :value=\"slide\">\n\n                          <v-list-item-content>\n                            <v-list-item-title v-text=\"slide.name\"/>\n                            <v-list-item-subtitle v-text=\"slide.properties.comment\"/>\n                          </v-list-item-content>\n                        </v-list-item>\n                      </v-list-item-group>\n                    </v-list>\n                  </div>\n                </v-card>\n              </v-flex>\n              <v-flex cols=\"12\" sm=\"12\" md=\"6\">\n                <v-card>\n                  <div class=\"pa-3 pb-0 text-h6 text--primary\">Task status</div>\n                  <div class=\"pl-3 pr-3 text-center font-weight-thin card-description\">\n                    Once you feel you are done with\n                    task you may mark it as completed.\n                  </div>\n                  <div class=\"pl-3 pr-3 pb-3\">\n                    <v-switch\n                        v-model=\"session.completed\"\n                        :disabled=\"!taskBelongsToUser\" label=\"Task completed\"/>\n                  </div>\n                </v-card>\n              </v-flex>\n              <v-flex cols=\"12\" sm=\"12\" md=\"6\" v-if=\"task_type === 1\">\n                <v-card>\n                  <div class=\"pa-3 pb-0 text-h6 text--primary\">Annotations to review</div>\n                  <div class=\"pl-3 pr-3 text-center font-weight-thin card-description\">\n                    List of user's annotations for this task that must be reviewed.\n                    Select the user's annotations you want to review at this time.\n                  </div>\n                  <div class=\"pl-3 pr-3 pb-3\">\n                    <v-radio-group v-model=\"revisingUserTask\">\n                      <v-radio value=\"none\" label=\"None\"/>\n                      <v-radio\n                          v-for=\"item in revisions\" :key=\"item.id\"\n                          :value=\"item.id\" :label=\"item.user\"/>\n                    </v-radio-group>\n                  </div>\n                </v-card>\n              </v-flex>\n              <v-flex cols=\"12\" sm=\"12\" md=\"6\" v-if=\"annotationImportingEnabled\">\n                <v-card>\n                  <div class=\"pa-3 pb-0 text-h6 text--primary\">Import annotations</div>\n                  <div class=\"pl-3 pr-3 text-center font-weight-thin card-description\">\n                    Select a geojson file to import its annotations to the currently selected slide.\n                  </div>\n                  <div v-if=\"confirmingImportAnnotations\" class=\"pl-3 pr-3 pb-3\">\n                    <v-btn @click=\"dismissAll\" text>Cancel</v-btn>\n                    <v-btn @click=\"importAll\" text>Import all</v-btn>\n                  </div>\n                  <div v-else class=\"pl-3 pr-3 pb-3\">\n                    <input id=\"file-importer-input\" type=\"file\" style=\"display: none\">\n                    <v-btn @click=\"importAnnotations\" block text>Select file</v-btn>\n                  </div>\n                </v-card>\n              </v-flex>\n              <v-flex cols=\"12\" sm=\"12\" md=\"6\">\n                <MLPredictionsOverlapTool\n                    :current-slide=\"currentSlide\"\n                    v-on:clear-overlay=\"onClearOverlayAnnotations\"\n                    v-on:annotations=\"onOverlayAnnotations\"\n                    v-on:style-changed=\"onOverlayStyleChanged\"/>\n              </v-flex>\n            </v-layout>\n          </v-container>\n        </v-tab-item>\n        <v-tab-item v-if=\"annotations[currentSlide.id] != null\">\n          <v-container fluid grid-list-md>\n            <v-layout row wrap id=\"annotation-tab\">\n              <v-flex cols=\"12\" sm=\"12\" md=\"6\"\n                      v-for=\"idx in annotationsLister.pageMax\"\n                      :key=\"idx\">\n                <annotation-card\n                    v-model=\"annotations[currentSlide.id][annotationsListStart + idx]\"\n                    v-on:save-annotation=\"concludeEdit\"\n                    v-on:edit-annotation=\"editRegion\"\n                    v-on:cancel-edit=\"cancelEdit\"\n                    v-on:annotation-feedback=\"annotationFeedback\"\n                    v-on:import-annotation=\"onNewRegionDraw\"\n                    v-on:dismiss-annotation=\"dismissAnnotation\"\n                    v-on:annotation-peep=\"annotationPeep\"\n                    v-on:annotation-update=\"annotationUpdate\"/>\n              </v-flex>\n              <v-flex>\n                <v-pagination\n                    v-model=\"annotationsLister.page\"\n                    :length=\"annotationsLister.totalPages+1\"\n                    circle\n                    :total-visible=\"4\"\n                ></v-pagination>\n              </v-flex>\n            </v-layout>\n\n            <!--            <v-btn fab @click=\"stressTest\"></v-btn>-->\n          </v-container>\n        </v-tab-item>\n      </v-tabs-items>\n\n    </side-window>\n  </v-container>\n</template>\n\n<script>\n/* eslint-disable no-param-reassign */\nimport { loadAnnotations, optimizePath, EventManager } from '../SliceDrawer';\nimport SliceViewer from '../components/WSIViewer.vue';\nimport SideWindow from '../components/SideWindow.vue';\nimport AnnotationCard from '../components/AnnotationCard.vue';\nimport SessionClassBalance from '../components/SessionClassBalance.vue';\nimport MLPredictionsOverlapTool from '@/components/MLPredictionsOverlapTool';\n\nexport default {\n  name: 'Session',\n  computed: {\n    /**\n     * Returns true if annotation importing is enabled.\n     * Importing is enabled when the task is human or app annotation\n     * (type 0 and 2, respectively), the task is not currently completed\n     * and the task belongs to the current user.\n     *\n     * @returns {boolean} true if annotation importing is allowed\n     */\n    annotationImportingEnabled() {\n      return !this.completed\n          && (this.session.type === 0 || this.session.type === 2)\n          && this.taskBelongsToUser;\n    },\n    annotationTabVisible() {\n      return this.annotations[this.currentSlide.id] != null\n          && this.annotations[this.currentSlide.id].length > 0;\n    },\n    session_id() {\n      return this.$route.params.session_id;\n    },\n    tile_sources() {\n      return `${process.env.VUE_APP_BASE_URL}session/${this.session_id}/${this.currentSlide.id}.dzi`;\n    },\n    project_labels() {\n      return this.$store.state.session.task.project.labels;\n    },\n    session() {\n      return this.$store.state.session;\n    },\n    slides() {\n      const { session } = this.$store.state;\n      return session.type !== 1 ? session.task.slides : session.task.task.slides;\n    },\n    revisions() {\n      const revision = [];\n      const revisionMeta = this.$store.state.session.task.revisions;\n      const revisionData = this.$store.state.session.revision;\n      for (let i = 0; i < revisionMeta.length; i += 1) {\n        revision.push({\n          id: revisionMeta[i].id,\n          user: revisionMeta[i].user != null ? revisionMeta[i].user.name : revisionMeta[i].app.name,\n          annotations: revisionData[revisionMeta[i].id],\n          selected: false,\n        });\n      }\n      return revision;\n    },\n    /**\n     * Checks if this task belongs to this user. Otherwise, this is\n     * currently only for visualization purposes.\n     * @returns {boolean} true if the task belongs to the user\n     */\n    taskBelongsToUser() {\n      if (this.task_type === 2) {\n        // This is an app annotation task, the task belongs to the user if the user owns the app:\n        return this.session.app.owner.id === this.$store.state.user.id;\n      }\n      // This is a user-based task\n      return this.session.user.id === this.$store.state.user.id;\n    },\n    task_type() {\n      return this.$store.state.session.type;\n    },\n    annotationsListStart() {\n      return (this.annotationsLister.page - 1) * this.annotationsLister.max;\n    },\n  },\n  watch: {\n    session: {\n      immediate: true,\n      handler(session) {\n        if (session.task.type === 0 || session.task.type === 2) {\n          this.annotations = loadAnnotations(session.labelled);\n          this.currentSlide = session.task.slides[0];\n          this.calculatePagination();\n        } else if (session.task.type === 1) {\n          this.annotations = {};\n          this.currentSlide = session.task.task.slides[0];\n        }\n      },\n    },\n    project_labels: {\n      immediate: true,\n      deep: true,\n      handler(newLabels) {\n        for (let i = 0; i < newLabels.length; i += 1) {\n          this.$set(this.labelsVisible, newLabels[i].name, true);\n        }\n      },\n    },\n\n    'annotationsLister.page': function (newPage) {\n      const totalAnnotation = this.annotations[this.currentSlide.id].length;\n      const remaining = totalAnnotation - ((newPage - 1) * this.annotationsLister.max);\n      this.annotationsLister.pageMax = Math.min(this.annotationsLister.max, remaining);\n    },\n\n    'session.completed': function (newValue) {\n      this.$get(`task/completed?id=${this.session.id}&completed=${newValue}`)\n        .catch((err) => {\n          this.session.completed = !this.session.completed;\n          alert(err);\n        });\n    },\n    revisingUserTask: {\n      handler(newRevisionUserTask) {\n        if (newRevisionUserTask !== 'none') {\n          const userTaskAnnotations = this.$store.state.session.revision[newRevisionUserTask];\n          this.annotations = loadAnnotations(userTaskAnnotations);\n          this.calculatePagination();\n        } else {\n          const annotations = {};\n          this.slides.forEach((item) => {\n            annotations[item.id] = [];\n          });\n          this.annotations = annotations;\n          this.calculatePagination();\n        }\n        this.$nextTick(() => {\n          this.annotationUpdate();\n        });\n      },\n    },\n    currentSlide() {\n      this.calculatePagination();\n    },\n  },\n  data() {\n    const self = this;\n    return {\n      currentSlide: null,\n      annotations: {},\n      selectedTab: 0,\n      labelsVisible: {},\n      annotationsLister: {\n        page: 1,\n        totalPages: 1,\n        pageMax: 10,\n        max: 10,\n      },\n      drawingStyle: [{\n        fillOpacity: 0.2,\n        lineWidth: 2,\n        hoverOpacity: 0.5,\n        showImporting: true,\n      }, {\n        fillOpacity: 0.2,\n        lineWidth: 2,\n      }],\n      revisingUserTask: 'none',\n      highlightOnTab: false,\n      confirmingImportAnnotations: false,\n      draw_events: {\n        onHover: self.onRegionHover,\n        onLeave: self.onRegionLeave,\n        onClick: self.regionClicked,\n        // onFinishedEditing: (completed, annotation) => {},\n      },\n    };\n  },\n  methods: {\n    onOverlayAnnotations(newAnnotations) {\n      this.$refs.slice_viewer.loadOverlayAnnotations(newAnnotations);\n    },\n\n    onClearOverlayAnnotations() {\n      console.log('onClearOverlayAnnotations', 'Session');\n      this.$refs.slice_viewer.clearOverlayAnnotations();\n    },\n\n    onOverlayStyleChanged(style) {\n      this.drawingStyle[1] = style;\n    },\n\n    labelAnnotationsVisibility(target) {\n      this.project_labels.forEach((label) => {\n        this.labelsVisible[label.name] = target;\n      });\n    },\n\n    calculatePagination() {\n      if (this.currentSlide.id in this.annotations) {\n        const totalAnnotation = this.annotations[this.currentSlide.id].length;\n        this.annotationsLister.totalPages = Math.floor(totalAnnotation\n            / this.annotationsLister.max);\n        if (this.annotationsLister.page !== 1) {\n          this.annotationsLister.page = 1;\n        }\n      } else {\n        this.annotationsLister.totalPages = 0;\n        this.annotationsLister.page = 0;\n      }\n    },\n\n    saveFeedback(annotation) {\n      this.$post(`session/${this.session_id}/annotation_feedback`, annotation.serialize())\n        .then((resp) => {\n          annotation.feedback.id = resp.feedback.id;\n        })\n        .catch((err) => alert(err));\n    },\n\n    onRegionHover(region) {\n      if (this.highlightOnTab) {\n        const element = document.getElementById(`region-${region.id}`);\n        if (element == null) return;\n        this.selectedTab = 1;\n        element.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center',\n        });\n        element.classList.add('hovered');\n      }\n    },\n\n    onRegionLeave(region) {\n      const element = document.getElementById(`region-${region.id}`);\n      if (element == null) return;\n      element.classList.remove('hovered');\n    },\n\n    genColor(color) {\n      return `rgb(${color[0]},${color[1]},${color[2]})`;\n    },\n\n    // eslint-disable-next-line no-param-reassign\n    onNewRegionDraw(annotation) {\n      annotation.id = null; // making sure to reset the id\n      annotation.slideId = this.currentSlide.id;\n      const self = this;\n      this.$post(`session/${this.session_id}/add_region`, annotation.serialize())\n        .then((resp) => {\n          // Add the new region to the list\n          annotation.id = resp.id;\n          annotation.state = 'idle';\n          annotation.updateImageLocation();\n          self.annotations[self.currentSlide.id].push(annotation);\n          self.annotationUpdate();\n          this.$refs.classBalance.refresh();\n          this.calculatePagination();\n          this.$toast('Successfully saved annotation', { timeout: 1000 });\n        })\n        .catch((err) => {\n          alert(`Error while saving region: ${err}`);\n        });\n    },\n\n    /**\n     * A region was updated. We will submit the data to the server.\n     *\n     * @param annotation Annotation instance\n     */\n    onEditRegionDraw(annotation) {\n      if (this.task_type === 0) {\n        this.editing = null;\n        this.$post(`session/${this.session_id}/edit_region`, annotation.serialize())\n          .then(() => {\n            // Add the new region to the list\n            this.$refs.classBalance.refresh();\n            // this.calculatePagination();\n          })\n          .catch((err) => {\n            alert(`Error while saving region: ${err}`);\n          });\n      } else if (this.task_type === 1) {\n        // Making sure to assign that this is a wrong-region type of feedback\n        annotation.feedback.feedback = 2;\n        this.saveFeedback(annotation);\n        this.calculatePagination();\n      }\n    },\n\n    /**\n     * User clicked on a region. We will highlight it in the list\n     *\n     * @param region\n     * @param short\n     */\n    regionClicked(region, short = false) {\n      this.selectedTab = 1;\n      const pageChanged = this.navigateAnnotationPage(region);\n      if (pageChanged && this.attempted === 0) {\n        this.attempted = 1;\n        this.$nextTick(() => {\n          this.regionClicked(region, short);\n        });\n      } else {\n        this.attempted = 0;\n        const element = document.getElementById(`region-${region.id}`);\n        if (element == null) {\n          // if element is null we will wait a few seconds before trying again (switching tabs)\n          setTimeout(() => {\n            document.getElementById(`region-${region.id}`)\n              .scrollIntoView({\n                behavior: 'smooth',\n                block: 'center',\n              });\n          }, 250);\n        } else {\n          // element is already instantiated, we will jump to it:\n          element.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center',\n          });\n          element.classList.add('highlighted');\n          if (short) element.classList.add('short');\n          setTimeout(() => {\n            element.classList.remove('highlighted');\n            element.classList.remove('short');\n          }, short ? 250 : 3000);\n        }\n      }\n    },\n\n    navigateAnnotationPage(annotation) {\n      const idx = this.annotations[this.currentSlide.id].indexOf(annotation);\n      const newPage = Math.ceil(idx / this.annotationsLister.max);\n      if (newPage !== this.annotationsLister.page) {\n        this.annotationsLister.page = newPage;\n        return true;\n      }\n      return false;\n    },\n\n    importAnnotations() {\n      const input = document.getElementById('file-importer-input');\n      input.onchange = (e) => {\n        const reader = new FileReader();\n        reader.readAsText(e.target.files[0], 'UTF-8');\n        reader.onload = (readerEvent) => {\n          const json = JSON.parse(readerEvent.target.result);\n          const slideId = this.currentSlide.id;\n          const annotations = json.features.map((feature, idx) => {\n            const geo = feature.geometry;\n            const label = feature.properties.label != null\n              ? feature.properties.label\n              : {\n                color: [0, 0, 0],\n                name: 'Imported annotation',\n              };\n            const description = feature.properties.description != null\n              ? feature.properties.description : null;\n            return {\n              id: `import-${idx}`,\n              label,\n              description,\n              geometry: {\n                type: 'polygon',\n                points: optimizePath(geo.coordinates[0].map((coord) => ({\n                  x: coord[0],\n                  y: coord[1],\n                }))),\n              },\n              slide_id: slideId,\n              state: 'importing',\n            };\n          });\n          this.confirmingImportAnnotations = true;\n          const slideAnnotations = loadAnnotations({ 0: annotations })[0];\n          this.annotations[slideId].push(...slideAnnotations);\n          this.calculatePagination();\n          this.annotationUpdate();\n        };\n      };\n      input.click();\n    },\n\n    importAll() {\n      const toImport = this.annotations[this.currentSlide.id]\n        .filter(\n          (annotation) => annotation.state === 'importing'\n                  && annotation.label.id != null,\n        )\n        .map((annotation) => annotation.serialize());\n      this.$post(`session/${this.session_id}/${this.currentSlide.id}/importing`, toImport)\n        .then((res) => {\n          alert(res);\n        })\n        .catch((err) => alert(err));\n    },\n\n    dismissAll() {\n      this.annotations[this.currentSlide.id] = this.annotations[this.currentSlide.id]\n        .filter((annotation) => annotation.state !== 'importing');\n      this.confirmingImportAnnotations = false;\n    },\n    /**\n     *\n     * @param region\n     */\n    editRegion(region) {\n      // this.$refs.slice_viewer.editElement(region);\n      // this.editing = region;\n    },\n    concludeEdit(region) {\n      this.$refs.slice_viewer.concludeEdit(region);\n    },\n    cancelEdit() {\n      this.$refs.slice_viewer.cancelEdit();\n      this.editing = null;\n    },\n\n    annotationPeep(annotation) {\n      // this.$refs.slice_viewer.peepAnnotation(annotation);\n    },\n\n    annotationUpdate() {\n      this.$refs.slice_viewer.update();\n    },\n\n    annotationFeedback(feedback, annotation) {\n      // this.editing = annotation;\n      switch (feedback) {\n        case 'correct':\n          annotation.feedback.feedback = 0;\n          annotation.feedback.geometry = null;\n          annotation.feedback.label_id = null;\n          this.saveFeedback(annotation);\n          break;\n        case 'wrong-label':\n          this.saveFeedback(annotation);\n          break;\n        case 'edit-region':\n          this.editRegion(annotation);\n          break;\n        case 'wrong-region':\n          this.concludeEdit(annotation);\n          break;\n        default:\n          break;\n      }\n    },\n\n    dismissAnnotation(annotation) {\n      if (annotation.state === 'importing') {\n        this.annotations[this.currentSlide.id] = this.annotations[this.currentSlide.id]\n          .filter((item) => item !== annotation);\n      } else if (confirm('Are you sure you want to remove this annotation?')) {\n        this.$post(`session/${this.session_id}/remove_annotation`, annotation.serialize())\n          .then(() => {\n            this.annotations[this.currentSlide.id] = this.annotations[this.currentSlide.id]\n              .filter((item) => item.id !== annotation.id);\n            this.annotationUpdate();\n            this.calculatePagination();\n          })\n          .catch((err) => alert(err));\n      }\n    },\n  },\n  mounted() {\n    EventManager.getInstance()\n      .register('session', {\n        annotationClicked: (annotation) => {\n        },\n        peepAnnotation: (annotation) => {\n          console.log('Receive event for peeping annotation', annotation);\n          this.$refs.slice_viewer.peepAnnotation(annotation);\n        },\n        editAnnotation: (annotation) => {\n          console.log('Received event for editing annotation', annotation);\n          // this.$refs.slice_viewer.editElement(annotation);\n          this.editing = annotation;\n        },\n      });\n    // EventManager.getInstance()\n    //  .annotationClicked(null);\n    // console.log();\n  },\n  components: {\n    MLPredictionsOverlapTool,\n    SessionClassBalance,\n    AnnotationCard,\n    SideWindow,\n    SliceViewer,\n  },\n};\n</script>\n\n<style scoped>\n@keyframes highlight {\n\n  0% {\n    background-color: white;\n  }\n  50% {\n    background-color: darkgrey;\n  }\n  100% {\n    background-color: white;\n  }\n}\n\n.slides-list {\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.highlighted {\n  animation-name: highlight;\n  animation-duration: 1s;\n  animation-iteration-count: infinite;\n  animation-direction: reverse;\n}\n\n.hovered {\n  background-color: darkgrey;\n}\n\n.flex-container {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.break {\n  flex-basis: 100%;\n  height: 0;\n}\n\n.card-description {\n  font-size: 12px;\n}\n\n.link-btn {\n  font-size: 12px;\n  margin-left: 4px;\n  margin-right: 4px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Session.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Session.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Session.vue?vue&type=template&id=279921cc&scoped=true&\"\nimport script from \"./Session.vue?vue&type=script&lang=js&\"\nexport * from \"./Session.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Session.vue?vue&type=style&index=0&id=279921cc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"279921cc\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VPagination } from 'vuetify/lib/components/VPagination';\nimport { VRadio } from 'vuetify/lib/components/VRadioGroup';\nimport { VRadioGroup } from 'vuetify/lib/components/VRadioGroup';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardTitle,VContainer,VDivider,VFlex,VLayout,VList,VListItem,VListItemContent,VListItemGroup,VListItemSubtitle,VListItemTitle,VPagination,VRadio,VRadioGroup,VSlider,VSwitch,VTab,VTabItem,VTabs,VTabsItems,VToolbar,VToolbarTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-expansion-panels',{attrs:{\"multiple\":\"\"}},[_c('v-row',[(_vm.user.manages_tasks)?_c('v-col',{attrs:{\"sm\":\"12\"}},[_c('v-expansion-panel',[_c('v-expansion-panel-header',[_c('v-toolbar-title',{staticClass:\"title\"},[_vm._v(\"Tasks\")])],1),_c('v-expansion-panel-content',[_c('v-data-table',{attrs:{\"headers\":_vm.tasksHeader,\"items\":_vm.tasks[_vm.task_type],\"items-per-page\":5,\"search\":_vm.taskFilter.name,\"custom-filter\":_vm.annotationTaskFiltering},scopedSlots:_vm._u([{key:\"top\",fn:function(){return [_c('v-row',{staticClass:\"ma-0 pa-0\"},[_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"md\":\"4\"}},[_c('v-text-field',{staticClass:\"mx-4\",attrs:{\"label\":\"Search for slide's name\"},model:{value:(_vm.taskFilter.name),callback:function ($$v) {_vm.$set(_vm.taskFilter, \"name\", $$v)},expression:\"taskFilter.name\"}})],1),(_vm.projects != null)?_c('v-col',{staticClass:\"ma-0\",attrs:{\"md\":\"8\"}},[_c('v-chip-group',{staticClass:\"mr-2 ml-2\",model:{value:(_vm.taskFilter.project),callback:function ($$v) {_vm.$set(_vm.taskFilter, \"project\", $$v)},expression:\"taskFilter.project\"}},[_c('v-chip',{attrs:{\"filter\":\"\",\"value\":null,\"color\":\"orange\"}},[_vm._v(\"\\n                        All projects\\n                      \")]),_vm._l((_vm.projects),function(project){return _c('v-chip',{key:project.id,attrs:{\"filter\":\"\",\"value\":project.name}},[_vm._v(\"\\n                        \"+_vm._s(project.name)+\"\\n                      \")])})],2)],1):_vm._e()],1),_c('v-row',{staticClass:\"mt-0\"},[_c('v-col',{staticClass:\"pt-0 pb-0\",attrs:{\"md\":\"12\"}},[_c('v-chip-group',{staticClass:\"mr-2 ml-2 mb-2\",model:{value:(_vm.taskFilter.user),callback:function ($$v) {_vm.$set(_vm.taskFilter, \"user\", $$v)},expression:\"taskFilter.user\"}},[_c('v-chip',{attrs:{\"filter\":\"\",\"value\":null,\"color\":\"orange\"}},[_vm._v(\"\\n                        Anyone\\n                      \")]),_vm._l((_vm.users),function(user){return _c('v-chip',{key:user.id,attrs:{\"filter\":\"\",\"value\":user.name}},[_vm._v(\"\\n                        \"+_vm._s(user.name)+\"\\n                      \")])})],2)],1)],1),_c('v-tabs',{model:{value:(_vm.task_type),callback:function ($$v) {_vm.task_type=$$v},expression:\"task_type\"}},[_c('v-tab',[_vm._v(\"Annotations\")]),_c('v-tab',[_vm._v(\"Revisions\")])],1)]},proxy:true},{key:\"item.slides\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip-group',{attrs:{\"column\":\"\",\"show-arrows\":\"\"}},_vm._l((item.slides),function(slide){return _c('v-chip',{staticStyle:{\"pointer-events\":\"none\"},attrs:{\"outlined\":\"\",\"readonly\":true}},[_vm._v(\"\\n                    \"+_vm._s(slide.name)+\"\\n                  \")])}),1)]}},{key:\"item.task\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip-group',{attrs:{\"column\":\"\",\"show-arrows\":\"\"}},_vm._l((item.task.slides),function(slide){return _c('v-chip',{staticStyle:{\"pointer-events\":\"none\"},attrs:{\"outlined\":\"\",\"readonly\":true}},[_vm._v(\"\\n                    \"+_vm._s(slide.name)+\"\\n                  \")])}),1)]}},{key:\"item.user_tasks\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip-group',{attrs:{\"column\":\"\",\"show-arrows\":\"\"}},_vm._l((item.user_tasks),function(task){return _c('v-chip',{attrs:{\"readonly\":true,\"outlined\":task.user == null,\"color\":\"primary\"},on:{\"click\":function($event){return _vm.openTask(task)}}},[(task.completed)?_c('v-icon',[_vm._v(\"mdi-check\")]):_vm._e(),_vm._v(\"\\n                    \"+_vm._s(task.user != null ? task.user.name : task.app.name)+\"\\n                  \")],1)}),1)]}},{key:\"item.revisions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip-group',{attrs:{\"active-class\":\"primary--text\",\"column\":\"\",\"show-arrows\":\"\"}},_vm._l((item.revisions),function(user_task){return _c('v-chip',{attrs:{\"readonly\":true,\"dark\":\"\"},on:{\"click\":function($event){return _vm.openTask(user_task)}}},[_vm._v(\"\\n                    \"+_vm._s(user_task.user != null ? user_task.user.name : user_task.app.name)+\"\\n                  \")])}),1)]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editTask(item)}}},[_vm._v(\"mdi-pencil\")]),_c('v-icon',{attrs:{\"small\":\"\",\"disabled\":item.completed},on:{\"click\":function($event){return _vm.removeTask(item)}}},[_vm._v(\"\\n                  mdi-delete\\n                \")])]}}],null,false,708278698)}),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.newTask}},[_vm._v(\"New task\")]),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.newBatch}},[_vm._v(\"New batch\")])],1)],1)],1)],1):_vm._e(),(_vm.user.manages_users)?_c('v-col',{attrs:{\"sm\":\"12\"}},[_c('v-expansion-panel',[_c('v-expansion-panel-header',[_c('v-toolbar-title',{staticClass:\"title\"},[_vm._v(\"Users\")])],1),_c('v-expansion-panel-content',[_c('v-data-table',{attrs:{\"headers\":_vm.config.user_headers,\"items\":_vm.users,\"items-per-page\":5},scopedSlots:_vm._u([{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editUser(item)}}},[_vm._v(\"\\n                  mdi-pencil\\n                \")]),_c('v-icon',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.removeUser(item)}}},[_vm._v(\"mdi-delete\")])]}}],null,false,1381973006)}),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.newUser}},[_vm._v(\"New user\")])],1)],1)],1)],1):_vm._e(),(_vm.user.manages_projects)?_c('v-col',{attrs:{\"sm\":\"12\"}},[_c('v-expansion-panel',[_c('v-expansion-panel-header',[_c('v-toolbar-title',{staticClass:\"title\"},[_vm._v(\"Projects\")])],1),_c('v-expansion-panel-content',[_c('v-data-table',{attrs:{\"headers\":_vm.config.project_header,\"items\":_vm.projects,\"items-per-page\":5},scopedSlots:_vm._u([{key:\"item.labels\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip-group',{attrs:{\"show-arrows\":\"\",\"column\":\"\"}},_vm._l((item.labels),function(label){return _c('v-chip',{staticStyle:{\"pointer-events\":\"none\"},attrs:{\"outlined\":\"\",\"color\":(\"rgb(\" + (label.color[0]) + \", \" + (label.color[1]) + \",\" + (label.color[2]) + \")\"),\"readonly\":true,\"dark\":\"\"}},[_vm._v(\"\\n                    \"+_vm._s(label.name)+\"\\n                  \")])}),1)]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-icon',_vm._g(_vm._b({staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.showLabelData(item)}}},'v-icon',attrs,false),on),[_vm._v(\"\\n                      mdi-label\\n                    \")])]}}],null,true)},[_c('span',[_vm._v(\"Copy label data to clipboard\")])]),_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editProject(item)}}},[_vm._v(\"\\n                  mdi-pencil\\n                \")]),_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-icon',_vm._g(_vm._b({attrs:{\"small\":\"\"}},'v-icon',attrs,false),on),[_vm._v(\"mdi-delete\")])]}}],null,true)},[_c('span',[_vm._v(\"Not implemented\")])])]}}],null,false,740187087)}),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.newProject}},[_vm._v(\"New project\")])],1)],1)],1)],1):_vm._e()],1)],1),(_vm.drawer)?_c('v-navigation-drawer',{attrs:{\"app\":\"\",\"temporary\":\"\",\"stateless\":\"\",\"right\":\"\",\"width\":\"500px\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-toolbar',[_c('v-toolbar-title',[_c('v-icon',{staticClass:\"mr-1\",attrs:{\"large\":\"\"},on:{\"click\":function($event){_vm.drawer = false}}},[_vm._v(\"mdi-close\")]),_vm._v(\"\\n        Information editor\\n      \")],1)],1),_c('v-container',[(_vm.mode === 'user')?_c('user-editor',{on:{\"done\":_vm.done},model:{value:(_vm.editing),callback:function ($$v) {_vm.editing=$$v},expression:\"editing\"}}):(_vm.mode === 'batch')?_c('task-batch',{on:{\"done\":_vm.done},model:{value:(_vm.editing),callback:function ($$v) {_vm.editing=$$v},expression:\"editing\"}}):(_vm.mode === 'project')?_c('project-editor',{on:{\"done\":_vm.done},model:{value:(_vm.editing),callback:function ($$v) {_vm.editing=$$v},expression:\"editing\"}}):(_vm.mode === 'task')?_c('task-editor',{on:{\"done\":_vm.done},model:{value:(_vm.editing),callback:function ($$v) {_vm.editing=$$v},expression:\"editing\"}}):_vm._e()],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-text-field',{attrs:{\"label\":\"Name\"},model:{value:(_vm.user.name),callback:function ($$v) {_vm.$set(_vm.user, \"name\", $$v)},expression:\"user.name\"}}),_c('v-text-field',{attrs:{\"label\":\"Username\"},model:{value:(_vm.user.username),callback:function ($$v) {_vm.$set(_vm.user, \"username\", $$v)},expression:\"user.username\"}}),_c('v-text-field',{attrs:{\"label\":\"Password\",\"type\":\"password\"},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}}),_c('v-checkbox',{attrs:{\"label\":\"Is user admin?\"},model:{value:(_vm.user.is_admin),callback:function ($$v) {_vm.$set(_vm.user, \"is_admin\", $$v)},expression:\"user.is_admin\"}}),_c('span',{staticClass:\"title\"},[_vm._v(\"User permissions\")]),_c('div',{staticClass:\"chip-group\"},[_c('v-check-chip',{model:{value:(_vm.user.manages_apps),callback:function ($$v) {_vm.$set(_vm.user, \"manages_apps\", $$v)},expression:\"user.manages_apps\"}},[_vm._v(\"Manage apps\")]),_c('v-check-chip',{model:{value:(_vm.user.manages_users),callback:function ($$v) {_vm.$set(_vm.user, \"manages_users\", $$v)},expression:\"user.manages_users\"}},[_vm._v(\"Manage users\")]),_c('v-check-chip',{model:{value:(_vm.user.manages_tasks),callback:function ($$v) {_vm.$set(_vm.user, \"manages_tasks\", $$v)},expression:\"user.manages_tasks\"}},[_vm._v(\"Manage tasks\")]),_c('v-check-chip',{model:{value:(_vm.user.manages_projects),callback:function ($$v) {_vm.$set(_vm.user, \"manages_projects\", $$v)},expression:\"user.manages_projects\"}},[_vm._v(\"Manage projects\")]),_c('v-check-chip',{model:{value:(_vm.user.can_export),callback:function ($$v) {_vm.$set(_vm.user, \"can_export\", $$v)},expression:\"user.can_export\"}},[_vm._v(\"Can export annotations\")]),_c('v-check-chip',{model:{value:(_vm.user.access_overview),callback:function ($$v) {_vm.$set(_vm.user, \"access_overview\", $$v)},expression:\"user.access_overview\"}},[_vm._v(\"Access overview\")])],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"outlined\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"Save\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-chip',{attrs:{\"filter\":\"\",\"color\":_vm.color},on:{\"click\":function($event){return _vm.$emit('input', !_vm.value)}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-chip filter :color=\"color\" v-model=\"value\" @click=\"$emit('input', !value)\">\r\n    <slot></slot>\r\n  </v-chip>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'VCheckChip',\r\n  props: ['value', 'color'],\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VCheckChip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VCheckChip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VCheckChip.vue?vue&type=template&id=3d2e1610&scoped=true&\"\nimport script from \"./VCheckChip.vue?vue&type=script&lang=js&\"\nexport * from \"./VCheckChip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d2e1610\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VChip } from 'vuetify/lib/components/VChip';\ninstallComponents(component, {VChip})\n","<template>\n  <div>\n    <!--  <v-form v-if=\"user != null\">-->\n    <v-text-field label=\"Name\" v-model=\"user.name\"></v-text-field>\n    <v-text-field label=\"Username\" v-model=\"user.username\"></v-text-field>\n    <v-text-field label=\"Password\" type=\"password\" v-model=\"user.password\"></v-text-field>\n    <v-checkbox v-model=\"user.is_admin\" label=\"Is user admin?\"></v-checkbox>\n    <span class=\"title\">User permissions</span>\n    <div class=\"chip-group\">\n      <!--      <v-chip-group multiple column>-->\n      <v-check-chip v-model=\"user.manages_apps\">Manage apps</v-check-chip>\n      <v-check-chip v-model=\"user.manages_users\">Manage users</v-check-chip>\n      <v-check-chip v-model=\"user.manages_tasks\">Manage tasks</v-check-chip>\n      <v-check-chip v-model=\"user.manages_projects\">Manage projects</v-check-chip>\n      <v-check-chip v-model=\"user.can_export\">Can export annotations</v-check-chip>\n      <v-check-chip v-model=\"user.access_overview\">Access overview</v-check-chip>\n    </div>\n    <!--    </v-chip-group>-->\n    <v-card-actions>\n      <v-spacer></v-spacer>\n      <v-btn @click=\"save\" outlined>Save</v-btn>\n    </v-card-actions>\n    <!--  </v-form>-->\n  </div>\n</template>\n\n<script>\nimport _ from 'lodash';\nimport VCheckChip from './VCheckChip';\n\nexport default {\n  name: 'UserEditor',\n  components: { VCheckChip },\n  watch: {\n    value: {\n      immediate: true,\n      handler(newValue) {\n        this.user = _.cloneDeep(newValue);\n      },\n    },\n  },\n  data: () => ({\n    user: null,\n    test: [],\n  }),\n  methods: {\n    save() {\n      if (this.user.id != null) {\n        // update user profile information\n        this.$post('user/edit', this.user)\n          .then((resp) => {\n            this.user = resp;\n            this.$emit('input', this.user);\n            this.$emit('done', 'user');\n          })\n          .catch((err) => {\n            alert(err);\n          });\n      } else {\n        // create new user profile\n        this.$post('user/new', this.user)\n          .then((resp) => {\n            this.user = resp;\n            this.$emit('input', this.user);\n            this.$emit('done', 'user');\n          })\n          .catch((err) => {\n            alert(err);\n          });\n      }\n    },\n  },\n  props: ['value'],\n};\n</script>\n\n<style scoped>\n.chip-group {\n  white-space: normal;\n  flex-wrap: wrap;\n  max-width: 100%;\n}\n\n.chip-group * {\n  margin: 2px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserEditor.vue?vue&type=template&id=d75e2dd4&scoped=true&\"\nimport script from \"./UserEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./UserEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserEditor.vue?vue&type=style&index=0&id=d75e2dd4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d75e2dd4\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCardActions,VCheckbox,VSpacer,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-text-field',{attrs:{\"label\":\"Project name\"},model:{value:(_vm.project.name),callback:function ($$v) {_vm.$set(_vm.project, \"name\", $$v)},expression:\"project.name\"}}),_c('v-textarea',{attrs:{\"label\":\"Project description\"},model:{value:(_vm.project.description),callback:function ($$v) {_vm.$set(_vm.project, \"description\", $$v)},expression:\"project.description\"}}),_c('v-text-field',{attrs:{\"label\":\"Files location\",\"error-messages\":_vm.path_errors},on:{\"input\":_vm.check_path},model:{value:(_vm.project.folder),callback:function ($$v) {_vm.$set(_vm.project, \"folder\", $$v)},expression:\"project.folder\"}}),_c('v-data-table',{attrs:{\"headers\":_vm.header,\"items\":_vm.project.labels,\"items-per-page\":5},scopedSlots:_vm._u([{key:\"item.name\",fn:function(props){return [_c('v-edit-dialog',{attrs:{\"return-value\":props.item.name},on:{\"update:returnValue\":function($event){return _vm.$set(props.item, \"name\", $event)},\"update:return-value\":function($event){return _vm.$set(props.item, \"name\", $event)}},scopedSlots:_vm._u([{key:\"input\",fn:function(){return [_c('v-text-field',{attrs:{\"label\":\"Edit\",\"single-line\":\"\",\"counter\":\"\"},model:{value:(props.item.name),callback:function ($$v) {_vm.$set(props.item, \"name\", $$v)},expression:\"props.item.name\"}})]},proxy:true}],null,true)},[_vm._v(\"\\n        \"+_vm._s(props.item.name)+\"\\n        \")])]}},{key:\"item.color\",fn:function(ref){\nvar item = ref.item;\nvar idx = ref.idx;\nreturn [_c('v-menu',{attrs:{\"offset-y\":\"\",\"close-on-content-click\":false},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('div',_vm._g(_vm._b({staticClass:\"color-box\",style:(_vm.gen_color(item)),on:{\"click\":function($event){return _vm.change_color(item)}}},'div',attrs,false),on))]}}],null,true),model:{value:(_vm.color_menu[item.name]),callback:function ($$v) {_vm.$set(_vm.color_menu, item.name, $$v)},expression:\"color_menu[item.name]\"}},[_c('v-card',[_c('v-color-picker',{attrs:{\"hide-inputs\":\"\",\"swatches-max-height\":100,\"show-swatches\":\"\"},model:{value:(_vm.color_picked),callback:function ($$v) {_vm.color_picked=$$v},expression:\"color_picked\"}}),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){return _vm.closeColorPicker(item.name)}}},[_vm._v(\"Done\")])],1)],1)],1)]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-icon',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.remove_label(item)}}},[_vm._v(\"\\n        mdi-delete\\n      \")])]}}])}),_c('v-text-field',{attrs:{\"filled\":\"\",\"label\":\"New label\",\"append-outer-icon\":\"add\"},on:{\"click:append-outer\":_vm.add_label},model:{value:(_vm.new_label),callback:function ($$v) {_vm.new_label=$$v},expression:\"new_label\"}}),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"outlined\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"Save\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!--  <v-form v-if=\"project != null\">-->\n    <v-text-field label=\"Project name\" v-model=\"project.name\"/>\n    <v-textarea label=\"Project description\" v-model=\"project.description\"/>\n    <v-text-field label=\"Files location\" v-model=\"project.folder\" :error-messages=\"path_errors\" @input=\"check_path\"/>\n    <v-data-table :headers=\"header\" :items=\"project.labels\" :items-per-page=\"5\">\n       <template v-slot:item.name=\"props\">\n        <v-edit-dialog\n          :return-value.sync=\"props.item.name\"\n        >\n          {{ props.item.name }}\n          <template v-slot:input>\n            <v-text-field\n              v-model=\"props.item.name\"\n              label=\"Edit\"\n              single-line\n              counter\n            ></v-text-field>\n          </template>\n        </v-edit-dialog>\n      </template>\n      <template v-slot:item.color=\"{ item, idx }\">\n        <v-menu v-model=\"color_menu[item.name]\" offset-y :close-on-content-click=\"false\">\n          <template v-slot:activator=\"{ on, attrs }\">\n            <div class=\"color-box\"\n                 @click=\"change_color(item)\"\n                 :style=\"gen_color(item)\"\n                 v-bind=\"attrs\"\n                 v-on=\"on\"></div>\n          </template>\n          <v-card>\n            <v-color-picker hide-inputs :swatches-max-height=\"100\" show-swatches\n                            v-model=\"color_picked\" ></v-color-picker>\n            <v-card-actions>\n              <v-spacer></v-spacer>\n              <v-btn color=\"primary\" text @click=\"closeColorPicker(item.name)\">Done</v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-menu>\n      </template>\n      <template v-slot:item.actions=\"{ item }\">\n        <v-icon small @click=\"remove_label(item)\">\n          mdi-delete\n        </v-icon>\n      </template>\n    </v-data-table>\n    <v-text-field\n            filled\n            label=\"New label\"\n            v-model=\"new_label\"\n            append-outer-icon=\"add\"\n            @click:append-outer=\"add_label\"\n    />\n    <v-card-actions>\n      <v-spacer></v-spacer>\n      <v-btn @click=\"save\" outlined>Save</v-btn>\n    </v-card-actions>\n  </div>\n</template>\n\n<script>\n\nimport _ from 'lodash';\n\nexport default {\n  name: 'ProjectEditor',\n  watch: {\n    value: {\n      immediate: true,\n      handler(new_value) {\n        this.project = _.cloneDeep(new_value);\n      },\n    },\n\n    color_picked(new_value) {\n      // this.editing_label.color = `${new_value.rgba.r};${new_value.rgba.g};${new_value.rgba.b}`\n      if (this.editing_label != null) this.editing_label.color = [new_value.rgba.r, new_value.rgba.g, new_value.rgba.b];\n    },\n  },\n  data: () => ({\n    project: null,\n    color_picked: null,\n    color_menu: [],\n    header: [\n      { text: 'Label', value: 'name' },\n      { text: 'Color', value: 'color', sortable: false },\n      { text: 'Actions', value: 'actions' },\n    ],\n    path_errors: [],\n    editing_label: null,\n    new_label: null,\n  }),\n  methods: {\n    closeColorPicker(itemName) {\n      this.color_menu[itemName] = false;\n      this.editing_label = null;\n      this.color_picked = null;\n    },\n    check_path(input) {\n      if (input === '') {\n        this.path_errors = ['Path required'];\n      } else {\n        this.$post('project/valid_path', { path: input })\n          .then((resp) => {\n            if (resp.valid_path) {\n              this.path_errors = [];\n            } else {\n              this.path_errors = ['Path not found on environment'];\n            }\n          })\n          .catch((err) => alert(err));\n      }\n    },\n\n    add_label() {\n      if (this.project == null) this.project = { labels: [] };\n      if (this.project.labels == null) this.project.labels = [];\n      this.project.labels.push({\n        name: this.new_label,\n        color: [255, 255, 255],\n      });\n      this.new_label = '';\n    },\n\n    change_color(item) {\n      this.editing_label = item;\n    },\n\n    gen_color(item) {\n      const colors = item.color;\n      return `background-color: rgba(${colors[0]},${colors[1]},${colors[2]}, 1)`;\n    },\n    save() {\n      if (this.path_errors.length > 0) alert(\"You need to fix the project's path before continuing.\");\n      else if (confirm('Are you sure you want to continue?')) {\n        if (this.project.id == null) {\n          this.$post('/project/new', this.project)\n            .then((resp) => {\n              this.project = resp;\n              this.$emit('input', this.project);\n              this.$emit('done', 'project');\n            })\n            .catch((err) => {\n              alert(err);\n            });\n        } else {\n          this.$post('/project/edit', this.project)\n            .then((resp) => {\n              this.project = resp;\n              this.$emit('input', this.project);\n              this.$emit('done', 'project');\n            })\n            .catch((err) => {\n              alert(err);\n            });\n        }\n      }\n    },\n    remove_label(label) {\n      if (label.id == null) {\n        // No id, simple remove item from the list\n        this.project.labels = this.project.labels.filter((item) => item !== label);\n      } else {\n        // Request removal from the the database\n        this.$post('/project/remove_label', label)\n          .then(() => {\n            this.project.labels = this.project.labels.filter((item) => item.id !== label.id);\n            this.$emit('input', this.project);\n          })\n          .catch((err) => alert(err));\n      }\n    },\n  },\n  mounted() {\n    // this.load_users()\n  },\n  props: ['value'],\n};\n</script>\n\n<style scoped>\n  .color-box {\n    height: 30px;\n    width: 60px;\n    border: black 1px solid;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProjectEditor.vue?vue&type=template&id=1aa8f24e&scoped=true&\"\nimport script from \"./ProjectEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./ProjectEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProjectEditor.vue?vue&type=style&index=0&id=1aa8f24e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1aa8f24e\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VColorPicker } from 'vuetify/lib/components/VColorPicker';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VEditDialog } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VBtn,VCard,VCardActions,VColorPicker,VDataTable,VEditDialog,VIcon,VMenu,VSpacer,VTextField,VTextarea})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-text-field',{attrs:{\"label\":\"Task name\"},model:{value:(_vm.task.name),callback:function ($$v) {_vm.$set(_vm.task, \"name\", $$v)},expression:\"task.name\"}}),_c('v-select',{attrs:{\"label\":\"Project\",\"chips\":\"\",\"items\":_vm.projects,\"item-text\":\"name\",\"item-value\":\"id\"},model:{value:(_vm.task.project_id),callback:function ($$v) {_vm.$set(_vm.task, \"project_id\", $$v)},expression:\"task.project_id\"}}),(_vm.folders.length > 0)?_c('span',{staticClass:\"grey--text text--darken-2 text-body-2\",staticStyle:{\"font-size\":\"10px\"}},[_vm._v(\"Files from:\")]):_vm._e(),_c('v-treeview',{staticStyle:{\"max-height\":\"300px\",\"overflow-y\":\"auto\"},attrs:{\"items\":_vm.folders,\"selectable\":\"\",\"dense\":\"\",\"open-all\":\"\",\"item-text\":\"name\",\"item-value\":\"id\",\"return-object\":\"\",\"readonly\":_vm.task.project_id == null,\"shaped\":\"\",\"hoverable\":\"\",\"selection-type\":\"independent\"},scopedSlots:_vm._u([{key:\"label\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.name)+\" (\"+_vm._s(item.total)+\" file(s), \"+_vm._s(item.new)+\" new files)\")])]}}]),model:{value:(_vm.task.folders),callback:function ($$v) {_vm.$set(_vm.task, \"folders\", $$v)},expression:\"task.folders\"}}),(_vm.folders.length > 0)?_c('v-checkbox',{attrs:{\"label\":\"Only include new files\"},model:{value:(_vm.task.only_new),callback:function ($$v) {_vm.$set(_vm.task, \"only_new\", $$v)},expression:\"task.only_new\"}}):_vm._e(),_c('v-checkbox',{attrs:{\"label\":\"Group slides by name\"},model:{value:(_vm.task.group_slides),callback:function ($$v) {_vm.$set(_vm.task, \"group_slides\", $$v)},expression:\"task.group_slides\"}}),_c('v-select',{attrs:{\"label\":\"Divide between\",\"chips\":\"\",\"multiple\":\"\",\"items\":_vm.users,\"item-text\":\"username\",\"return-object\":\"\"},model:{value:(_vm.task.assigned),callback:function ($$v) {_vm.$set(_vm.task, \"assigned\", $$v)},expression:\"task.assigned\"}}),_c('span',{staticClass:\"grey--text text--darken-2 text-body-2\",staticStyle:{\"font-size\":\"10px\"}},[_vm._v(\"Intersection: how many people should annotate each slide?\")]),_c('v-slider',{attrs:{\"label\":\"Intersection\",\"min\":1,\"max\":_vm.totalIntersection,\"step\":\"1\",\"thumb-label\":\"\",\"ticks\":\"always\",\"tick-size\":\"5\"},model:{value:(_vm.task.concurrent),callback:function ($$v) {_vm.$set(_vm.task, \"concurrent\", $$v)},expression:\"task.concurrent\"}}),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"outlined\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"Continue\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!--  <v-form  v-if=\"task != null\">-->\n    <v-text-field label=\"Task name\" v-model=\"task.name\"/>\n    <v-select label=\"Project\" chips :items=\"projects\" item-text=\"name\"\n              item-value=\"id\" v-model=\"task.project_id\"/>\n    <span v-if=\"folders.length > 0\" class=\"grey--text text--darken-2 text-body-2\"\n          style=\"font-size: 10px\">Files from:</span>\n    <v-treeview\n        style=\"max-height: 300px; overflow-y: auto\"\n        :items=\"folders\"\n        selectable\n        dense\n        open-all\n        item-text=\"name\"\n        item-value=\"id\"\n        return-object\n        :readonly=\"task.project_id == null\"\n        v-model=\"task.folders\"\n        shaped\n        hoverable\n        selection-type=\"independent\">\n      <template v-slot:label=\"{ item }\">\n        <div>{{ item.name }} ({{ item.total }} file(s), {{ item.new }} new files)</div>\n      </template>\n    </v-treeview>\n    <v-checkbox v-if=\"folders.length > 0\" v-model=\"task.only_new\" label=\"Only include new files\"/>\n    <v-checkbox v-model=\"task.group_slides\" label=\"Group slides by name\"/>\n\n    <v-select label=\"Divide between\" chips multiple :items=\"users\"\n              item-text=\"username\" v-model=\"task.assigned\"\n              return-object/>\n\n    <span class=\"grey--text text--darken-2 text-body-2\"\n          style=\"font-size: 10px\">Intersection: how many people should annotate each slide?</span>\n    <v-slider v-model=\"task.concurrent\"\n              label=\"Intersection\"\n              :min=\"1\"\n              :max=\"totalIntersection\"\n              step=\"1\"\n              thumb-label\n              ticks=\"always\"\n              tick-size=\"5\"/>\n\n    <v-card-actions>\n      <v-spacer></v-spacer>\n      <v-btn @click=\"save\" outlined>Continue</v-btn>\n    </v-card-actions>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'TaskBatch',\n  watch: {\n    'task.project_id': function (newValue) {\n      if (newValue != null) {\n        this.load_folders(newValue);\n      }\n    },\n  },\n  computed: {\n    totalIntersection() {\n      this.$nextTick(() => {\n        this.task.concurrent = 1;\n      });\n      if (this.task.assigned != null) {\n        return this.task.assigned.length;\n      }\n      return 0;\n    },\n  },\n  data() {\n    return {\n      projects: null,\n      users: null,\n      folders: [],\n      task: {\n        name: '',\n        project_id: null,\n        assigned: [],\n        folders: [],\n        concurrent: 1,\n        only_new: true,\n        group_slides: true,\n      },\n    };\n  },\n  methods: {\n    save() {\n      this.$post('task/new_batch', this.task)\n        .then((res) => {\n          let counter = '';\n          Object.entries(res.user_tasks)\n            .forEach(([name, count]) => {\n              counter += `${name} has ${count} new tasks.\\n`;\n            });\n          alert(`Successfully created ${res.new_tasks} new tasks.\\n${counter}`);\n          this.$emit('done', 'task');\n        })\n        .catch((err) => alert(err));\n    },\n\n    load_projects() {\n      this.$get('project/list')\n        .then((resp) => {\n          this.projects = resp;\n        })\n        .catch((err) => alert(err));\n    },\n    load_users() {\n      this.$get('user/list')\n        .then((resp) => {\n          this.users = resp;\n        })\n        .catch((err) => alert(err));\n    },\n    load_folders(projectId) {\n      this.$get(`task/folders?project_id=${projectId}`)\n        .then((resp) => {\n          this.folders = resp;\n        })\n        .catch(() => {\n          alert('Unable to locate the project\\'s folder. Make sure the project is properly setup for the current environment.');\n        });\n    },\n  },\n  mounted() {\n    this.load_projects();\n    this.load_users();\n  },\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskBatch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskBatch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaskBatch.vue?vue&type=template&id=1852a872&scoped=true&\"\nimport script from \"./TaskBatch.vue?vue&type=script&lang=js&\"\nexport * from \"./TaskBatch.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1852a872\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTreeview } from 'vuetify/lib/components/VTreeview';\ninstallComponents(component, {VBtn,VCardActions,VCheckbox,VSelect,VSlider,VSpacer,VTextField,VTreeview})\n","<template>\n  <v-container>\n    <v-expansion-panels multiple>\n      <v-row>\n        <v-col sm=\"12\" v-if=\"user.manages_tasks\">\n          <v-expansion-panel>\n            <v-expansion-panel-header>\n              <v-toolbar-title class=\"title\">Tasks</v-toolbar-title>\n            </v-expansion-panel-header>\n            <v-expansion-panel-content>\n              <v-data-table\n                  :headers=\"tasksHeader\"\n                  :items=\"tasks[task_type]\"\n                  :items-per-page=\"5\"\n                  :search=\"taskFilter.name\"\n                  :custom-filter=\"annotationTaskFiltering\">\n\n                <template v-slot:top>\n                  <v-row class=\"ma-0 pa-0\">\n                    <v-col md=\"4\" class=\"ma-0 pa-0\">\n                      <v-text-field\n                          v-model=\"taskFilter.name\"\n                          label=\"Search for slide's name\"\n                          class=\"mx-4\"\n                      ></v-text-field>\n                    </v-col>\n                    <v-col v-if=\"projects != null\" md=\"8\" class=\"ma-0\">\n                      <v-chip-group class=\"mr-2 ml-2\" v-model=\"taskFilter.project\">\n                        <v-chip filter :value=\"null\" color=\"orange\">\n                          All projects\n                        </v-chip>\n                        <v-chip\n                            filter\n                            v-for=\"project in projects\"\n                            :key=\"project.id\"\n                            :value=\"project.name\">\n                          {{ project.name }}\n                        </v-chip>\n                      </v-chip-group>\n                    </v-col>\n                  </v-row>\n                  <v-row class=\"mt-0\">\n                    <v-col md=\"12\" class=\"pt-0 pb-0\">\n                      <v-chip-group class=\"mr-2 ml-2 mb-2\" v-model=\"taskFilter.user\">\n                        <v-chip filter :value=\"null\" color=\"orange\">\n                          Anyone\n                        </v-chip>\n                        <v-chip\n                            filter\n                            v-for=\"user in users\"\n                            :key=\"user.id\"\n                            :value=\"user.name\">\n                          {{ user.name }}\n                        </v-chip>\n                      </v-chip-group>\n                    </v-col>\n                  </v-row>\n\n                  <v-tabs v-model=\"task_type\">\n                    <v-tab>Annotations</v-tab>\n                    <v-tab>Revisions</v-tab>\n                  </v-tabs>\n                </template>\n\n                <template v-slot:item.slides=\"{ item }\">\n                  <v-chip-group column show-arrows>\n                    <v-chip style=\"pointer-events: none;\"\n                            outlined :readonly=\"true\"\n                            v-for=\"slide in item.slides\">\n                      {{ slide.name }}\n                    </v-chip>\n                  </v-chip-group>\n                </template>\n                <template v-slot:item.task=\"{ item }\">\n                  <v-chip-group column show-arrows>\n                    <v-chip style=\"pointer-events: none;\"\n                            outlined :readonly=\"true\"\n                            v-for=\"slide in item.task.slides\">\n                      {{ slide.name }}\n                    </v-chip>\n                  </v-chip-group>\n                </template>\n                <template v-slot:item.user_tasks=\"{ item }\">\n                  <v-chip-group column show-arrows>\n                    <v-chip :readonly=\"true\"\n                            v-for=\"task in item.user_tasks\"\n                            :outlined=\"task.user == null\"\n                            color=\"primary\"\n                            @click=\"openTask(task)\">\n                      <v-icon v-if=\"task.completed\">mdi-check</v-icon>\n                      {{ task.user != null ? task.user.name : task.app.name }}\n                    </v-chip>\n                  </v-chip-group>\n                </template>\n                <template v-slot:item.revisions=\"{ item }\">\n                  <v-chip-group active-class=\"primary--text\" column show-arrows>\n                    <v-chip :readonly=\"true\"\n                            v-for=\"user_task in item.revisions\" dark\n                            @click=\"openTask(user_task)\">\n                      {{ user_task.user != null ? user_task.user.name : user_task.app.name }}\n                    </v-chip>\n                  </v-chip-group>\n                </template>\n                <template v-slot:item.actions=\"{ item }\">\n                  <v-icon small class=\"mr-2\" @click=\"editTask(item)\">mdi-pencil</v-icon>\n                  <v-icon small @click=\"removeTask(item)\" :disabled=\"item.completed\">\n                    mdi-delete\n                  </v-icon>\n                </template>\n              </v-data-table>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn text @click=\"newTask\">New task</v-btn>\n                <v-btn text @click=\"newBatch\">New batch</v-btn>\n              </v-card-actions>\n            </v-expansion-panel-content>\n          </v-expansion-panel>\n        </v-col>\n        <v-col sm=\"12\" v-if=\"user.manages_users\">\n          <v-expansion-panel>\n            <v-expansion-panel-header>\n              <v-toolbar-title class=\"title\">Users</v-toolbar-title>\n            </v-expansion-panel-header>\n            <v-expansion-panel-content>\n              <v-data-table\n                  :headers=\"config.user_headers\"\n                  :items=\"users\"\n                  :items-per-page=\"5\">\n                <template v-slot:item.actions=\"{ item }\">\n                  <v-icon small class=\"mr-2\" @click=\"editUser(item)\">\n                    mdi-pencil\n                  </v-icon>\n                  <v-icon small @click=\"removeUser(item)\">mdi-delete</v-icon>\n                </template>\n              </v-data-table>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn text @click=\"newUser\">New user</v-btn>\n              </v-card-actions>\n            </v-expansion-panel-content>\n          </v-expansion-panel>\n        </v-col>\n        <v-col sm=\"12\" v-if=\"user.manages_projects\">\n          <v-expansion-panel>\n            <v-expansion-panel-header>\n              <v-toolbar-title class=\"title\">Projects</v-toolbar-title>\n            </v-expansion-panel-header>\n            <v-expansion-panel-content>\n              <v-data-table\n                  :headers=\"config.project_header\"\n                  :items=\"projects\"\n                  :items-per-page=\"5\">\n                <template v-slot:item.labels=\"{ item }\">\n                  <v-chip-group show-arrows column>\n                    <v-chip style=\"pointer-events: none;\"\n                            outlined\n                            :color=\"`rgb(${label.color[0]}, ${label.color[1]},${label.color[2]})`\"\n                            :readonly=\"true\"\n                            v-for=\"label in item.labels\" dark>\n                      {{ label.name }}\n                    </v-chip>\n                  </v-chip-group>\n                </template>\n                <template v-slot:item.actions=\"{ item }\">\n                  <v-tooltip bottom>\n                    <template v-slot:activator=\"{ on, attrs }\">\n                      <v-icon small class=\"mr-2\" v-bind=\"attrs\" v-on=\"on\" @click=\"showLabelData(item)\">\n                        mdi-label\n                      </v-icon>\n                    </template>\n                    <span>Copy label data to clipboard</span>\n                  </v-tooltip>\n                  <v-icon small class=\"mr-2\" @click=\"editProject(item)\">\n                    mdi-pencil\n                  </v-icon>\n                  <v-tooltip bottom>\n                    <template v-slot:activator=\"{ on, attrs }\">\n                      <v-icon small v-bind=\"attrs\" v-on=\"on\">mdi-delete</v-icon>\n                    </template>\n                    <span>Not implemented</span>\n                  </v-tooltip>\n                </template>\n              </v-data-table>\n\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn text @click=\"newProject\">New project</v-btn>\n              </v-card-actions>\n            </v-expansion-panel-content>\n          </v-expansion-panel>\n        </v-col>\n      </v-row>\n    </v-expansion-panels>\n    <v-navigation-drawer v-if=\"drawer\" v-model=\"drawer\" app temporary stateless right width=\"500px\">\n      <v-toolbar>\n        <v-toolbar-title>\n          <v-icon @click=\"drawer = false\" large class=\"mr-1\">mdi-close</v-icon>\n          Information editor\n        </v-toolbar-title>\n      </v-toolbar>\n      <v-container>\n        <user-editor v-if=\"mode === 'user'\" v-model=\"editing\" v-on:done=\"done\"/>\n        <task-batch v-else-if=\"mode === 'batch'\" v-model=\"editing\" v-on:done=\"done\"/>\n        <project-editor v-else-if=\"mode === 'project'\" v-model=\"editing\" v-on:done=\"done\"/>\n        <task-editor v-else-if=\"mode === 'task'\" v-model=\"editing\" v-on:done=\"done\"/>\n      </v-container>\n    </v-navigation-drawer>\n  </v-container>\n</template>\n\n<script>\n\nimport UserEditor from '../components/UserEditor.vue';\nimport ProjectEditor from '../components/ProjectEditor.vue';\nimport TaskEditor from '../components/TaskEditor.vue';\nimport TaskBatch from '../components/TaskBatch.vue';\nimport { showErrorModal } from '@/utils';\n\nexport default {\n  name: 'Admin',\n  components: {\n    TaskBatch,\n    TaskEditor,\n    ProjectEditor,\n    UserEditor,\n  },\n  computed: {\n    user() {\n      return this.$store.state.user;\n    },\n    tasksHeader() {\n      return [\n        {\n          text: 'id',\n          align: 'start',\n          sortable: false,\n          value: 'id',\n        },\n        {\n          text: 'Slides',\n          value: 'slides',\n        },\n        {\n          text: 'Project',\n          value: 'project.name',\n          filter: (value) => {\n            if (this.taskFilter.project == null\n                || this.taskFilter.project === 0) {\n              return true;\n            }\n            return value === this.taskFilter.project;\n          },\n        },\n        {\n          text: 'Annotators',\n          value: 'user_tasks',\n          filter: (value) => {\n            if (this.taskFilter.user == null\n                || this.taskFilter.user === 0) {\n              return true;\n            }\n            // for (const userTask in Object.values(value)){\n            //   if (userTask)\n            // }\n            return value.reduce(\n              (acc, userTask) => {\n                if (userTask.user != null) {\n                  return acc || userTask.user.name === this.taskFilter.user;\n                }\n                return acc || false;\n              },\n              false,\n            );\n          },\n        },\n        {\n          text: 'Actions',\n          value: 'actions',\n        },\n      ];\n    },\n  },\n  data: () => ({\n    drawer: false,\n    mode: 'user',\n    is_editing: false,\n    editing: null,\n    users: [],\n    projects: [],\n    tasks: [],\n    taskFilter: {\n      name: '',\n      project: null,\n      user: null,\n    },\n    task_type: 'annotations',\n    config: {\n      task_headers: {\n        1: [\n          {\n            text: 'id',\n            align: 'start',\n            sortable: false,\n            value: 'id',\n          },\n          {\n            text: 'Original task',\n            value: 'task',\n          },\n          {\n            text: 'To review',\n            value: 'revisions',\n          },\n          {\n            text: 'Users',\n            value: 'usertasks',\n          },\n          {\n            text: 'Actions',\n            value: 'actions',\n          },\n        ],\n      },\n      user_headers: [\n        {\n          text: 'id',\n          align: 'start',\n          sortable: false,\n          value: 'id',\n        },\n        {\n          text: 'Name',\n          value: 'name',\n        },\n        {\n          text: 'Username (login)',\n          value: 'username',\n        },\n        {\n          text: 'Is admin?',\n          value: 'is_admin',\n        },\n        {\n          text: 'Actions',\n          value: 'actions',\n        },\n      ],\n      project_header: [\n        {\n          text: 'Project name',\n          align: 'start',\n          sortable: false,\n          value: 'name',\n        },\n        {\n          text: 'Description',\n          value: 'description',\n        },\n        {\n          text: 'Labels',\n          value: 'labels',\n        },\n        {\n          text: 'Actions',\n          value: 'actions',\n        },\n      ],\n    },\n  }),\n  methods: {\n    done(which) {\n      this.drawer = false;\n      this.editing = null;\n      switch (which) {\n        case 'user':\n          this.loadUsers();\n          break;\n        case 'project':\n          this.loadProjects();\n          break;\n        case 'task':\n          this.loadTasks();\n          break;\n        default:\n          break;\n      }\n    },\n    openTask(task) {\n      this.$post('session/create', task)\n        .then((resp) => {\n          this.$store.commit('set_session', resp);\n          this.$router.push(`/session/${resp.id}`);\n        })\n        .catch((err) => {\n          this.$toast.error(`Oops, something went wrong:\\n${err.response.data.msg}`);\n          // showErrorModal(this, err);\n        });\n    },\n    newUser() {\n      this.editing = {\n        username: '',\n        is_admin: false,\n        manages_apps: false,\n        manages_users: false,\n        manages_tasks: false,\n        manages_projects: false,\n        can_export: false,\n        access_overview: false,\n      };\n      this.mode = 'user';\n      this.drawer = true;\n    },\n\n    newBatch() {\n      this.mode = 'batch';\n      this.drawer = true;\n    },\n\n    editUser(user) {\n      this.is_editing = true;\n      this.editing = user;\n      this.mode = 'user';\n      this.drawer = true;\n    },\n\n    removeUser(user) {\n      if (confirm('Are sure you want to remove this user?')) {\n        this.$get(`user/remove?user_id=${user.id}`)\n          .then(() => {\n            this.loadUsers();\n          })\n          .catch((err) => alert(err));\n      }\n    },\n\n    newProject() {\n      this.editing = {\n        name: '',\n        description: '',\n        folder: '',\n        labels: [],\n      };\n      this.mode = 'project';\n      this.drawer = true;\n    },\n\n    editProject(project) {\n      this.is_editing = true;\n      this.editing = project;\n      this.mode = 'project';\n      this.drawer = true;\n    },\n\n    showLabelData(item) {\n      navigator.clipboard.writeText(\n        JSON.stringify(item.labels),\n      );\n    },\n\n    newTask() {\n      this.editing = {\n        name: '',\n        type: 0,\n        slides: [],\n        assigned: [],\n      };\n      this.mode = 'task';\n      this.drawer = true;\n    },\n\n    editTask(task) {\n      this.is_editing = true;\n      this.editing = task;\n      this.mode = 'task';\n      this.drawer = true;\n    },\n\n    removeTask(task) {\n      if (confirm('Are you sure you want to remove this task? Annotations may be lost.')) {\n        this.$post('task/remove', task)\n          .then((resp) => {\n            console.log(resp);\n            this.loadTasks();\n          })\n          .catch((err) => {\n            alert(err);\n          });\n      }\n    },\n\n    loadUsers() {\n      if (this.user.manages_users) {\n        this.$get('user/list')\n          .then((resp) => {\n            console.log(resp);\n            this.users = resp;\n          })\n          .catch((err) => {\n            alert(err);\n          });\n      }\n    },\n\n    loadProjects() {\n      if (this.user.manages_projects) {\n        this.$get('project/list')\n          .then((resp) => {\n            console.log(resp);\n            this.projects = resp;\n          })\n          .catch((err) => {\n            alert(err);\n          });\n      }\n    },\n\n    loadTasks() {\n      if (this.user.manages_tasks) {\n        this.$get('task/management_list')\n          .then((resp) => {\n            this.tasks = resp;\n          })\n          .catch((err) => alert(err));\n      }\n    },\n\n    annotationTaskFiltering(value, search) {\n      return value != null && search != null && Array.isArray(value)\n          && value.some((slideName) => slideName.name.includes(search));\n    },\n  },\n  mounted() {\n    this.loadUsers();\n    this.loadProjects();\n    this.loadTasks();\n  },\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Admin.vue?vue&type=template&id=5b8e0a34&scoped=true&\"\nimport script from \"./Admin.vue?vue&type=script&lang=js&\"\nexport * from \"./Admin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b8e0a34\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VChipGroup } from 'vuetify/lib/components/VChipGroup';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VExpansionPanel } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelContent } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelHeader } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanels } from 'vuetify/lib/components/VExpansionPanel';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VCardActions,VChip,VChipGroup,VCol,VContainer,VDataTable,VExpansionPanel,VExpansionPanelContent,VExpansionPanelHeader,VExpansionPanels,VIcon,VNavigationDrawer,VRow,VSpacer,VTab,VTabs,VTextField,VToolbar,VToolbarTitle,VTooltip})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app-bar',{attrs:{\"app\":\"\",\"color\":\"primary\",\"dark\":\"\",\"dense\":\"\"}},[(_vm.$route.name==='session')?_c('v-btn',{staticClass:\"hidden-xs-only\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('v-icon',[_vm._v(\"mdi-arrow-left\")])],1):_vm._e(),_c('div',{staticClass:\"d-flex align-center\"},[_c('v-img',{staticClass:\"shrink mr-2\",attrs:{\"alt\":\"Vuetify Logo\",\"contain\":\"\",\"src\":\"\",\"transition\":\"scale-transition\",\"width\":\"40\"}}),_c('v-toolbar-title',[_vm._v(\"WSI Annotation Tool\")])],1),_c('v-spacer')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-app-bar app color=\"primary\" dark dense>\n    <v-btn v-if=\"$route.name==='session'\" @click=\"$router.go(-1)\" icon class=\"hidden-xs-only\">\n      <v-icon>mdi-arrow-left</v-icon>\n    </v-btn>\n    <div class=\"d-flex align-center\">\n      <v-img\n          alt=\"Vuetify Logo\"\n          class=\"shrink mr-2\"\n          contain\n          src=\"\"\n          transition=\"scale-transition\"\n          width=\"40\"\n      />\n\n      <v-toolbar-title>WSI Annotation Tool</v-toolbar-title>\n    </div>\n\n    <v-spacer></v-spacer>\n  </v-app-bar>\n</template>\n\n<script>\nexport default {\n  name: 'AppBar',\n\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppBar.vue?vue&type=template&id=2530140e&scoped=true&\"\nimport script from \"./AppBar.vue?vue&type=script&lang=js&\"\nexport * from \"./AppBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2530140e\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VAppBar,VBtn,VIcon,VImg,VSpacer,VToolbarTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app-bar',{attrs:{\"app\":\"\",\"color\":\"primary\",\"dark\":\"\"},scopedSlots:_vm._u([{key:\"extension\",fn:function(){return [_c('v-tabs',{attrs:{\"align-with-title\":\"\"}},[(_vm.access_overview)?_c('v-tab',{attrs:{\"to\":\"/overview\"}},[_c('span',{staticStyle:{\"font-weight\":\"300\"}},[_vm._v(\"Overview\")])]):_vm._e(),_c('v-tab',{attrs:{\"to\":\"/tasks\"}},[_vm._v(\"Tasks\")]),(_vm.manage_apps)?_c('v-tab',{attrs:{\"to\":\"/apps\"}},[_vm._v(\"Apps\")]):_vm._e(),(_vm.can_export)?_c('v-tab',{attrs:{\"to\":\"/export\"}},[_vm._v(\"Export\")]):_vm._e(),(_vm.is_admin)?_c('v-tab',{attrs:{\"to\":\"/admin\"}},[_vm._v(\"Management\")]):_vm._e()],1)]},proxy:true}])},[_c('v-toolbar-title',[_vm._v(\"WSI Annotation Tool\")]),_c('v-spacer'),_c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-card',_vm._g(_vm._b({staticClass:\"user-card\",attrs:{\"dark\":\"\",\"flat\":\"\",\"outlined\":\"\",\"color\":\"primary lighten-1\"}},'v-card',attrs,false),on),[_c('v-card-text',[_c('v-icon',{staticClass:\"mr-1\"},[_vm._v(\"mdi-dots-vertical-circle\")]),_vm._v(\"\\n          \"+_vm._s(_vm.user_name)+\"\\n        \")],1)],1)]}}])},[_c('v-list',[_c('v-list-item',{on:{\"click\":function($event){_vm.changePassword = true}}},[_c('v-list-item-title',[_vm._v(\"Change password\")])],1),_c('v-divider'),_c('v-list-item',{on:{\"click\":_vm.logout}},[_c('v-list-item-title',[_vm._v(\"Logout\")])],1)],1)],1),(_vm.changePassword)?_c('ChangePassword',{model:{value:(_vm.changePassword),callback:function ($$v) {_vm.changePassword=$$v},expression:\"changePassword\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"width\":\"300\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"text-h5 grey lighten-2\"},[_vm._v(\"\\n      Change password\\n    \")]),_c('v-card-text',[_c('v-text-field',{attrs:{\"label\":\"New password\",\"type\":\"password\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.close}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":_vm.submit}},[_vm._v(\"\\n        Change password\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-dialog v-model=\"value\" width=\"300\">\r\n    <v-card>\r\n      <v-card-title class=\"text-h5 grey lighten-2\">\r\n        Change password\r\n      </v-card-title>\r\n\r\n      <v-card-text>\r\n        <v-text-field v-model=\"password\" label=\"New password\" type=\"password\"/>\r\n      </v-card-text>\r\n\r\n      <v-divider></v-divider>\r\n\r\n      <v-card-actions>\r\n        <v-spacer></v-spacer>\r\n        <v-btn text @click=\"close\">Cancel</v-btn>\r\n        <v-btn color=\"primary\" text @click=\"submit\">\r\n          Change password\r\n        </v-btn>\r\n      </v-card-actions>\r\n    </v-card>\r\n  </v-dialog>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ChangePassword',\r\n  watch: {},\r\n  data() {\r\n    return {\r\n      password: null,\r\n    };\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.$emit('input', false);\r\n    },\r\n    submit() {\r\n      this.$post('user/change_password', { password: this.password })\r\n        .then((resp) => {\r\n          this.$emit('input', false);\r\n        })\r\n        .catch((err) => alert(err));\r\n    },\r\n  },\r\n  props: ['value'],\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChangePassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChangePassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChangePassword.vue?vue&type=template&id=a5269396&scoped=true&\"\nimport script from \"./ChangePassword.vue?vue&type=script&lang=js&\"\nexport * from \"./ChangePassword.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a5269396\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDialog,VDivider,VSpacer,VTextField})\n","<template>\r\n  <v-app-bar app color=\"primary\" dark>\r\n\r\n    <v-toolbar-title>WSI Annotation Tool</v-toolbar-title>\r\n\r\n    <v-spacer></v-spacer>\r\n\r\n    <v-menu offset-y>\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-card class=\"user-card\"\r\n                dark\r\n                flat\r\n                outlined\r\n                color=\"primary lighten-1\"\r\n                v-bind=\"attrs\"\r\n                v-on=\"on\">\r\n          <v-card-text>\r\n            <v-icon class=\"mr-1\">mdi-dots-vertical-circle</v-icon>\r\n            {{ user_name }}\r\n          </v-card-text>\r\n        </v-card>\r\n      </template>\r\n      <v-list>\r\n        <v-list-item @click=\"changePassword = true\">\r\n          <v-list-item-title>Change password</v-list-item-title>\r\n        </v-list-item>\r\n        <v-divider></v-divider>\r\n        <v-list-item @click=\"logout\">\r\n          <v-list-item-title>Logout</v-list-item-title>\r\n        </v-list-item>\r\n      </v-list>\r\n    </v-menu>\r\n\r\n    <!--    <v-spacer></v-spacer>-->\r\n    <template v-slot:extension>\r\n      <v-tabs align-with-title>\r\n        <v-tab v-if=\"access_overview\" to=\"/overview\">\r\n          <span style=\"font-weight: 300\">Overview</span>\r\n        </v-tab>\r\n        <v-tab to=\"/tasks\">Tasks</v-tab>\r\n        <v-tab v-if=\"manage_apps\" to=\"/apps\">Apps</v-tab>\r\n        <v-tab v-if=\"can_export\" to=\"/export\">Export</v-tab>\r\n        <v-tab v-if=\"is_admin\" to=\"/admin\">Management</v-tab>\r\n      </v-tabs>\r\n    </template>\r\n    <ChangePassword v-if=\"changePassword\" v-model=\"changePassword\"/>\r\n  </v-app-bar>\r\n</template>\r\n\r\n<script>\r\nimport ChangePassword from '@/components/ChangePassword';\r\n\r\nexport default {\r\n  name: 'AppBar',\r\n  components: { ChangePassword },\r\n  data() {\r\n    return { changePassword: false };\r\n  },\r\n  computed: {\r\n    is_admin() {\r\n      const { user } = this.$store.state;\r\n      return user.manages_apps || user.manages_users || user.manages_tasks || user.manages_projects;\r\n    },\r\n    can_export() {\r\n      const { user } = this.$store.state;\r\n      return user.can_export;\r\n    },\r\n    access_overview() {\r\n      const { user } = this.$store.state;\r\n      return user.access_overview;\r\n    },\r\n    manage_apps() {\r\n      const { user } = this.$store.state;\r\n      return user.manages_apps;\r\n    },\r\n    user_name() {\r\n      return this.$store.state.user.name;\r\n    },\r\n  },\r\n  methods: {\r\n    logout() {\r\n      this.$store.commit('logout');\r\n      this.$router.push('/login');\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-card {\r\n  height: 100%;\r\n  min-width: 200px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminAppBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminAppBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminAppBar.vue?vue&type=template&id=73d20e91&scoped=true&\"\nimport script from \"./AdminAppBar.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminAppBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminAppBar.vue?vue&type=style&index=0&id=73d20e91&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73d20e91\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VAppBar,VCard,VCardText,VDivider,VIcon,VList,VListItem,VListItemTitle,VMenu,VSpacer,VTab,VTabs,VToolbarTitle})\n","import Vue from 'vue';\nimport Router from 'vue-router';\nimport store from '@/store';\nimport Tasks from './views/Tasks.vue';\nimport Session from './views/Session.vue';\nimport Admin from './views/Admin.vue';\nimport AppBar from './components/AppBar.vue';\nimport AdminAppBar from './components/AdminAppBar.vue';\n\nVue.use(Router);\n\nconst newRouter = new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'home',\n      component: () => import('./views/Login.vue'),\n    },\n    {\n      path: '/main',\n      name: 'main',\n      components: {\n        default: Tasks,\n        app_bar: AdminAppBar,\n      },\n      meta: {\n        auth: true,\n      },\n    },\n    {\n      path: '/tasks',\n      name: 'tasks',\n      components: {\n        default: Tasks,\n        app_bar: AdminAppBar,\n      },\n      meta: {\n        auth: true,\n      },\n    },\n\n    {\n      path: '/session/:session_id',\n      name: 'session',\n      components: {\n        default: Session,\n        app_bar: AppBar,\n      },\n      meta: {\n        auth: true,\n      },\n    },\n    {\n      path: '/admin',\n      name: 'admin',\n      components: {\n        default: Admin,\n        app_bar: AdminAppBar,\n      },\n      meta: {\n        auth: true,\n        is_admin: false,\n      },\n    },\n    {\n      path: '/export',\n      name: 'export',\n      components: {\n        default: () => import('./views/Export.vue'),\n        app_bar: AdminAppBar,\n      },\n      meta: {\n        auth: true,\n        is_admin: false,\n      },\n    },\n    {\n      path: '/overview',\n      name: 'overview',\n      components: {\n        default: () => import('./views/TaskOverview.vue'),\n        app_bar: AdminAppBar,\n      },\n      meta: {\n        auth: true,\n      },\n    },\n    {\n      path: '/apps',\n      name: 'apps',\n      components: {\n        default: () => import('./views/Apps.vue'),\n        app_bar: AdminAppBar,\n      },\n      meta: {\n        auth: true,\n      },\n    },\n    {\n      path: '/login',\n      name: 'login',\n      component: () => import('./views/Login.vue'),\n    },\n  ],\n});\nnewRouter.beforeEach((to, from, next) => {\n  if (to.matched.some((record) => record.meta.auth)) {\n    if (store.state.token == null) {\n      next({\n        path: '/login',\n        params: { nextUrl: to.fullPath },\n      });\n    } else if (to.matched.some((record) => record.meta.is_admin)) {\n      if (store.state.user.is_admin) {\n        next();\n      } else {\n        next({ name: 'login' });\n      }\n    } else {\n      next();\n    }\n  } else {\n    next();\n  }\n});\nexport default newRouter;\n","import Vue from 'vue';\r\nimport Vuetify from 'vuetify/lib/framework';\r\nimport colors from 'vuetify/lib/util/colors';\r\nimport '@mdi/font/css/materialdesignicons.css';\r\n\r\nVue.use(Vuetify);\r\n\r\nexport default new Vuetify({\r\n  theme: {\r\n    icons: {\r\n      iconfont: 'mdi',\r\n    },\r\n    themes: {\r\n      light: {\r\n        primary: colors.blueGrey.darken3,\r\n        secondary: colors.grey.darken1,\r\n        accent: colors.orange.accent4,\r\n        error: colors.red.accent3,\r\n      },\r\n      dark: {\r\n        primary: colors.blue.lighten3,\r\n      },\r\n    },\r\n  },\r\n});\r\n","import Vue from 'vue';\nimport VueAxios from 'vue-plugin-axios';\nimport axios from 'axios';\nimport store from '@/store';\n\nVue.use(VueAxios, {\n  axios,\n  config: {\n    baseURL: process.env.VUE_APP_BASE_URL,\n  },\n\n  interceptors: {\n    beforeRequest(config, axiosInstance) {\n      // Adding the jwt token, if we have one\n      if (store.state.token != null) {\n        const { token } = store.state;\n\n        if (token) { config.headers.Authorization = `Bearer ${token}`; }\n      }\n\n      return config;\n    },\n    beforeResponse(config, axiosInstance) {\n      // console.log(\"beforeResponse: \", config)\n    },\n\n    beforeResponseError(config, axiosInstance) {\n      if (config.statusCode === 401) {\n      }\n    },\n\n  },\n});\nexport default axios;\n","import VueSplit from 'vue-split-panel';\r\nimport Vue from 'vue';\r\n\r\nVue.use(VueSplit);\r\n\r\nexport default VueSplit;\r\n","import Vue from 'vue';\nimport Toast, { POSITION } from 'vue-toastification';\nimport 'vue-toastification/dist/index.css';\n\nconst options = {\n  position: POSITION.BOTTOM_LEFT,\n};\n\nVue.use(Toast, options);\n","import 'vuetify/dist/vuetify.min.css';\nimport Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport vuetify from './plugins/vuetify';\nimport axios from './plugins/axios';\nimport split from './plugins/split';\nimport toast from './plugins/toast';\n\nVue.config.productionTip = false;\n\nnew Vue({\n  router,\n  store,\n  vuetify,\n  axios,\n  split,\n  toast,\n  render: (h) => h(App),\n}).$mount('#app');\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationCard.vue?vue&type=style&index=0&id=581f2eed&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-text-field',{attrs:{\"label\":\"Task name\"},model:{value:(_vm.task.name),callback:function ($$v) {_vm.$set(_vm.task, \"name\", $$v)},expression:\"task.name\"}}),_c('v-select',{attrs:{\"label\":\"Project\",\"chips\":\"\",\"items\":_vm.projects,\"item-text\":\"name\",\"item-value\":\"id\"},model:{value:(_vm.task.project_id),callback:function ($$v) {_vm.$set(_vm.task, \"project_id\", $$v)},expression:\"task.project_id\"}}),_c('v-tabs',{model:{value:(_vm.task.type),callback:function ($$v) {_vm.$set(_vm.task, \"type\", $$v)},expression:\"task.type\"}},[_c('v-tab',{attrs:{\"disabled\":_vm.task.id != null || _vm.isAppContext}},[_c('v-simple-checkbox',{attrs:{\"disabled\":\"\",\"value\":_vm.task.type === 0}}),_vm._v(\"\\n      User annotation\\n    \")],1),_c('v-tab',{attrs:{\"disabled\":_vm.task.id != null || _vm.isAppContext}},[_c('v-simple-checkbox',{attrs:{\"disabled\":\"\",\"value\":_vm.task.type === 1}}),_vm._v(\"\\n      Revision\\n    \")],1),_c('v-tab',{attrs:{\"disabled\":_vm.task.id != null}},[_c('v-simple-checkbox',{attrs:{\"disabled\":\"\",\"value\":_vm.task.type === 2}}),_vm._v(\"\\n      App annotation\\n    \")],1)],1),(_vm.task.id == null)?_c('v-tabs-items',{model:{value:(_vm.taskType),callback:function ($$v) {_vm.taskType=$$v},expression:\"taskType\"}},[_c('v-tab-item',{attrs:{\"value\":\"annotation\"}},[_c('div',{staticStyle:{\"overflow-y\":\"auto\"}},[_c('v-scroll-x-transition',{attrs:{\"group\":\"\",\"hide-on-leave\":\"\"}},_vm._l((_vm.task.slides),function(selection,i){return _c('v-chip',{key:i,staticClass:\"ma-1\",attrs:{\"color\":\"grey\",\"dark\":\"\",\"small\":\"\"}},[_c('v-icon',{attrs:{\"left\":\"\",\"small\":\"\"}},[_vm._v(\"\\n              mdi-file\\n            \")]),_vm._v(\"\\n            \"+_vm._s(selection.name)+\"\\n          \")],1)}),1)],1),_c('v-treeview',{staticStyle:{\"max-height\":\"300px\",\"overflow-y\":\"auto\"},attrs:{\"items\":_vm.files,\"selectable\":\"\",\"dense\":\"\",\"open-on-click\":\"\",\"item-text\":\"name\",\"readonly\":_vm.task.project_id == null,\"return-object\":\"\",\"shaped\":\"\",\"hoverable\":\"\",\"selection-type\":\"leaf\"},model:{value:(_vm.task.slides),callback:function ($$v) {_vm.$set(_vm.task, \"slides\", $$v)},expression:\"task.slides\"}})],1),_c('v-tab-item',{attrs:{\"value\":\"revision\"}},[_c('v-select',{attrs:{\"label\":\"Tasks\",\"items\":_vm.reviewTaskList,\"item-value\":\"id\",\"item-text\":\"name\",\"return-object\":\"\"},scopedSlots:_vm._u([{key:\"item\",fn:function(ref){\nvar item = ref.item;\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-list-item',_vm._g(_vm._b({staticClass:\"fit-window\",attrs:{\"three-line\":\"\"}},'v-list-item',attrs,false),on),[_c('v-list-item-content',[(item.name !== '')?_c('v-list-item-title',[_vm._v(_vm._s(item.name))]):_c('v-list-item-title',[_vm._v(\"Annotation task number #\"+_vm._s(item.id))]),_c('v-list-item-subtitle',[_vm._v(\"Created: \"+_vm._s(item.created))]),_c('v-list-item-action-text',_vm._l((item.slides),function(slide){return _c('span',{key:slide.id,staticClass:\"fake-chip\"},[_vm._v(_vm._s(slide.name))])}),0)],1),_c('v-list-item-action',[_c('v-simple-checkbox',{attrs:{\"disabled\":\"\",\"value\":attrs.inputValue,\"ripple\":false}})],1)],1)]}}],null,false,742255232),model:{value:(_vm.review_task),callback:function ($$v) {_vm.review_task=$$v},expression:\"review_task\"}}),(_vm.task.task_id != null)?_c('v-select',{attrs:{\"label\":\"Annotator\",\"items\":_vm.review_task.user_tasks,\"item-value\":\"id\",\"item-text\":\"app.name\",\"multiple\":\"\"},scopedSlots:_vm._u([{key:\"item\",fn:function(ref){\nvar item = ref.item;\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-list-item',_vm._g(_vm._b({staticClass:\"fit-window\",attrs:{\"two-line\":\"\"}},'v-list-item',attrs,false),on),[_c('v-list-item-content',[('app' in item)?_c('v-list-item-title',[_vm._v(_vm._s(item.app.name))]):_c('v-list-item-title',[_vm._v(_vm._s(item.user.name))]),_c('v-list-item-subtitle',[_vm._v(_vm._s(_vm.taskLabel[item.task.type])+\" ♦ Created: \"+_vm._s(item.created)+\"\\n              \")])],1),_c('v-list-item-action',[_c('v-simple-checkbox',{attrs:{\"disabled\":\"\",\"value\":attrs.inputValue,\"ripple\":false}})],1)],1)]}}],null,false,1733673949),model:{value:(_vm.task.revision),callback:function ($$v) {_vm.$set(_vm.task, \"revision\", $$v)},expression:\"task.revision\"}}):_vm._e()],1)],1):_vm._e(),(_vm.value.type === 2)?_c('v-select',{attrs:{\"label\":\"Apps assigned\",\"chips\":\"\",\"multiple\":\"\",\"items\":_vm.apps,\"item-text\":\"name\",\"return-object\":\"\"},model:{value:(_vm.task.assigned),callback:function ($$v) {_vm.$set(_vm.task, \"assigned\", $$v)},expression:\"task.assigned\"}}):_c('v-select',{attrs:{\"label\":\"Users assigned\",\"chips\":\"\",\"multiple\":\"\",\"items\":_vm.users,\"item-text\":\"username\",\"return-object\":\"\"},model:{value:(_vm.task.assigned),callback:function ($$v) {_vm.$set(_vm.task, \"assigned\", $$v)},expression:\"task.assigned\"}}),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"outlined\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"Continue\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!--  <v-form  v-if=\"task != null\">-->\n    <v-text-field label=\"Task name\" v-model=\"task.name\"/>\n    <v-select label=\"Project\" chips :items=\"projects\" item-text=\"name\"\n              item-value=\"id\" v-model=\"task.project_id\"/>\n    <v-tabs v-model=\"task.type\">\n      <v-tab :disabled=\"task.id != null || isAppContext\">\n        <v-simple-checkbox disabled :value=\"task.type === 0\"/>\n        User annotation\n      </v-tab>\n      <v-tab :disabled=\"task.id != null || isAppContext\">\n        <v-simple-checkbox disabled :value=\"task.type === 1\"/>\n        Revision\n      </v-tab>\n      <v-tab :disabled=\"task.id != null\">\n        <v-simple-checkbox disabled :value=\"task.type === 2\"/>\n        App annotation\n      </v-tab>\n    </v-tabs>\n    <v-tabs-items v-if=\"task.id == null\" v-model=\"taskType\">\n      <v-tab-item value=\"annotation\">\n        <!--        <v-select :label=\"`File to analyze ${current_folder != null ? `(from ${current_folder})` : '' }`\"-->\n        <!--                  v-model=\"task.slides\"-->\n        <!--                  :items=\"files\" :readonly=\"task.project_id == null\"-->\n        <!--                  item-text=\"id\"-->\n        <!--                  multiple-->\n        <!--                  chips-->\n        <!--                  deletable-chips-->\n        <!--                  return-object/>-->\n        <div style=\"overflow-y: auto\">\n          <v-scroll-x-transition group hide-on-leave>\n            <v-chip v-for=\"(selection, i) in task.slides\" :key=\"i\" color=\"grey\"\n                    dark small class=\"ma-1\">\n              <v-icon left small>\n                mdi-file\n              </v-icon>\n              {{ selection.name }}\n            </v-chip>\n          </v-scroll-x-transition>\n        </div>\n        <v-treeview\n            style=\"max-height: 300px; overflow-y: auto\"\n            :items=\"files\"\n            selectable\n            dense\n            open-on-click\n            item-text=\"name\"\n            :readonly=\"task.project_id == null\"\n            v-model=\"task.slides\"\n            return-object\n            shaped\n            hoverable\n            selection-type=\"leaf\"/>\n      </v-tab-item>\n      <v-tab-item value=\"revision\">\n        <v-select label=\"Tasks\" v-model=\"review_task\"\n                  :items=\"reviewTaskList\"\n                  item-value=\"id\" item-text=\"name\"\n                  return-object>\n          <template v-slot:item=\"{ item, on, attrs  }\">\n            <v-list-item class=\"fit-window\" three-line v-bind=\"attrs\" v-on=\"on\">\n              <v-list-item-content>\n                <v-list-item-title v-if=\"item.name !== ''\">{{ item.name }}</v-list-item-title>\n                <v-list-item-title v-else>Annotation task number #{{ item.id }}</v-list-item-title>\n                <v-list-item-subtitle>Created: {{ item.created }}</v-list-item-subtitle>\n                <v-list-item-action-text>\n                  <span class=\"fake-chip\" v-for=\"slide in item.slides\" :key=\"slide.id\">{{ slide.name }}</span>\n                </v-list-item-action-text>\n              </v-list-item-content>\n              <v-list-item-action>\n                <v-simple-checkbox disabled :value=\"attrs.inputValue\" :ripple=\"false\"/>\n              </v-list-item-action>\n            </v-list-item>\n          </template>\n        </v-select>\n        <v-select v-if=\"task.task_id != null\" label=\"Annotator\"\n                  v-model=\"task.revision\"\n                  :items=\"review_task.user_tasks\"\n                  item-value=\"id\" item-text=\"app.name\"\n                  multiple>\n          <template v-slot:item=\"{ item, on, attrs  }\">\n            <v-list-item class=\"fit-window\" two-line v-bind=\"attrs\" v-on=\"on\">\n              <v-list-item-content>\n                <v-list-item-title v-if=\"'app' in item\">{{ item.app.name }}</v-list-item-title>\n                <v-list-item-title v-else>{{ item.user.name }}</v-list-item-title>\n                <v-list-item-subtitle>{{ taskLabel[item.task.type] }} ♦ Created: {{\n                    item.created\n                  }}\n                </v-list-item-subtitle>\n              </v-list-item-content>\n              <v-list-item-action>\n                <v-simple-checkbox disabled :value=\"attrs.inputValue\" :ripple=\"false\"/>\n              </v-list-item-action>\n            </v-list-item>\n          </template>\n        </v-select>\n      </v-tab-item>\n    </v-tabs-items>\n\n    <v-select v-if=\"value.type === 2\" label=\"Apps assigned\" chips multiple\n              :items=\"apps\" item-text=\"name\"\n              v-model=\"task.assigned\"\n              return-object/>\n    <v-select v-else label=\"Users assigned\" chips multiple\n              :items=\"users\" item-text=\"username\"\n              v-model=\"task.assigned\"\n              return-object/>\n    <v-card-actions>\n      <v-spacer></v-spacer>\n      <v-btn @click=\"save\" outlined>Continue</v-btn>\n    </v-card-actions>\n    <!--    -->\n    <!--  </v-form>-->\n\n  </div>\n</template>\n\n<script>\nimport _ from 'lodash';\n\nexport default {\n  name: 'TaskEditor',\n  watch: {\n    value: {\n      immediate: true,\n      handler(newValue) {\n        this.task = _.cloneDeep(newValue);\n      },\n    },\n\n    color_picked(newValue) {\n      // this.editing_label.color = `${new_value.rgba.r};${new_value.rgba.g};${new_value.rgba.b}`\n      this.editing_label.color = [newValue.rgba.r, newValue.rgba.g, newValue.rgba.b];\n    },\n    'task.project_id': function (newProjectId) {\n      if (newProjectId != null) {\n        if (this.task.type === 1) {\n          // We have to load this project's tasks:\n          this.loadReviewTasks(newProjectId);\n        } else {\n          // We have to load this project's files:\n          this.loadFiles(newProjectId);\n        }\n      }\n    },\n    'task.type': function (newValue) {\n      if (newValue === 1 && this.reviewTaskList.length === 0) {\n        this.loadReviewTasks(this.task.project_id);\n      }\n    },\n    review_task(newValue) {\n      this.task.task_id = newValue.id;\n    },\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.user;\n    },\n    taskType() {\n      if (this.task.type === 0 || this.task.type === 2) {\n        return 'annotation';\n      }\n      return 'revision';\n    },\n    isAppContext() {\n      return this.value.type === 2;\n    },\n  },\n  data: () => ({\n    task: null,\n    editing_label: null,\n    new_label: null,\n    users: [],\n    apps: [],\n    projects: [],\n    files: [],\n    reviewTaskList: [],\n    review_task: [],\n    taskLabel: {\n      0: 'Human annotation',\n      2: 'App annotation',\n    },\n  }),\n  methods: {\n    loadUsers() {\n      this.$get('user/list')\n        .then((resp) => {\n          this.users = resp;\n        })\n        .catch((err) => alert(err));\n    },\n\n    loadApps() {\n      this.$get('app/list')\n        .then((resp) => {\n          this.apps = resp;\n        })\n        .catch((err) => alert(err));\n    },\n\n    loadProjects() {\n      this.$get('project/list')\n        .then((resp) => this.projects = resp)\n        .catch((err) => alert(err));\n    },\n\n    loadReviewTasks(projectId) {\n      if (projectId != null) {\n        this.$get(`project/tasks?project_id=${projectId}`)\n          .then((resp) => {\n            this.reviewTaskList = resp;\n          })\n          .catch((err) => alert(err));\n      }\n    },\n\n    save() {\n      if (this.task.id == null) {\n        this.$post('task/new', this.task)\n          .then((resp) => {\n            this.task = resp;\n            this.$emit('input', resp);\n            this.$emit('done', 'task');\n          })\n          .catch((err) => {\n            alert(err);\n          });\n      } else {\n        this.$post('task/edit', this.task)\n          .then((resp) => {\n            this.task = resp;\n            this.$emit('input', resp);\n            this.$emit('done', 'task');\n          })\n          .catch((err) => {\n            alert(err);\n          });\n      }\n    },\n    loadFiles(projectId) {\n      this.$get(`task/files?project_id=${projectId}`)\n        .then((resp) => {\n          this.files = resp;\n        })\n        .catch(() => {\n          alert('Unable to locate the project\\'s folder. Make sure the project is properly setup for the current environment.');\n        });\n    },\n  },\n  mounted() {\n    this.loadProjects();\n    if (this.isAppContext) {\n      this.loadApps();\n    } else {\n      this.loadUsers();\n    }\n    if (this.task.project != null) {\n      this.loadFiles(this.task.project.id);\n    }\n  },\n  props: ['value'],\n};\n</script>\n\n<style scoped>\n.fit-window {\n  max-width: 500px;\n}\n\n.fake-chip {\n  margin-right: 2px;\n  margin-left: 2px;\n  border-radius: 10px;\n  padding-left: 4px;\n  padding-right: 4px;\n  border: 1px dotted #37474f;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaskEditor.vue?vue&type=template&id=20cb6312&scoped=true&\"\nimport script from \"./TaskEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./TaskEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TaskEditor.vue?vue&type=style&index=0&id=20cb6312&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20cb6312\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemActionText } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VScrollXTransition } from 'vuetify/lib/components/transitions';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSimpleCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTreeview } from 'vuetify/lib/components/VTreeview';\ninstallComponents(component, {VBtn,VCardActions,VChip,VIcon,VListItem,VListItemAction,VListItemActionText,VListItemContent,VListItemSubtitle,VListItemTitle,VScrollXTransition,VSelect,VSimpleCheckbox,VSpacer,VTab,VTabItem,VTabs,VTabsItems,VTextField,VTreeview})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.isLoading)?_c('div',[_c('v-progress-circular',{staticClass:\"loading\",attrs:{\"indeterminate\":true,\"size\":\"52\"}})],1):_c('div',[_c('v-fade-transition',[_vm._t(\"default\")],2)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div v-if=\"isLoading\">\n      <v-progress-circular :indeterminate=\"true\" class=\"loading\" size=\"52\"/>\n    </div>\n    <div v-else>\n      <v-fade-transition>\n        <slot></slot>\n      </v-fade-transition>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'LoadingContent',\n  watch: {\n    loading() {\n    },\n  },\n  props: ['isLoading'],\n};\n</script>\n\n<style scoped>\n.loading {\n  position: absolute;\n\n  margin: auto;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingContent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoadingContent.vue?vue&type=template&id=320d1016&scoped=true&\"\nimport script from \"./LoadingContent.vue?vue&type=script&lang=js&\"\nexport * from \"./LoadingContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LoadingContent.vue?vue&type=style&index=0&id=320d1016&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"320d1016\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFadeTransition } from 'vuetify/lib/components/transitions';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\ninstallComponents(component, {VFadeTransition,VProgressCircular})\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingContent.vue?vue&type=style&index=0&id=320d1016&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MLPredictionsOverlapTool.vue?vue&type=style&index=0&id=5d34e24f&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WSIViewer.vue?vue&type=style&index=0&id=70ecfa2c&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskEditor.vue?vue&type=style&index=0&id=20cb6312&scoped=true&lang=css&\""],"sourceRoot":""}