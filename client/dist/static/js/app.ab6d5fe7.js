(function(t){function e(e){for(var i,o,s=e[0],l=e[1],c=e[2],u=0,d=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);h&&h(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(i=!1)}i&&(r.splice(e--,1),t=l(l.s=n[0]))}return t}var i={},o={app:0},a={app:0},r=[];function s(t){return l.p+"static/js/"+({}[t]||t)+"."+{"chunk-2d22d746":"3e7dac2f","chunk-928ee46e":"d1a3115f"}[t]+".js"}function l(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(t){var e=[],n={"chunk-928ee46e":1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise((function(e,n){for(var i="static/css/"+({}[t]||t)+"."+{"chunk-2d22d746":"31d6cfe0","chunk-928ee46e":"d1417cf6"}[t]+".css",a=l.p+i,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var c=r[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===i||u===a))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],u=c.getAttribute("data-href");if(u===i||u===a)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var i=e&&e.target&&e.target.src||a,r=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=i,delete o[t],h.parentNode.removeChild(h),n(r)},h.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){o[t]=0})));var i=a[t];if(0!==i)if(i)e.push(i[2]);else{var r=new Promise((function(e,n){i=a[t]=[e,n]}));e.push(i[2]=r);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=s(t);var d=new Error;c=function(e){u.onerror=u.onload=null,clearTimeout(h);var n=a[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",d.name="ChunkLoadError",d.type=i,d.request=o,n[1](d)}a[t]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(e)},l.m=t,l.c=i,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(n,i,function(e){return t[e]}.bind(null,i));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var h=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"3b12":function(t,e,n){"use strict";n("44cc")},"3c8b":function(t,e,n){},"44cc":function(t,e,n){},"49ce":function(t,e,n){},"515a":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"seadragon-viewer"}}),t.drawer?n("div",{staticClass:"toolbox drawing-toolbox"},[n("div",{staticClass:"zoom-shortcuts"},[n("v-menu",{attrs:{top:"","close-on-click":!0,"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{text:""}},"v-btn",o,!1),i),[n("v-avatar",{staticClass:"mr-2",attrs:{color:"rgb("+t.selected_label.color[0]+","+t.selected_label.color[1]+","+t.selected_label.color[2]+")",size:"26"}}),t._v("\n            "+t._s(t.selected_label.name)+"\n          ")],1)]}}],null,!1,2314977170)},[n("v-list",t._l(t.labels,(function(e,i){return n("v-list-item",{key:i,on:{click:function(n){t.selected_label=e}}},[n("v-list-item-avatar",[n("v-avatar",{attrs:{color:"rgb("+e.color[0]+","+e.color[1]+","+e.color[2]+")",size:"26"}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.name))])],1)],1)})),1)],1)],1),n("v-divider"),null==t.editing.element?n("div",[n("v-btn",{attrs:{text:"",icon:"",color:"polygon"===this.selected_tool?"primary":"grey"},on:{click:function(e){t.selected_tool="polygon"}}},[n("v-icon",[t._v("mdi-vector-polygon")])],1),n("v-btn",{attrs:{text:"",icon:"",color:"rect"===this.selected_tool?"primary":"grey"},on:{click:function(e){t.selected_tool="rect"}}},[n("v-icon",[t._v("mdi-vector-rectangle")])],1),n("v-btn",{attrs:{text:"",icon:"",color:"free"===this.selected_tool?"primary":"grey"},on:{click:function(e){t.selected_tool="free"}}},[n("v-icon",[t._v("mdi-lead-pencil")])],1),n("v-btn",{attrs:{text:"",icon:"",color:"brush"===this.selected_tool?"primary":"grey"},on:{click:function(e){t.selected_tool="brush"}}},[n("v-icon",[t._v("mdi-brush")])],1)],1):t._e(),null!=t.editing.element?n("div",[n("v-slider",{attrs:{step:"1",dense:"","hide-details":"",max:t.editing.max_undo,label:"Undo"},model:{value:t.editing.undo,callback:function(e){t.$set(t.editing,"undo",e)},expression:"editing.undo"}}),n("div",{staticClass:"zoom-shortcuts"},[n("v-btn",{attrs:{text:"",icon:"",color:"mover"===t.editing.mode?"primary":"grey"},on:{click:function(e){t.editing.mode="mover"}}},[n("v-icon",[t._v("mdi-vector-polyline-edit")])],1),n("v-btn",{attrs:{text:"",icon:"",color:"eraser"===t.editing.mode?"primary":"grey"},on:{click:function(e){t.editing.mode="eraser"}}},[n("v-icon",[t._v("mdi-vector-polyline-minus")])],1),n("v-btn",{attrs:{text:"",icon:"",color:"creator"===t.editing.mode?"primary":"grey"},on:{click:function(e){t.editing.mode="creator"}}},[n("v-icon",[t._v("mdi-vector-polyline-plus")])],1)],1)],1):t._e()],1):t._e(),n("div",{staticClass:"toolbox navigation-toolbox"},[n("v-slider",{attrs:{"hide-details":"","thumb-label":"",dense:"",max:40,min:"0.5",step:"0"},scopedSlots:t._u([{key:"thumb-label",fn:function(e){var n=e.value;return[t._v("\n        "+t._s(n.toFixed(2))+"\n      ")]}}]),model:{value:t.zoom,callback:function(e){t.zoom=e},expression:"zoom"}}),n("div",{staticClass:"zoom-shortcuts"},[n("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){t.zoom=1}}},[t._v("1x")]),n("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){t.zoom=2}}},[t._v("2x")]),n("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){t.zoom=10}}},[t._v("10x")]),n("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){t.zoom=20}}},[t._v("20x")]),n("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){t.zoom=40}}},[t._v("40x")])],1)],1)])},o=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("c5f6"),n("ade3")),r=n("aa78"),s=n.n(r),l=(n("6c7b"),n("7f7f"),n("6762"),n("2fdb"),n("c7c6"),function(t,e){var n=this.instance;switch(t){case"keyDown":32===e.keyCode&&(this.drawer_panning=!0,n.set_canvas_pan(!0),null!=n.currently_drawing&&(n.currently_drawing._enabled=!1));break;case"keyUp":13===e.keyCode&&(n.set_canvas_pan(!0),n.currently_drawing.points=c(n.currently_drawing.points),n.callback.onFinishNewDrawing(n.currently_drawing),n.currently_drawing=null),32===e.keyCode&&(this.drawer_panning=!1,n.set_canvas_pan(!1)),27===e.keyCode&&(c(n.currently_drawing.points),n.currently_drawing=null,n.set_canvas_pan(!0));break}}),c=function(t){var e=[];do{console.log("New iteration"),e=[];for(var n=1;n<t.length-1;n++){var i=t[n-1],o=t[n],a=t[n+1],r=(o.y-i.y)/(o.x-i.x),s=(a.y-o.y)/(a.x-o.x),l=i.x*r-i.y,c=a.x*s-a.y,u=Math.hypot(i.x-o.x,i.y-o.y)+Math.hypot(o.x-a.x,o.y-a.y);(u<7||r===s&&l===c)&&e.push(n)}console.log(e.length,"points removed from",t.length,"("+e.length/t.length*100+"%)"),console.log("Size (before): ",t.length),t=t.filter((function(t,n){return!e.includes(n)})),console.log("Size (after): ",t.length)}while(0!==e.length);return t},u={name:"polygon",instance:null,mouseEvent:function(t,e){var n=this.instance,i=n._mousePointToImagePoint(e.position);switch(t){case"dblClick":null==n.currently_drawing?n.currently_drawing={type:"polygon",points:[i,i],is_hover:!1,path:null,color:n.drawing_color}:n.currently_drawing.points.push(i);break;case"move":null!=n.currently_drawing&&(n.currently_drawing.points[n.currently_drawing.points.length-1]=i,n.update());break}},keyboardEvent:function(t,e){var n=this.instance;if(null!=n.currently_drawing)switch(t){case"keyUp":13===e.keyCode&&(n.currently_drawing.points.pop(),n.callback.onFinishNewDrawing(n.currently_drawing),n.currently_drawing=null),27===e.keyCode&&(n.currently_drawing.points.length>3?n.currently_drawing.points.splice(n.currently_drawing.points.length-2,1):n.currently_drawing=null,n.update());break}},init:function(t){return this.instance=t,this}},d={name:"rect",instance:null,mouseEvent:function(t,e){var n=this.instance,i=n._mousePointToImagePoint(e.position);switch(t){case"dblClick":null==n.currently_drawing?n.currently_drawing={type:this.name,points:[i,i],is_hover:!1,color:n.drawing_color}:(["x","y"].map((function(t){if(n.currently_drawing.points[0][t]>n.currently_drawing.points[1][t]){var e=n.currently_drawing.points[0][t];n.currently_drawing.points[0][t]=n.currently_drawing.points[1][t],n.currently_drawing.points[1][t]=e}})),n.callback.onFinishNewDrawing(n.currently_drawing),n.currently_drawing=null),n.update();break;case"move":null!=n.currently_drawing&&(n.currently_drawing.points[1]=i,n.update());break}},keyboardEvent:function(t,e){var n=this.instance;switch(t){case"keyUp":27===e.keyCode&&(n.currently_drawing=null,n.update());break}},init:function(t){return this.instance=t,this}},h={name:"free",instance:null,drawer_panning:!1,mouseEvent:function(t,e){var n=this.instance,i=n._mousePointToImagePoint(e.position);switch(t){case"press":n.set_canvas_pan(!1),this.drawer_panning||(null==n.currently_drawing?n.currently_drawing={type:"polygon",points:[i],is_hover:!1,path:null,color:n.drawing_color,_enabled:!0}:n.currently_drawing._enabled=!0);break;case"move":!this.drawer_panning&&null!=n.currently_drawing&&n.currently_drawing._enabled&&n.currently_drawing.points.push(i);break;case"release":null!=n.currently_drawing&&(n.currently_drawing._enabled=!1);break}n.update()},keyboardEvent:l,init:function(t){return this.instance=t,t.set_canvas_pan(!1),this}},p={name:"brush",instance:null,size:500,drawer_panning:!1,mouseEvent:function(t,e){var n=this.instance,i=n._mousePointToImagePoint(e.position);switch(t){case"press":if(this.drawer_panning)return;n.set_canvas_pan(!1),null==n.currently_drawing&&(n.currently_drawing={type:"brush",size:this.size,is_hover:!1,points:[i],color:n.drawing_color,_enabled:!0});break;case"move":!this.drawer_panning&&null!=n.currently_drawing&&n.currently_drawing._enabled&&n.currently_drawing.points.push(i);break;case"release":null!=n.currently_drawing&&(n.currently_drawing._enabled=!1),n.set_canvas_pan(!0);break}n.update()},keyboardEvent:l,init:function(t){return this.instance=t,t.set_canvas_pan(!1),this}},v={editor:null,active:!1,mouseEvent:function(t,e){var n=this.editor,i=n.instance;switch(t){case"press":this.active=!0,i.set_canvas_pan(!1);break;case"release":this.active=!1,i.set_canvas_pan(!0);break;case"move":if(!0===this.active){var o=i._mousePointToImagePoint(e.position);n.controls.some((function(t){if(n.intersectsControl(o,t.point)){var e=n.element.points.indexOf(t.point);return n.element.points.splice(e,1),n.controls.splice(e,1),n.addRestorePoint("erased"),!0}})),i.update()}break}},init:function(t){return this.editor=t,this}},m={editor:null,control:null,mouseEvent:function(t,e){var n=this,i=this.editor,o=i.instance;switch(t){case"press":var a=o._mousePointToImagePoint(e.position);i.controls.forEach((function(t){var e=t.point,r=i.intersectsControl(a,e);r&&(n.control=t,o.set_canvas_pan(!1))}));break;case"release":this.control=null,o.set_canvas_pan(!0),i.addRestorePoint("moved");break;case"move":if(null!=this.control){var r=o._mousePointToImagePoint(e.position);this.control.point.x=r.x,this.control.point.y=r.y,o.update()}break}},init:function(t){return this.editor=t,this}},f={editor:null,mouseEvent:function(t,e){var n=this.editor,i=n.instance;switch(t){case"click":var o=i._mousePointToImagePoint(e.position);if(i.ctx.isPointInPath(n.element.path,e.position.x,e.position.y)){for(var a=n.element.points,r=1;r<a.length;r++){var s=a[r-1],l=a[r],c=Math.min(s.x,l.x)-10,u=Math.max(s.x,l.x)+10,d=Math.min(s.y,l.y)-10,h=Math.max(s.y,l.y)+10;if(c<o.x&&o.x<u&&d<o.y&&o.y<h){n.addRestorePoint("created"),a.splice(r,0,o);break}}console.log("Ended"),n.create_controls(),i.update()}break}},init:function(t){return this.editor=t,this}},_={element:null,controls:[],instance:null,mode:null,current_history_point:0,history:[],addRestorePoint:function(t){this.history.length>0&&this.current_history_point!==this.history.length-1&&(console.log("clearing future:",this.history.length),this.history.splice(this.current_history_point,this.history.length-this.current_history_point),console.log("clearing future:",this.history.length)),this.history.push({type:t,points:this.element.points.map((function(t){return{x:t.x,y:t.y}}))}),this.current_history_point=this.history.length-1,this.instance.callback.onEditingEvent()},restoreState:function(t){console.log("restoreState",t,this.history),this.element.points=this.history[t].points,this.create_controls(),this.instance.update(),this.current_history_point=t},intersectsControl:function(t,e){return t.x>e.x-25&&t.x<e.x+25&&t.y>e.y-25&&t.y<e.y+25},mouseEvent:function(t,e){this.mode.mouseEvent(t,e)},keyboardEvent:function(t,e){var n=this.instance;switch(console.log(t,e),t){case"keyUp":27===e.keyCode?(this.element.points=this.original_points,this.element.color=this.original_color,n.callback.onFinishedEditing(!1,this.element),n.currently_editing=null,n.update()):13===e.keyCode&&(n.callback.onFinishedEditing(!0,this.element),n.currently_editing=null,n.update());break}},draw:function(t){var e=this.instance;t.lineWidth=1,this.controls.forEach((function(n){t.beginPath();var i=e._imagePointToCanvasPoint(n.point.x,n.point.y);t.ellipse(i.x,i.y,5,5,0,2*Math.PI,0,!1),t.fillStyle="rgb(255,255,255)",t.fill(),t.strokeStyle="black",t.stroke(),n._canvas_pos=i}))},create_controls:function(){this.controls=this.element.points.map((function(t){return{point:t}}))},create_mode:function(t){"eraser"===t?this.mode=v.init(this):"mover"===t?this.mode=m.init(this):"creator"===t&&(this.mode=f.init(this))},init:function(t,e,n){return this.instance=t,this.original_points=e.points.map((function(t){return{x:t.x,y:t.y}})),this.original_color=e.color.map((function(t){return t})),this.element=e,this.create_controls(),this.create_mode(n),this.history=[],this}},g={elements:[],elementsOnScreen:[],set tool(t){this.new_tool=this.tools[t],this.set_canvas_pan(!0),this.viewer.canvas.focus()},get tool(){return null!=this.new_tool?this.new_tool.name:"none"},set editorMode(t){this.currently_editing.create_mode(t),this.viewer.canvas.focus()},get editorMode(){return""},tools:{},default_opacity:.3,filtering:{},currently_editing:null,new_tool:null,currently_drawing:null,drawing_color:[5,173,240],_lastUpdate:0,_viewportLocation:{min:[],max:[]},editElement:function(t){this.currently_editing=_.init(this,t,"mover"),this.update(),this.currently_editing.addRestorePoint("editing")},resize:function(){this.canvas.width=this.viewer.canvas.clientWidth,this.canvas.height=this.viewer.canvas.clientHeight},_mousePointToImagePoint:function(t){var e=this.viewer.viewport.pointFromPixel(t),n=this.viewer.viewport.viewportToImageCoordinates(e.x,e.y);return{x:n.x,y:n.y}},_imagePointToCanvasPoint:function(t,e){var n=new s.a.Point(t,e);return this.viewer.viewport.imageToViewerElementCoordinates(n)},update:function(){var t=this;if(null!=this.ctx){var e=this.ctx;if(!(this._lastUpdate>Date.now()-this.elementsOnScreen.length/5)){e.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);var n=this._viewportLocation.min,i=this._viewportLocation.max;this.elementsOnScreen=[],this.elements.forEach((function(e){if(t.filtering[e.label.name]){var o=e.data.points[0];o.x>n.x&&o.x<i.x&&o.y>n.y&&o.y<i.y&&(t._draw_element(e.data),t.elementsOnScreen.push(e))}})),null!=this.currently_drawing&&this._draw_element(this.currently_drawing),null!=this.currently_editing&&this.currently_editing.draw(e),this._lastUpdate=Date.now()}}},_draw_element:function(t){switch(t.type){case"polygon":this._update_polygon(t);break;case"rect":this._update_rect(t);break;case"brush":this._update_brush(t);break}},_update_polygon:function(t){var e=this.ctx,n=t.points,i="".concat(t.color[0],", ").concat(t.color[1],", ").concat(t.color[2]),o=this._update_path(n),a=this._imagePointToCanvasPoint(n[0].x,n[0].y);o.lineTo(a.x,a.y),t.path=o,e.fillStyle="rgba(".concat(i,", ").concat(t.is_hover?"0.6":this.default_opacity,")"),e.fill(o)},_update_rect:function(t){var e=this.ctx,n=this._imagePointToCanvasPoint(t.points[0].x,t.points[0].y),i=this._imagePointToCanvasPoint(t.points[1].x,t.points[1].y),o="".concat(t.color[0],", ").concat(t.color[1],", ").concat(t.color[2]);e.beginPath(),e.rect(n.x,n.y,i.x-n.x,i.y-n.y),t._canvas_points=[n,i],e.fillStyle="rgba(".concat(o,", ").concat(t.is_hover?"0.6":this.default_opacity,")"),e.fill()},_update_path:function(t){var e=this,n=new Path2D,i=this._imagePointToCanvasPoint(t[0].x,t[0].y);return n.moveTo(i.x,i.y),t.forEach((function(t){var i=e._imagePointToCanvasPoint(t.x,t.y);n.lineTo(i.x,i.y)})),n},_update_brush:function(t){var e=this.ctx,n=t.points,i="".concat(t.color[0],", ").concat(t.color[1],", ").concat(t.color[2]);e.lineWidth=this._imagePointToCanvasPoint(t.size,0).x-this._imagePointToCanvasPoint(0,0).x,e.lineCap="round",e.lineJoin="round",e.strokeStyle="rgba(".concat(i,", ").concat(t.is_hover?"0.6":this.default_opacity,")");var o=this._update_path(n);t.path=o,e.stroke(o)},_check_intersects:function(t,e){if("rect"===t.type){var n=t._canvas_points[0],i=t._canvas_points[1];return e.x>n.x&&e.x<i.x&&e.y>n.y&&e.y<i.y}if("polygon"===t.type||"brush"===t.type)return this.ctx.isPointInPath(t.path,e.x,e.y,"nonzero")},set_canvas_pan:function(t){this.viewer.panHorizontal=t,this.viewer.panVertical=t},init:function(t,e){var n=this,i=document.createElement("canvas");i.style.position="absolute",i.style.left=0,i.style.top=0,i.style.width="100%",i.style.height="100%",t.canvas.appendChild(i),this.viewer=t,this.canvas=i,this.callback=e,this.ctx=i.getContext("2d"),this.viewer.addHandler("update-viewport",(function(){var t=n.ctx,e=n.viewer.viewport.windowToImageCoordinates(new s.a.Point(0,0)),i=n.viewer.viewport.windowToImageCoordinates(new s.a.Point(t.canvas.width,t.canvas.height));e.x===n._viewportLocation.min.x&&e.y===n._viewportLocation.min.y&&i.x===n._viewportLocation.max.x&&i.y===n._viewportLocation.max.y||n.update(),n._viewportLocation.max=i,n._viewportLocation.min=e})),this.viewer.addHandler("resize",(function(){n.resize()})),new s.a.MouseTracker({element:this.viewer.canvas,nonPrimaryReleaseHandler:function(t){},releaseHandler:function(t){null==n.currently_editing?n.new_tool.mouseEvent("release",t):n.currently_editing.mouseEvent("release",t)},pressHandler:function(t){null==n.currently_editing?n.new_tool.mouseEvent("press",t):n.currently_editing.mouseEvent("press",t)},clickHandler:function(t){null!=n.currently_editing?n.currently_editing.mouseEvent("click",t):n.elementsOnScreen.forEach((function(t){t.data.is_hover&&n.callback.onClick(t)}))},dblClickHandler:function(t){n.new_tool.mouseEvent("dblClick",t)},moveHandler:function(t){if(null==n.currently_editing?n.new_tool.mouseEvent("move",t):n.currently_editing.mouseEvent("move",t),null==n.currently_editing){var i=!1;n.elementsOnScreen.forEach((function(o){var a=o.data,r=n._check_intersects(o.data,t.position),s=a.is_hover!==r;i=i||r&&s||s,s&&(r?e.onHover(o):e.onLeave(o)),a.is_hover=r})),i&&(n.viewer.canvas.style.cursor="hand",n.update())}},keyDownHandler:function(t){null==n.currently_editing?n.new_tool.keyboardEvent("keyDown",t):n.currently_editing.keyboardEvent("keyDown",t)},keyUpHandler:function(t){null==n.currently_editing?n.new_tool.keyboardEvent("keyUp",t):n.currently_editing.keyboardEvent("keyUp",t)}}),this.tools={polygon:u.init(this),free:h.init(this),rect:d.init(this),brush:p.init(this)},this.tool="polygon",this.resize(t.canvas.width,t.canvas.height)}};function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w={name:"SliceViewer",data:function(){return{selected_label:null,labeled_regions:[],selected_tool:"polygon",editor_tool:"",zoom:0,editing:{element:null,mode:"mover",undo:0,max_undo:0}}},watch:{value:{immediate:!0,handler:function(t){this.labeled_regions=t,g.elements=t,g.update()}},labels:{immediate:!0,handler:function(t){this.selected_label=t[0]}},labelsVisibility:{immediate:!0,deep:!0,handler:function(t){g.filtering=t,g.update()}},selected_label:{immediate:!0,handler:function(t){g.drawing_color=t.color,null!=this.editing.element&&(this.editing.element.data.color=t.color,g.update())}},selected_tool:function(t){g.tool=t},zoom:function(t){var e=this.viewer;null==e||this.no_model_action||e.viewport.zoomTo(t),this.no_model_action=!1},regionOpacity:function(t){g.default_opacity=t,g.update()},undo:function(t){g.currently_editing.points_history=t,g.update()},"editing.mode":function(t){g.editorMode=t},"editing.undo":function(t){this.no_model_action||g.currently_editing.restoreState(t),this.no_model_action=!1},tileSources:function(t){console.log("tileSources: ",t),this.viewer.open(t)}},methods:{editElement:function(t){console.log("editElement",t),this.editing.element=t,this.no_model_action=!0,g.editElement(t.data)}},mounted:function(){var t=this;this.$nextTick((function(){var e=s()({id:"seadragon-viewer",tileSources:t.tileSources,showNavigator:!0,navigatorPosition:"BOTTOM_RIGHT",navigatorRight:"16px",navigatorBottom:"16px",navigatorHeight:"120px",navigatorWidth:"145px",showNavigationControl:!1,gestureSettingsMouse:{clickToZoom:!1}});t.viewer=e,g.init(e,{onHover:function(t){console.log("onHover: ",t)},onLeave:function(t){console.log("onLeave: ",t)},onClick:function(e){t.$emit("region-clicked",e)},onEditingEvent:function(){t.no_model_action=!0;var e=g.currently_editing.history.length-1;t.editing.max_undo=e,t.editing.undo=e},onFinishNewDrawing:function(e){t.$emit("new-draw",{label:t.selected_label,data:e})},onFinishedEditing:function(e,n){e&&(console.log("data",y(y({},t.editing.element),{},{data:n})),t.$emit("edit-draw",y(y({},t.editing.element),{},{data:n}))),t.editing.element=null}}),t.viewer.addHandler("zoom",(function(e){t.no_model_action=!0,t.zoom=e.zoom})),t.no_model_action=!1}))},props:{drawer:{type:Boolean,default:!0},labels:{type:Array},value:{type:Array},tileSources:{type:String},labelsVisibility:{type:Object},regionOpacity:{type:Number}}},k=w,x=(n("774b"),n("2877")),j=n("6544"),C=n.n(j),V=n("8212"),E=n("8336"),P=n("ce7e"),S=n("132d"),T=n("8860"),$=n("da13"),O=n("8270"),z=n("5d23"),L=n("e449"),I=n("ba0d"),D=Object(x["a"])(k,i,o,!1,null,"4b07692e",null);e["a"]=D.exports;C()(D,{VAvatar:V["a"],VBtn:E["a"],VDivider:P["a"],VIcon:S["a"],VList:T["a"],VListItem:$["a"],VListItemAvatar:O["a"],VListItemContent:z["a"],VListItemTitle:z["b"],VMenu:L["a"],VSlider:I["a"]})},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d"),n("bf40");var i=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("router-view",{attrs:{name:"app_bar"}}),n("v-main",[n("router-view")],1)],1)},a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[i("v-row",{staticClass:"text-center"},[i("v-col",{attrs:{cols:"12"}},[i("v-img",{staticClass:"my-3",attrs:{src:n("9b19"),contain:"",height:"200"}})],1),i("v-col",{staticClass:"mb-4"},[i("h1",{staticClass:"display-2 font-weight-bold mb-3"},[t._v("\n        Welcome to Vuetify\n      ")]),i("p",{staticClass:"subheading font-weight-regular"},[t._v("\n        For help and collaboration with other Vuetify developers,\n        "),i("br"),t._v("please join our online\n        "),i("a",{attrs:{href:"https://community.vuetifyjs.com",target:"_blank"}},[t._v("Discord Community")])])]),i("v-col",{staticClass:"mb-5",attrs:{cols:"12"}},[i("h2",{staticClass:"headline font-weight-bold mb-3"},[t._v("\n        What's next?\n      ")]),i("v-row",{attrs:{justify:"center"}},t._l(t.whatsNext,(function(e,n){return i("a",{key:n,staticClass:"subheading mx-3",attrs:{href:e.href,target:"_blank"}},[t._v("\n          "+t._s(e.text)+"\n        ")])})),0)],1),i("v-col",{staticClass:"mb-5",attrs:{cols:"12"}},[i("h2",{staticClass:"headline font-weight-bold mb-3"},[t._v("\n        Important Links\n      ")]),i("v-row",{attrs:{justify:"center"}},t._l(t.importantLinks,(function(e,n){return i("a",{key:n,staticClass:"subheading mx-3",attrs:{href:e.href,target:"_blank"}},[t._v("\n          "+t._s(e.text)+"\n        ")])})),0)],1),i("v-col",{staticClass:"mb-5",attrs:{cols:"12"}},[i("h2",{staticClass:"headline font-weight-bold mb-3"},[t._v("\n        Ecosystem\n      ")]),i("v-row",{attrs:{justify:"center"}},t._l(t.ecosystem,(function(e,n){return i("a",{key:n,staticClass:"subheading mx-3",attrs:{href:e.href,target:"_blank"}},[t._v("\n          "+t._s(e.text)+"\n        ")])})),0)],1)],1)],1)},s=[],l={name:"HelloWorld",data:function(){return{ecosystem:[{text:"vuetify-loader",href:"https://github.com/vuetifyjs/vuetify-loader"},{text:"github",href:"https://github.com/vuetifyjs/vuetify"},{text:"awesome-vuetify",href:"https://github.com/vuetifyjs/awesome-vuetify"}],importantLinks:[{text:"Documentation",href:"https://vuetifyjs.com"},{text:"Chat",href:"https://community.vuetifyjs.com"},{text:"Made with Vuetify",href:"https://madewithvuejs.com/vuetify"},{text:"Twitter",href:"https://twitter.com/vuetifyjs"},{text:"Articles",href:"https://medium.com/vuetify"}],whatsNext:[{text:"Explore components",href:"https://vuetifyjs.com/components/api-explorer"},{text:"Select a layout",href:"https://vuetifyjs.com/getting-started/pre-made-layouts"},{text:"Frequently Asked Questions",href:"https://vuetifyjs.com/getting-started/frequently-asked-questions"}]}}},c=l,u=n("2877"),d=n("6544"),h=n.n(d),p=n("62ad"),v=n("a523"),m=n("adda"),f=n("0fd9"),_=Object(u["a"])(c,r,s,!1,null,null,null),g=_.exports;h()(_,{VCol:p["a"],VContainer:v["a"],VImg:m["a"],VRow:f["a"]});var b={name:"App",components:{HelloWorld:g},data:function(){return{}}},y=b,w=n("7496"),k=n("f6c4"),x=Object(u["a"])(y,o,a,!1,null,null,null),j=x.exports;h()(x,{VApp:w["a"],VMain:k["a"]});var C=n("8c4f"),V=n("2f62");i["a"].use(V["a"]);var E=new V["a"].Store({state:{session:null,user:null,token:null},mutations:{set_session:function(t,e){t.session=e},login:function(t,e){t.token=e.token,t.user=e.user}},actions:{}}),P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("img",{attrs:{alt:"Vue logo",src:n("cf05")}}),i("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},S=[],T={name:"home",components:{HelloWorld:g}},$=T,O=Object(u["a"])($,P,S,!1,null,null,null),z=(O.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.tasks,(function(e,i){return n("v-flex",{attrs:{cols:"12",sm:"12",md:"6"}},[n("v-card",{staticClass:"ma-2"},[n("v-card-text",[n("div",[t._v(t._s(e.project.name))]),n("p",{staticClass:"text-h5 text--primary"},[t._v("\n            "+t._s(e.name)+"\n          ")]),n("div",[n("v-chip-group",t._l(e.slides,(function(e){return n("v-chip",{staticStyle:{"pointer-events":"none"}},[t._v(t._s(e.id))])})),1)],1)]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",block:"",color:"primary accent-3"},on:{click:function(n){return t.start_task(e)}}},[t._v("\n            Continue\n          ")])],1)],1)],1)})),1)],1)}),L=[],I={name:"Tasks",data:function(){return{tasks:[]}},methods:{start_task:function(t){var e=this;this.$post("session/create",t).then((function(t){e.$store.commit("set_session",t),e.$router.push("/session/"+t.id)})).catch((function(t){return alert(t)}))},loadTasks:function(){var t=this;this.$get("task/list").then((function(e){return t.tasks=e})).catch((function(t){return alert(t)}))}},mounted:function(){this.loadTasks()}},D=I,N=n("8336"),R=n("b0af"),A=n("99d9"),H=n("cc20"),M=n("ef9a"),B=n("ce7e"),U=n("0e8f"),F=n("a722"),W=n("2fa4"),q=Object(u["a"])(D,z,L,!1,null,"6439c457",null),G=q.exports;h()(q,{VBtn:N["a"],VCard:R["a"],VCardActions:A["a"],VCardText:A["b"],VChip:H["a"],VChipGroup:M["a"],VContainer:v["a"],VDivider:B["a"],VFlex:U["a"],VLayout:F["a"],VSpacer:W["a"]});var J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{overflow:"hidden"}},[n("slice-viewer",{ref:"slice_viewer",attrs:{"tile-sources":t.tile_sources,labels:t.project_labels,"labels-visibility":t.labels_visible,"region-opacity":t.region_opacity},on:{"region-clicked":t.regionClicked,"new-draw":t.onNewRegionDraw,"edit-draw":t.onEditRegionDraw},model:{value:t.labelled[t.current_slide],callback:function(e){t.$set(t.labelled,t.current_slide,e)},expression:"labelled[current_slide]"}}),n("side-window",[n("v-toolbar",{attrs:{dense:"",color:"grey lighten-4"},scopedSlots:t._u([{key:"extension",fn:function(){return[n("v-tabs",{model:{value:t.selected_tab,callback:function(e){t.selected_tab=e},expression:"selected_tab"}},[n("v-tab",[t._v("View")]),n("v-tab",[t._v("Regions")])],1)]},proxy:!0}])},[n("v-toolbar-title",[t._v("Labelling task")])],1),n("v-tabs-items",{model:{value:t.selected_tab,callback:function(e){t.selected_tab=e},expression:"selected_tab"}},[n("v-tab-item",[n("v-container",{attrs:{fluid:"","grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{cols:"12",sm:"12",md:"6"}},[n("v-card",[n("v-card-title",[t._v("Region visibility by label")]),n("div",{staticClass:"pl-3 pr-3 pb-3"},t._l(t.project_labels,(function(e){return n("v-switch",{staticClass:"mt-0",attrs:{"hide-details":"",dense:"",label:e.name,color:t.genColor(e.color)},model:{value:t.labels_visible[e.name],callback:function(n){t.$set(t.labels_visible,e.name,n)},expression:"labels_visible[label.name]"}})})),1),n("v-divider"),n("v-slider",{staticClass:"pl-2 pr-2",attrs:{"hide-details":"","prepend-icon":"mdi-circle-opacity",step:"0","thumb-label":"",min:"0.1",max:"1"},scopedSlots:t._u([{key:"thumb-label",fn:function(e){var n=e.value;return[t._v("\n                    "+t._s(n.toFixed(2))+"\n                  ")]}}]),model:{value:t.region_opacity,callback:function(e){t.region_opacity=e},expression:"region_opacity"}})],1)],1),n("v-flex",{attrs:{cols:"12",sm:"12",md:"6"}},[n("v-card",[n("v-card-title",{staticClass:"ma-0"},[t._v("Task slides")]),n("div",{staticClass:"pl-3 pr-3 pb-3"},[n("v-radio-group",{attrs:{"hide-details":""},model:{value:t.current_slide,callback:function(e){t.current_slide=e},expression:"current_slide"}},t._l(t.slides,(function(t){return n("v-radio",{attrs:{value:t.id,label:t.id}})})),1)],1)],1)],1)],1)],1)],1),n("v-tab-item",[n("v-container",{attrs:{fluid:"","grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.labelled[t.current_slide],(function(e,i){return n("v-flex",{attrs:{cols:"12",sm:"12",md:"6"}},[n("v-card",{attrs:{id:"region-"+e.id,"min-width":"200",outlined:""}},[n("v-card-title",[n("v-avatar",{staticClass:"mr-2",attrs:{size:"16",color:t.genColor(e.label.color)}}),t._v("\n                  "+t._s(e.label.name)+"\n                ")],1),n("v-card-text",[t._v("\n                  "+t._s(e.data.type)+".\n                ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(n){return t.editRegion(e)}}},[t._v("Edit")])],1)],1)],1)})),1)],1)],1)],1)],1)],1)},X=[],K=(n("7f7f"),n("515a")),Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{ref:"side_window",attrs:{app:"",right:"",width:t.width},model:{value:t.shown,callback:function(e){t.shown=e},expression:"shown"}},[t._t("default")],2)},Y=[],Z={name:"SideWindow",data:function(){return{width:300,shown:!0,borderSize:3}},methods:{setBorderWidth:function(){var t=this.$refs.side_window.$el.querySelector(".v-navigation-drawer__border");t.style.width=this.borderSize+"px",t.style.cursor="ew-resize"},setEvents:function(){var t=this.borderSize+300,e=this.$refs.side_window.$el,n=e.querySelector(".v-navigation-drawer__border"),i=this,o=e.classList.contains("v-navigation-drawer--right")?"right":"left";function a(t){document.body.style.cursor="ew-resize";var n="right"===o?document.body.scrollWidth-t.clientX:t.clientX;e.style.width=n+"px"}n.addEventListener("mousedown",(function(n){n.offsetX<t&&(e.style.transition="initial",document.addEventListener("mousemove",a,!1))}),!1),document.addEventListener("mouseup",(function(){e.style.transition="",i.width=e.style.width,document.body.style.cursor="",document.removeEventListener("mousemove",a,!1)}),!1)}},mounted:function(){this.setBorderWidth(),this.setEvents()}},tt=Z,et=(n("659f"),n("f774")),nt=Object(u["a"])(tt,Q,Y,!1,null,"a324ad62",null),it=nt.exports;h()(nt,{VNavigationDrawer:et["a"]});var ot={name:"Session",computed:{session_id:function(){return this.$route.params.session_id},tile_sources:function(){return"http://localhost:2000/api/session/"+this.session_id+"/"+this.current_slide+".dzi"},project_labels:function(){return this.$store.state.session.task.project.labels},session:function(){return this.$store.state.session},slides:function(){return this.$store.state.session.task.slides}},watch:{session:{immediate:!0,handler:function(t){this.labelled=t.labelled,this.current_slide=t.task.slides[0].id}},project_labels:{immediate:!0,deep:!0,handler:function(t){console.log("project_labels watcher",t);for(var e=0;e<t.length;e++)this.$set(this.labels_visible,t[e].name,!0)}},labels_visible:{deep:!0,handler:function(t){console.log("labels_visible watcher:",t)}}},data:function(){return{current_slide:null,labelled:{},selected_tab:0,labels_visible:{},region_opacity:.3}},methods:{genColor:function(t){return"rgb(".concat(t[0],",").concat(t[1],",").concat(t[2],")")},onNewRegionDraw:function(t){var e=this;t.slide_id=this.current_slide,this.$post("session/"+this.session_id+"/add_region",t).then((function(t){e.labelled[e.current_slide].push(t)})).catch((function(t){alert("Error while saving region: "+t)}))},onEditRegionDraw:function(t){this.$post("session/"+this.session_id+"/edit_region",t).then((function(t){console.log(t)})).catch((function(t){alert("Error while saving region: "+t)}))},regionClicked:function(t){console.log("regionClicked",t);var e=document.getElementById("region-".concat(t.id));this.selected_tab=1,e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("highlighted"),setTimeout((function(){e.classList.remove("highlighted")}),3e3)},editRegion:function(t){this.$refs.slice_viewer.editElement(t)},randomNumber:function(t){return Math.floor(Math.random()*t)},stressTest:function(){var t,e=[];console.time("creating mock data");for(var n=0;n<3e3;n++){for(var i=[{x:1,y:1},{x:1,y:50},{x:50,y:1}],o=0;o<3;o++)i[o].x+=50*n,i[o].y+=25*n;e.push({label:{id:0,name:"Stresstest",color:[160,160,160]},data:{type:"polygon",points:i,color:[255,165,0]}})}console.timeEnd("creating mock data"),console.time("updating data"),(t=this.labelled).push.apply(t,e),console.timeEnd("updating data")}},components:{SideWindow:it,SliceViewer:K["a"]}},at=ot,rt=(n("3b12"),n("8212")),st=n("67b6"),lt=n("43a6"),ct=n("ba0d"),ut=n("b73d"),dt=n("71a3"),ht=n("c671"),pt=n("fe57"),vt=n("aac8"),mt=n("71d9"),ft=n("2a7f"),_t=Object(u["a"])(at,J,X,!1,null,"70ba9f59",null),gt=_t.exports;h()(_t,{VAvatar:rt["a"],VBtn:N["a"],VCard:R["a"],VCardActions:A["a"],VCardText:A["b"],VCardTitle:A["c"],VContainer:v["a"],VDivider:B["a"],VFlex:U["a"],VLayout:F["a"],VRadio:st["a"],VRadioGroup:lt["a"],VSlider:ct["a"],VSpacer:W["a"],VSwitch:ut["a"],VTab:dt["a"],VTabItem:ht["a"],VTabs:pt["a"],VTabsItems:vt["a"],VToolbar:mt["a"],VToolbarTitle:ft["a"]});var bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-expansion-panels",{attrs:{multiple:""}},[n("v-row",[n("v-col",{attrs:{sm:"12"}},[n("v-expansion-panel",[n("v-expansion-panel-header",[n("v-toolbar-title",{staticClass:"title"},[t._v("Tasks")])],1),n("v-expansion-panel-content",[n("v-data-table",{attrs:{headers:t.config.task_headers,items:t.tasks,"items-per-page":5},scopedSlots:t._u([{key:"item.slides",fn:function(e){var i=e.item;return[n("v-chip-group",t._l(i.slides,(function(e){return n("v-chip",{staticStyle:{"pointer-events":"none"},attrs:{outlined:"",readonly:!0}},[t._v("\n                    "+t._s(e.id)+"\n                  ")])})),1)]}},{key:"item.assigned",fn:function(e){var i=e.item;return[n("v-chip-group",{attrs:{"active-class":"primary--text"}},t._l(i.assigned,(function(e){return n("v-chip",{staticStyle:{"pointer-events":"none"},attrs:{readonly:!0,dark:""}},[t._v("\n                    "+t._s(e.name)+"\n                  ")])})),1)]}}])}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:t.new_task}},[t._v("New task")])],1)],1)],1)],1),n("v-col",{attrs:{sm:"12"}},[n("v-expansion-panel",[n("v-expansion-panel-header",[n("v-toolbar-title",{staticClass:"title"},[t._v("Users")])],1),n("v-expansion-panel-content",[n("v-data-table",{attrs:{headers:t.config.user_headers,items:t.users,"items-per-page":5}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:t.new_user}},[t._v("New user")])],1)],1)],1)],1),n("v-col",{attrs:{sm:"12"}},[n("v-expansion-panel",[n("v-expansion-panel-header",[n("v-toolbar-title",{staticClass:"title"},[t._v("Projects")])],1),n("v-expansion-panel-content",[n("v-data-table",{attrs:{headers:t.config.project_header,items:t.projects,"items-per-page":5},scopedSlots:t._u([{key:"item.labels",fn:function(e){var i=e.item;return[n("v-chip-group",t._l(i.labels,(function(e){return n("v-chip",{staticStyle:{"pointer-events":"none"},attrs:{outlined:"",color:"rgb("+e.color[0]+", "+e.color[1]+","+e.color[2]+")",readonly:!0,dark:""}},[t._v("\n                    "+t._s(e.name)+"\n                  ")])})),1)]}}])}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:t.new_project}},[t._v("New project")])],1)],1)],1)],1)],1)],1),n("v-navigation-drawer",{attrs:{app:"",temporary:"",right:"",width:"500px"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-toolbar",[n("v-toolbar-title",[t._v("Information editor")])],1),n("v-container",["user"===t.mode?n("user-editor",{model:{value:t.editing,callback:function(e){t.editing=e},expression:"editing"}}):"project"===t.mode?n("project-editor",{model:{value:t.editing,callback:function(e){t.editing=e},expression:"editing"}}):"task"===t.mode?n("task-editor",{model:{value:t.editing,callback:function(e){t.editing=e},expression:"editing"}}):t._e()],1)],1)],1)},yt=[],wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-text-field",{attrs:{label:"Name"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}}),n("v-text-field",{attrs:{label:"Username"},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}}),n("v-text-field",{attrs:{label:"Password"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),n("v-checkbox",{attrs:{label:"Is user admin?"},model:{value:t.user.is_admin,callback:function(e){t.$set(t.user,"is_admin",e)},expression:"user.is_admin"}}),n("v-btn",{staticStyle:{position:"absolute",right:"16px"},attrs:{outlined:""},on:{click:t.save}},[t._v("Save")])],1)},kt=[],xt={name:"UserEditor",watch:{value:{immediate:!0,handler:function(t){this.user=t}},user:{deep:!0,handler:function(t){this.$emit("input",t)}}},data:function(){return{user:null}},methods:{save:function(){var t=this;null!=this.user.id?this.$post("user/update",this.user).then((function(e){t.user=e,t.$emit("input",t.user)})).catch((function(t){alert(t)})):this.$post("user/new",this.user).then((function(e){t.user=e,t.$emit("input",t.user)})).catch((function(t){alert(t)}))}},props:["value"]},jt=xt,Ct=n("ac7c"),Vt=n("8654"),Et=Object(u["a"])(jt,wt,kt,!1,null,"d969ed48",null),Pt=Et.exports;h()(Et,{VBtn:N["a"],VCheckbox:Ct["a"],VTextField:Vt["a"]});var St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-text-field",{attrs:{label:"Project name"},model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}}),n("v-textarea",{attrs:{label:"Project description"},model:{value:t.project.description,callback:function(e){t.$set(t.project,"description",e)},expression:"project.description"}}),n("v-text-field",{attrs:{label:"Files location"},model:{value:t.project.folder,callback:function(e){t.$set(t.project,"folder",e)},expression:"project.folder"}}),n("v-data-table",{attrs:{headers:t.header,items:t.project.labels,"items-per-page":5},scopedSlots:t._u([{key:"item.actions",fn:function(e){var i=e.item;return[n("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,a=e.attrs;return[n("div",t._g(t._b({staticClass:"color-box",style:t.gen_color(i),on:{click:function(e){return t.change_color(i)}}},"div",a,!1),o))]}}],null,!0)},[n("v-color-picker",{model:{value:t.color_picked,callback:function(e){t.color_picked=e},expression:"color_picked"}})],1)]}}])}),n("v-text-field",{attrs:{filled:"",label:"New label","append-outer-icon":"add"},on:{"click:append-outer":t.add_label},model:{value:t.new_label,callback:function(e){t.new_label=e},expression:"new_label"}}),n("v-btn",{staticStyle:{position:"absolute",right:"16px"},attrs:{outlined:""},on:{click:t.save}},[t._v("Save")])],1)},Tt=[],$t={name:"ProjectEditor",watch:{value:{immediate:!0,handler:function(t){this.project=t}},color_picked:function(t){this.editing_label.color=[t.rgba.r,t.rgba.g,t.rgba.b]}},data:function(){return{project:null,color_picked:null,header:[{text:"Label",value:"name"},{text:"Config",value:"actions",sortable:!1}],editing_label:null,new_label:null}},methods:{add_label:function(){null==this.project&&(this.project={labels:[]}),null==this.project.labels&&(this.project.labels=[]),this.project.labels.push({name:this.new_label,color:[255,255,255]}),this.new_label=""},change_color:function(t){this.editing_label=t},gen_color:function(t){var e=t.color;return"background-color: rgba(".concat(e[0],",").concat(e[1],",").concat(e[2],", 1)")},save:function(){var t=this;null==this.project.id&&this.$post("/project/new",this.project).then((function(e){t.project=e,t.$emit("input",t.project)})).catch((function(t){alert(t)}))}},mounted:function(){},props:["value"]},Ot=$t,zt=(n("880c"),n("03a4")),Lt=n("8fea"),It=n("e449"),Dt=n("a844"),Nt=Object(u["a"])(Ot,St,Tt,!1,null,"301877af",null),Rt=Nt.exports;h()(Nt,{VBtn:N["a"],VColorPicker:zt["a"],VDataTable:Lt["a"],VMenu:It["a"],VTextField:Vt["a"],VTextarea:Dt["a"]});var At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-text-field",{attrs:{label:"Task name"},model:{value:t.task.name,callback:function(e){t.$set(t.task,"name",e)},expression:"task.name"}}),n("v-select",{attrs:{label:"Project",chips:"",items:t.projects,"item-text":"name","item-value":"id"},model:{value:t.task.project_id,callback:function(e){t.$set(t.task,"project_id",e)},expression:"task.project_id"}}),n("v-select",{attrs:{label:"File to analyze "+(null!=t.current_folder?"(from "+t.current_folder+")":""),items:t.files,readonly:null==t.task.project_id,"item-text":"id",multiple:"",chips:"","deletable-chips":"","return-object":""},model:{value:t.task.slides,callback:function(e){t.$set(t.task,"slides",e)},expression:"task.slides"}}),n("v-select",{attrs:{label:"Users assigned",chips:"",multiple:"",items:t.users,"item-text":"username","return-object":""},model:{value:t.task.assigned,callback:function(e){t.$set(t.task,"assigned",e)},expression:"task.assigned"}}),n("v-btn",{staticStyle:{position:"absolute",right:"16px"},attrs:{outlined:""},on:{click:t.save}},[t._v("Create task")])],1)},Ht=[],Mt={name:"TaskEditor",watch:{value:{immediate:!0,handler:function(t){this.task=t}},color_picked:function(t){this.editing_label.color=[t.rgba.r,t.rgba.g,t.rgba.b]},"task.project_id":function(t){null!=t&&this.load_files(t)}},computed:{current_folder:function(){if(null!=this.task&&null!=this.task.project_id){var t=this.task.project_id;return this.projects.filter((function(e){return e.id===t}))[0].folder}}},data:function(){return{task:null,editing_label:null,new_label:null,users:[],projects:[],files:[]}},methods:{load_users:function(){var t=this;this.$get("user/list").then((function(e){return t.users=e})).catch((function(t){return alert(t)}))},load_projects:function(){var t=this;this.$get("project/list").then((function(e){return t.projects=e})).catch((function(t){return alert(t)}))},save:function(){var t=this;null==this.task.id&&this.$post("task/new",this.task).then((function(e){t.task=e,t.$emit("input",t.task)})).catch((function(t){alert(t)}))},load_files:function(t){var e=this;this.$get("task/files?project_id="+t).then((function(t){e.files=t})).catch((function(t){alert(t)}))}},mounted:function(){this.load_users(),this.load_projects()},props:["value"]},Bt=Mt,Ut=(n("fa74"),n("b974")),Ft=Object(u["a"])(Bt,At,Ht,!1,null,"44d9458e",null),Wt=Ft.exports;h()(Ft,{VBtn:N["a"],VSelect:Ut["a"],VTextField:Vt["a"]});var qt={name:"Admin",components:{TaskEditor:Wt,ProjectEditor:Rt,UserEditor:Pt},watch:{editing:function(t,e){null!=e&&null==e.id&&null!=t&&null!=t.id&&("user"===this.mode?this.users.push(t):"project"===this.mode?this.projects.push(t):"task"===this.mode&&this.tasks.push(t),this.drawer=!1)}},data:function(){return{drawer:!1,mode:"user",editing:{},users:[],projects:[],tasks:[],config:{task_headers:[{text:"id",align:"start",sortable:!1,value:"id"},{text:"Slides",value:"slides"},{text:"Project",value:"project.name"},{text:"Users",value:"assigned"}],user_headers:[{text:"id",align:"start",sortable:!1,value:"id"},{text:"Name",value:"name"},{text:"Username (login)",value:"username"},{text:"Is admin?",value:"is_admin"}],project_header:[{text:"Project name",align:"start",sortable:!1,value:"name"},{text:"Description",value:"description"},{text:"Labels",value:"labels"}]}}},methods:{new_user:function(){this.editing={username:"",is_admin:!1},this.mode="user",this.drawer=!0},edit_user:function(t){this.editing=this.users[t],this.mode="user",this.drawer=!0},new_project:function(){this.editing={name:"",description:"",folder:"",labels:[]},this.mode="project",this.drawer=!0},new_task:function(){this.editing={name:"",slides:[],assigned:[]},this.mode="task",this.drawer=!0},load_users:function(){var t=this;this.$get("user/list").then((function(e){console.log(e),t.users=e})).catch((function(t){alert(t)}))},load_projects:function(){var t=this;this.$get("project/list").then((function(e){console.log(e),t.projects=e})).catch((function(t){alert(t)}))},load_tasks:function(){var t=this;this.$get("task/list").then((function(e){console.log(e),t.tasks=e})).catch((function(t){return alert(t)}))}},mounted:function(){this.load_users(),this.load_projects(),this.load_tasks()}},Gt=qt,Jt=n("cd55"),Xt=n("49e2"),Kt=n("c865"),Qt=n("0393"),Yt=Object(u["a"])(Gt,bt,yt,!1,null,"36ac9917",null),Zt=Yt.exports;h()(Yt,{VBtn:N["a"],VCardActions:A["a"],VChip:H["a"],VChipGroup:M["a"],VCol:p["a"],VContainer:v["a"],VDataTable:Lt["a"],VExpansionPanel:Jt["a"],VExpansionPanelContent:Xt["a"],VExpansionPanelHeader:Kt["a"],VExpansionPanels:Qt["a"],VNavigationDrawer:et["a"],VRow:f["a"],VSpacer:W["a"],VToolbar:mt["a"],VToolbarTitle:ft["a"]});var te=n("dd38"),ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{app:"",color:"primary",dark:"","shrink-on-scroll":""}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"",transition:"scale-transition",width:"40"}}),n("v-toolbar-title",[t._v("med-img-label")])],1),n("v-spacer")],1)},ne=[],ie={name:"AppBar"},oe=ie,ae=n("40dc"),re=Object(u["a"])(oe,ee,ne,!1,null,"7223d993",null),se=re.exports;h()(re,{VAppBar:ae["a"],VImg:m["a"],VSpacer:W["a"],VToolbarTitle:ft["a"]}),i["a"].use(C["a"]);var le=new C["a"]({routes:[{path:"/",name:"home",component:function(){return n.e("chunk-928ee46e").then(n.bind(null,"a55b"))}},{path:"/tasks",name:"tasks",components:{default:G,app_bar:te["a"]},meta:{auth:!0}},{path:"/session/:session_id",name:"session",components:{default:gt,app_bar:te["a"]},meta:{auth:!0}},{path:"/admin",name:"admin",components:{default:Zt,app_bar:se},meta:{auth:!0,is_admin:!0}},{path:"/login",name:"login",component:function(){return n.e("chunk-928ee46e").then(n.bind(null,"a55b"))}},{path:"/about",name:"about",component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}}]});le.beforeEach((function(t,e,n){t.matched.some((function(t){return t.meta.auth}))?null==E.state.token?n({path:"/login",params:{nextUrl:t.fullPath}}):t.matched.some((function(t){return t.meta.is_admin}))?E.state.user.is_admin?n():n({name:"login"}):n():n()}));var ce=le,ue=n("f309"),de=n("fcf4");n("5363");i["a"].use(ue["a"]);var he=new ue["a"]({theme:{icons:{iconfont:"mdi"},themes:{light:{primary:de["a"].blueGrey.darken3,secondary:de["a"].grey.darken1,accent:de["a"].shades.black,error:de["a"].red.accent3},dark:{primary:de["a"].blue.lighten3}}}}),pe=n("0987"),ve=n("bc3a"),me=n.n(ve);i["a"].use(pe["a"],{axios:me.a,config:{baseURL:"http://192.168.0.2:2000/api"},interceptors:{beforeRequest:function(t,e){if(null!=E.state.token){var n=E.state.token;n&&(t.headers.Authorization="Bearer ".concat(n))}return t},beforeResponse:function(t,e){console.log("beforeResponse: ",t)},beforeResponseError:function(t,e){401===t.statusCode&&console.log("todo: clear login information")}}});var fe=me.a,_e=n("9b40"),ge=n.n(_e);i["a"].use(ge.a);var be=ge.a;i["a"].config.productionTip=!1,new i["a"]({router:ce,store:E,vuetify:he,axios:fe,split:be,render:function(t){return t(j)}}).$mount("#app")},"659f":function(t,e,n){"use strict";n("d8bc")},"774b":function(t,e,n){"use strict";n("3c8b")},"880c":function(t,e,n){"use strict";n("49ce")},"9b19":function(t,e,n){t.exports=n.p+"static/img/logo.63a7d78d.svg"},cf05:function(t,e,n){t.exports=n.p+"static/img/logo.82b9c7a5.png"},d8bc:function(t,e,n){},dd38:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{app:"",color:"primary",dark:"",dense:""}},["session"===t.$route.name?n("v-btn",{staticClass:"hidden-xs-only",attrs:{icon:""},on:{click:function(e){return t.$router.go(-1)}}},[n("v-icon",[t._v("mdi-arrow-left")])],1):t._e(),n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"",transition:"scale-transition",width:"40"}}),n("v-toolbar-title",[t._v("med-img-label")])],1),n("v-spacer"),n("v-btn",{attrs:{text:""}},[n("span",{staticClass:"mr-2"},[t._v("Export")]),n("v-icon",[t._v("mdi-open-in-new")])],1)],1)},o=[],a={name:"AppBar"},r=a,s=n("2877"),l=n("6544"),c=n.n(l),u=n("40dc"),d=n("8336"),h=n("132d"),p=n("adda"),v=n("2fa4"),m=n("2a7f"),f=Object(s["a"])(r,i,o,!1,null,"2116e655",null);e["a"]=f.exports;c()(f,{VAppBar:u["a"],VBtn:d["a"],VIcon:h["a"],VImg:p["a"],VSpacer:v["a"],VToolbarTitle:m["a"]})},f4e7:function(t,e,n){},fa74:function(t,e,n){"use strict";n("f4e7")}});
//# sourceMappingURL=app.ab6d5fe7.js.map